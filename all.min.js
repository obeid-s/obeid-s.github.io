var t,e;t=this,e=function(t){"use strict";function e(t){return null==t}var i={isNothing:e,isObject:function(t){return"object"==typeof t&&null!==t},toArray:function(t){return Array.isArray(t)?t:e(t)?[]:[t]},repeat:function(t,e){var i,a="";for(i=0;i<e;i+=1)a+=t;return a},isNegativeZero:function(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t},extend:function(t,e){var i,a,n,r;if(e)for(i=0,a=(r=Object.keys(e)).length;i<a;i+=1)t[n=r[i]]=e[n];return t}};function a(t,e){var i="",a=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(i+='in "'+t.mark.name+'" '),i+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(i+="\n\n"+t.mark.snippet),a+" "+i):a}function n(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=a(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.toString=function(t){return this.name+": "+a(this,t)};var r=n;function s(t,e,i,a,n){var r="",s="",o=Math.floor(n/2)-1;return a-e>o&&(e=a-o+(r=" ... ").length),i-a>o&&(i=a+o-(s=" ...").length),{str:r+t.slice(e,i).replace(/\t/g,"â†’")+s,pos:a-e+r.length}}function o(t,e){return i.repeat(" ",e-t.length)+t}var l=function(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),"number"!=typeof e.indent&&(e.indent=1),"number"!=typeof e.linesBefore&&(e.linesBefore=3),"number"!=typeof e.linesAfter&&(e.linesAfter=2);for(var a,n=/\r?\n|\r|\0/g,r=[0],l=[],h=-1;a=n.exec(t.buffer);)l.push(a.index),r.push(a.index+a[0].length),t.position<=a.index&&h<0&&(h=r.length-2);h<0&&(h=r.length-1);var d,c,p="",u=Math.min(t.line+e.linesAfter,l.length).toString().length,g=e.maxLength-(e.indent+u+3);for(d=1;d<=e.linesBefore&&!(h-d<0);d++)c=s(t.buffer,r[h-d],l[h-d],t.position-(r[h]-r[h-d]),g),p=i.repeat(" ",e.indent)+o((t.line-d+1).toString(),u)+" | "+c.str+"\n"+p;for(c=s(t.buffer,r[h],l[h],t.position,g),p+=i.repeat(" ",e.indent)+o((t.line+1).toString(),u)+" | "+c.str+"\n",p+=i.repeat("-",e.indent+u+3+c.pos)+"^\n",d=1;d<=e.linesAfter&&!(h+d>=l.length);d++)c=s(t.buffer,r[h+d],l[h+d],t.position-(r[h]-r[h+d]),g),p+=i.repeat(" ",e.indent)+o((t.line+d+1).toString(),u)+" | "+c.str+"\n";return p.replace(/\n$/,"")},h=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],d=["scalar","sequence","mapping"],c=function(t,e){if(e=e||{},Object.keys(e).forEach((function(e){if(-1===h.indexOf(e))throw new r('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')})),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=function(t){var e={};return null!==t&&Object.keys(t).forEach((function(i){t[i].forEach((function(t){e[String(t)]=i}))})),e}(e.styleAliases||null),-1===d.indexOf(this.kind))throw new r('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')};function p(t,e){var i=[];return t[e].forEach((function(t){var e=i.length;i.forEach((function(i,a){i.tag===t.tag&&i.kind===t.kind&&i.multi===t.multi&&(e=a)})),i[e]=t})),i}function u(t){return this.extend(t)}u.prototype.extend=function(t){var e=[],i=[];if(t instanceof c)i.push(t);else if(Array.isArray(t))i=i.concat(t);else{if(!t||!Array.isArray(t.implicit)&&!Array.isArray(t.explicit))throw new r("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.implicit&&(e=e.concat(t.implicit)),t.explicit&&(i=i.concat(t.explicit))}e.forEach((function(t){if(!(t instanceof c))throw new r("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(t.loadKind&&"scalar"!==t.loadKind)throw new r("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(t.multi)throw new r("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),i.forEach((function(t){if(!(t instanceof c))throw new r("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var a=Object.create(u.prototype);return a.implicit=(this.implicit||[]).concat(e),a.explicit=(this.explicit||[]).concat(i),a.compiledImplicit=p(a,"implicit"),a.compiledExplicit=p(a,"explicit"),a.compiledTypeMap=function(){var t,e,i={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function a(t){t.multi?(i.multi[t.kind].push(t),i.multi.fallback.push(t)):i[t.kind][t.tag]=i.fallback[t.tag]=t}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(a);return i}(a.compiledImplicit,a.compiledExplicit),a};var g=u,f=new c("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),m=new c("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),x=new c("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}}),R=new g({explicit:[f,m,x]}),v=new c("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(t){if(null===t)return!0;var e=t.length;return 1===e&&"~"===t||4===e&&("null"===t||"Null"===t||"NULL"===t)},construct:function(){return null},predicate:function(t){return null===t},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),L=new c("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e=t.length;return 4===e&&("true"===t||"True"===t||"TRUE"===t)||5===e&&("false"===t||"False"===t||"FALSE"===t)},construct:function(t){return"true"===t||"True"===t||"TRUE"===t},predicate:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function y(t){return 48<=t&&t<=55}function A(t){return 48<=t&&t<=57}var C=new c("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,i,a=t.length,n=0,r=!1;if(!a)return!1;if("-"!==(e=t[n])&&"+"!==e||(e=t[++n]),"0"===e){if(n+1===a)return!0;if("b"===(e=t[++n])){for(n++;n<a;n++)if("_"!==(e=t[n])){if("0"!==e&&"1"!==e)return!1;r=!0}return r&&"_"!==e}if("x"===e){for(n++;n<a;n++)if("_"!==(e=t[n])){if(!(48<=(i=t.charCodeAt(n))&&i<=57||65<=i&&i<=70||97<=i&&i<=102))return!1;r=!0}return r&&"_"!==e}if("o"===e){for(n++;n<a;n++)if("_"!==(e=t[n])){if(!y(t.charCodeAt(n)))return!1;r=!0}return r&&"_"!==e}}if("_"===e)return!1;for(;n<a;n++)if("_"!==(e=t[n])){if(!A(t.charCodeAt(n)))return!1;r=!0}return!(!r||"_"===e)},construct:function(t){var e,i=t,a=1;if(-1!==i.indexOf("_")&&(i=i.replace(/_/g,"")),"-"!==(e=i[0])&&"+"!==e||("-"===e&&(a=-1),e=(i=i.slice(1))[0]),"0"===i)return 0;if("0"===e){if("b"===i[1])return a*parseInt(i.slice(2),2);if("x"===i[1])return a*parseInt(i.slice(2),16);if("o"===i[1])return a*parseInt(i.slice(2),8)}return a*parseInt(i,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!i.isNegativeZero(t)},represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),w=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),b=/^[-+]?[0-9]+e/,F=new c("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(t){return null!==t&&!(!w.test(t)||"_"===t[t.length-1])},construct:function(t){var e,i;return i="-"===(e=t.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),".inf"===e?1===i?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===e?NaN:i*parseFloat(e,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||i.isNegativeZero(t))},represent:function(t,e){var a;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(i.isNegativeZero(t))return"-0.0";return a=t.toString(10),b.test(a)?a.replace("e",".e"):a},defaultStyle:"lowercase"}),M=R.extend({implicit:[v,L,C,F]}),T=M,k=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),D=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),I=new c("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(t){return null!==t&&(null!==k.exec(t)||null!==D.exec(t))},construct:function(t){var e,i,a,n,r,s,o,l,h=0,d=null;if(null===(e=k.exec(t))&&(e=D.exec(t)),null===e)throw new Error("Date resolve error");if(i=+e[1],a=+e[2]-1,n=+e[3],!e[4])return new Date(Date.UTC(i,a,n));if(r=+e[4],s=+e[5],o=+e[6],e[7]){for(h=e[7].slice(0,3);h.length<3;)h+="0";h=+h}return e[9]&&(d=6e4*(60*+e[10]+ +(e[11]||0)),"-"===e[9]&&(d=-d)),l=new Date(Date.UTC(i,a,n,r,s,o,h)),d&&l.setTime(l.getTime()-d),l},instanceOf:Date,represent:function(t){return t.toISOString()}}),S=new c("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(t){return"<<"===t||null===t}}),H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",O=new c("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,i,a=0,n=t.length,r=H;for(i=0;i<n;i++)if(!((e=r.indexOf(t.charAt(i)))>64)){if(e<0)return!1;a+=6}return a%8==0},construct:function(t){var e,i,a=t.replace(/[\r\n=]/g,""),n=a.length,r=H,s=0,o=[];for(e=0;e<n;e++)e%4==0&&e&&(o.push(s>>16&255),o.push(s>>8&255),o.push(255&s)),s=s<<6|r.indexOf(a.charAt(e));return 0==(i=n%4*6)?(o.push(s>>16&255),o.push(s>>8&255),o.push(255&s)):18===i?(o.push(s>>10&255),o.push(s>>2&255)):12===i&&o.push(s>>4&255),new Uint8Array(o)},predicate:function(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)},represent:function(t){var e,i,a="",n=0,r=t.length,s=H;for(e=0;e<r;e++)e%3==0&&e&&(a+=s[n>>18&63],a+=s[n>>12&63],a+=s[n>>6&63],a+=s[63&n]),n=(n<<8)+t[e];return 0==(i=r%3)?(a+=s[n>>18&63],a+=s[n>>12&63],a+=s[n>>6&63],a+=s[63&n]):2===i?(a+=s[n>>10&63],a+=s[n>>4&63],a+=s[n<<2&63],a+=s[64]):1===i&&(a+=s[n>>2&63],a+=s[n<<4&63],a+=s[64],a+=s[64]),a}}),E=Object.prototype.hasOwnProperty,_=Object.prototype.toString,N=new c("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,i,a,n,r,s=[],o=t;for(e=0,i=o.length;e<i;e+=1){if(a=o[e],r=!1,"[object Object]"!==_.call(a))return!1;for(n in a)if(E.call(a,n)){if(r)return!1;r=!0}if(!r)return!1;if(-1!==s.indexOf(n))return!1;s.push(n)}return!0},construct:function(t){return null!==t?t:[]}}),j=Object.prototype.toString,z=new c("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,i,a,n,r,s=t;for(r=new Array(s.length),e=0,i=s.length;e<i;e+=1){if(a=s[e],"[object Object]"!==j.call(a))return!1;if(1!==(n=Object.keys(a)).length)return!1;r[e]=[n[0],a[n[0]]]}return!0},construct:function(t){if(null===t)return[];var e,i,a,n,r,s=t;for(r=new Array(s.length),e=0,i=s.length;e<i;e+=1)a=s[e],n=Object.keys(a),r[e]=[n[0],a[n[0]]];return r}}),W=Object.prototype.hasOwnProperty,P=new c("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(t){if(null===t)return!0;var e,i=t;for(e in i)if(W.call(i,e)&&null!==i[e])return!1;return!0},construct:function(t){return null!==t?t:{}}}),Y=T.extend({implicit:[I,S],explicit:[O,N,z,P]}),B=Object.prototype.hasOwnProperty,V=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,U=/[\x85\u2028\u2029]/,G=/[,\[\]\{\}]/,X=/^(?:!|!!|![a-z\-]+!)$/i,q=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function K(t){return Object.prototype.toString.call(t)}function $(t){return 10===t||13===t}function Z(t){return 9===t||32===t}function J(t){return 9===t||32===t||10===t||13===t}function Q(t){return 44===t||91===t||93===t||123===t||125===t}function tt(t){var e;return 48<=t&&t<=57?t-48:97<=(e=32|t)&&e<=102?e-97+10:-1}function et(t){return 48===t?"\0":97===t?"":98===t?"\b":116===t||9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"Â…":95===t?" ":76===t?"\u2028":80===t?"\u2029":""}function it(t){return t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}for(var at=new Array(256),nt=new Array(256),rt=0;rt<256;rt++)at[rt]=et(rt)?1:0,nt[rt]=et(rt);function st(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Y,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function ot(t,e){var i={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return i.snippet=l(i),new r(e,i)}function lt(t,e){throw ot(t,e)}function ht(t,e){t.onWarning&&t.onWarning.call(null,ot(t,e))}var dt={YAML:function(t,e,i){var a,n,r;null!==t.version&&lt(t,"duplication of %YAML directive"),1!==i.length&&lt(t,"YAML directive accepts exactly one argument"),null===(a=/^([0-9]+)\.([0-9]+)$/.exec(i[0]))&&lt(t,"ill-formed argument of the YAML directive"),n=parseInt(a[1],10),r=parseInt(a[2],10),1!==n&&lt(t,"unacceptable YAML version of the document"),t.version=i[0],t.checkLineBreaks=r<2,1!==r&&2!==r&&ht(t,"unsupported YAML version of the document")},TAG:function(t,e,i){var a,n;2!==i.length&&lt(t,"TAG directive accepts exactly two arguments"),a=i[0],n=i[1],X.test(a)||lt(t,"ill-formed tag handle (first argument) of the TAG directive"),B.call(t.tagMap,a)&&lt(t,'there is a previously declared suffix for "'+a+'" tag handle'),q.test(n)||lt(t,"ill-formed tag prefix (second argument) of the TAG directive");try{n=decodeURIComponent(n)}catch(e){lt(t,"tag prefix is malformed: "+n)}t.tagMap[a]=n}};function ct(t,e,i,a){var n,r,s,o;if(e<i){if(o=t.input.slice(e,i),a)for(n=0,r=o.length;n<r;n+=1)9===(s=o.charCodeAt(n))||32<=s&&s<=1114111||lt(t,"expected valid JSON character");else V.test(o)&&lt(t,"the stream contains non-printable characters");t.result+=o}}function pt(t,e,a,n){var r,s,o,l;for(i.isObject(a)||lt(t,"cannot merge mappings; the provided source object is unacceptable"),o=0,l=(r=Object.keys(a)).length;o<l;o+=1)s=r[o],B.call(e,s)||(e[s]=a[s],n[s]=!0)}function ut(t,e,i,a,n,r,s,o,l){var h,d;if(Array.isArray(n))for(h=0,d=(n=Array.prototype.slice.call(n)).length;h<d;h+=1)Array.isArray(n[h])&&lt(t,"nested arrays are not supported inside keys"),"object"==typeof n&&"[object Object]"===K(n[h])&&(n[h]="[object Object]");if("object"==typeof n&&"[object Object]"===K(n)&&(n="[object Object]"),n=String(n),null===e&&(e={}),"tag:yaml.org,2002:merge"===a)if(Array.isArray(r))for(h=0,d=r.length;h<d;h+=1)pt(t,e,r[h],i);else pt(t,e,r,i);else t.json||B.call(i,n)||!B.call(e,n)||(t.line=s||t.line,t.lineStart=o||t.lineStart,t.position=l||t.position,lt(t,"duplicated mapping key")),"__proto__"===n?Object.defineProperty(e,n,{configurable:!0,enumerable:!0,writable:!0,value:r}):e[n]=r,delete i[n];return e}function gt(t){var e;10===(e=t.input.charCodeAt(t.position))?t.position++:13===e?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):lt(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function ft(t,e,i){for(var a=0,n=t.input.charCodeAt(t.position);0!==n;){for(;Z(n);)9===n&&-1===t.firstTabInLine&&(t.firstTabInLine=t.position),n=t.input.charCodeAt(++t.position);if(e&&35===n)do{n=t.input.charCodeAt(++t.position)}while(10!==n&&13!==n&&0!==n);if(!$(n))break;for(gt(t),n=t.input.charCodeAt(t.position),a++,t.lineIndent=0;32===n;)t.lineIndent++,n=t.input.charCodeAt(++t.position)}return-1!==i&&0!==a&&t.lineIndent<i&&ht(t,"deficient indentation"),a}function mt(t){var e,i=t.position;return!(45!==(e=t.input.charCodeAt(i))&&46!==e||e!==t.input.charCodeAt(i+1)||e!==t.input.charCodeAt(i+2)||(i+=3,0!==(e=t.input.charCodeAt(i))&&!J(e)))}function xt(t,e){1===e?t.result+=" ":e>1&&(t.result+=i.repeat("\n",e-1))}function Rt(t,e){var i,a,n=t.tag,r=t.anchor,s=[],o=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=s),a=t.input.charCodeAt(t.position);0!==a&&(-1!==t.firstTabInLine&&(t.position=t.firstTabInLine,lt(t,"tab characters must not be used in indentation")),45===a)&&J(t.input.charCodeAt(t.position+1));)if(o=!0,t.position++,ft(t,!0,-1)&&t.lineIndent<=e)s.push(null),a=t.input.charCodeAt(t.position);else if(i=t.line,yt(t,e,3,!1,!0),s.push(t.result),ft(t,!0,-1),a=t.input.charCodeAt(t.position),(t.line===i||t.lineIndent>e)&&0!==a)lt(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!o&&(t.tag=n,t.anchor=r,t.kind="sequence",t.result=s,!0)}function vt(t){var e,i,a,n,r=!1,s=!1;if(33!==(n=t.input.charCodeAt(t.position)))return!1;if(null!==t.tag&&lt(t,"duplication of a tag property"),60===(n=t.input.charCodeAt(++t.position))?(r=!0,n=t.input.charCodeAt(++t.position)):33===n?(s=!0,i="!!",n=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do{n=t.input.charCodeAt(++t.position)}while(0!==n&&62!==n);t.position<t.length?(a=t.input.slice(e,t.position),n=t.input.charCodeAt(++t.position)):lt(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==n&&!J(n);)33===n&&(s?lt(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),X.test(i)||lt(t,"named tag handle cannot contain such characters"),s=!0,e=t.position+1)),n=t.input.charCodeAt(++t.position);a=t.input.slice(e,t.position),G.test(a)&&lt(t,"tag suffix cannot contain flow indicator characters")}a&&!q.test(a)&&lt(t,"tag name cannot contain such characters: "+a);try{a=decodeURIComponent(a)}catch(e){lt(t,"tag name is malformed: "+a)}return r?t.tag=a:B.call(t.tagMap,i)?t.tag=t.tagMap[i]+a:"!"===i?t.tag="!"+a:"!!"===i?t.tag="tag:yaml.org,2002:"+a:lt(t,'undeclared tag handle "'+i+'"'),!0}function Lt(t){var e,i;if(38!==(i=t.input.charCodeAt(t.position)))return!1;for(null!==t.anchor&&lt(t,"duplication of an anchor property"),i=t.input.charCodeAt(++t.position),e=t.position;0!==i&&!J(i)&&!Q(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&lt(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function yt(t,e,a,n,r){var s,o,l,h,d,c,p,u,g,f=1,m=!1,x=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=o=l=4===a||3===a,n&&ft(t,!0,-1)&&(m=!0,t.lineIndent>e?f=1:t.lineIndent===e?f=0:t.lineIndent<e&&(f=-1)),1===f)for(;vt(t)||Lt(t);)ft(t,!0,-1)?(m=!0,l=s,t.lineIndent>e?f=1:t.lineIndent===e?f=0:t.lineIndent<e&&(f=-1)):l=!1;if(l&&(l=m||r),1!==f&&4!==a||(u=1===a||2===a?e:e+1,g=t.position-t.lineStart,1===f?l&&(Rt(t,g)||function(t,e,i){var a,n,r,s,o,l,h,d=t.tag,c=t.anchor,p={},u=Object.create(null),g=null,f=null,m=null,x=!1,R=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=p),h=t.input.charCodeAt(t.position);0!==h;){if(x||-1===t.firstTabInLine||(t.position=t.firstTabInLine,lt(t,"tab characters must not be used in indentation")),a=t.input.charCodeAt(t.position+1),r=t.line,63!==h&&58!==h||!J(a)){if(s=t.line,o=t.lineStart,l=t.position,!yt(t,i,2,!1,!0))break;if(t.line===r){for(h=t.input.charCodeAt(t.position);Z(h);)h=t.input.charCodeAt(++t.position);if(58===h)J(h=t.input.charCodeAt(++t.position))||lt(t,"a whitespace character is expected after the key-value separator within a block mapping"),x&&(ut(t,p,u,g,f,null,s,o,l),g=f=m=null),R=!0,x=!1,n=!1,g=t.tag,f=t.result;else{if(!R)return t.tag=d,t.anchor=c,!0;lt(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!R)return t.tag=d,t.anchor=c,!0;lt(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===h?(x&&(ut(t,p,u,g,f,null,s,o,l),g=f=m=null),R=!0,x=!0,n=!0):x?(x=!1,n=!0):lt(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,h=a;if((t.line===r||t.lineIndent>e)&&(x&&(s=t.line,o=t.lineStart,l=t.position),yt(t,e,4,!0,n)&&(x?f=t.result:m=t.result),x||(ut(t,p,u,g,f,m,s,o,l),g=f=m=null),ft(t,!0,-1),h=t.input.charCodeAt(t.position)),(t.line===r||t.lineIndent>e)&&0!==h)lt(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return x&&ut(t,p,u,g,f,null,s,o,l),R&&(t.tag=d,t.anchor=c,t.kind="mapping",t.result=p),R}(t,g,u))||function(t,e){var i,a,n,r,s,o,l,h,d,c,p,u,g=!0,f=t.tag,m=t.anchor,x=Object.create(null);if(91===(u=t.input.charCodeAt(t.position)))s=93,h=!1,r=[];else{if(123!==u)return!1;s=125,h=!0,r={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=r),u=t.input.charCodeAt(++t.position);0!==u;){if(ft(t,!0,e),(u=t.input.charCodeAt(t.position))===s)return t.position++,t.tag=f,t.anchor=m,t.kind=h?"mapping":"sequence",t.result=r,!0;g?44===u&&lt(t,"expected the node content, but found ','"):lt(t,"missed comma between flow collection entries"),p=null,o=l=!1,63===u&&J(t.input.charCodeAt(t.position+1))&&(o=l=!0,t.position++,ft(t,!0,e)),i=t.line,a=t.lineStart,n=t.position,yt(t,e,1,!1,!0),c=t.tag,d=t.result,ft(t,!0,e),u=t.input.charCodeAt(t.position),!l&&t.line!==i||58!==u||(o=!0,u=t.input.charCodeAt(++t.position),ft(t,!0,e),yt(t,e,1,!1,!0),p=t.result),h?ut(t,r,x,c,d,p,i,a,n):o?r.push(ut(t,null,x,c,d,p,i,a,n)):r.push(d),ft(t,!0,e),44===(u=t.input.charCodeAt(t.position))?(g=!0,u=t.input.charCodeAt(++t.position)):g=!1}lt(t,"unexpected end of the stream within a flow collection")}(t,u)?x=!0:(o&&function(t,e){var a,n,r,s,o,l=1,h=!1,d=!1,c=e,p=0,u=!1;if(124===(s=t.input.charCodeAt(t.position)))n=!1;else{if(62!==s)return!1;n=!0}for(t.kind="scalar",t.result="";0!==s;)if(43===(s=t.input.charCodeAt(++t.position))||45===s)1===l?l=43===s?3:2:lt(t,"repeat of a chomping mode identifier");else{if(!((r=48<=(o=s)&&o<=57?o-48:-1)>=0))break;0===r?lt(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):d?lt(t,"repeat of an indentation width identifier"):(c=e+r-1,d=!0)}if(Z(s)){do{s=t.input.charCodeAt(++t.position)}while(Z(s));if(35===s)do{s=t.input.charCodeAt(++t.position)}while(!$(s)&&0!==s)}for(;0!==s;){for(gt(t),t.lineIndent=0,s=t.input.charCodeAt(t.position);(!d||t.lineIndent<c)&&32===s;)t.lineIndent++,s=t.input.charCodeAt(++t.position);if(!d&&t.lineIndent>c&&(c=t.lineIndent),$(s))p++;else{if(t.lineIndent<c){3===l?t.result+=i.repeat("\n",h?1+p:p):1===l&&h&&(t.result+="\n");break}for(n?Z(s)?(u=!0,t.result+=i.repeat("\n",h?1+p:p)):u?(u=!1,t.result+=i.repeat("\n",p+1)):0===p?h&&(t.result+=" "):t.result+=i.repeat("\n",p):t.result+=i.repeat("\n",h?1+p:p),h=!0,d=!0,p=0,a=t.position;!$(s)&&0!==s;)s=t.input.charCodeAt(++t.position);ct(t,a,t.position,!1)}}return!0}(t,u)||function(t,e){var i,a,n;if(39!==(i=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,a=n=t.position;0!==(i=t.input.charCodeAt(t.position));)if(39===i){if(ct(t,a,t.position,!0),39!==(i=t.input.charCodeAt(++t.position)))return!0;a=t.position,t.position++,n=t.position}else $(i)?(ct(t,a,n,!0),xt(t,ft(t,!1,e)),a=n=t.position):t.position===t.lineStart&&mt(t)?lt(t,"unexpected end of the document within a single quoted scalar"):(t.position++,n=t.position);lt(t,"unexpected end of the stream within a single quoted scalar")}(t,u)||function(t,e){var i,a,n,r,s,o,l;if(34!==(o=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,i=a=t.position;0!==(o=t.input.charCodeAt(t.position));){if(34===o)return ct(t,i,t.position,!0),t.position++,!0;if(92===o){if(ct(t,i,t.position,!0),$(o=t.input.charCodeAt(++t.position)))ft(t,!1,e);else if(o<256&&at[o])t.result+=nt[o],t.position++;else if((s=120===(l=o)?2:117===l?4:85===l?8:0)>0){for(n=s,r=0;n>0;n--)(s=tt(o=t.input.charCodeAt(++t.position)))>=0?r=(r<<4)+s:lt(t,"expected hexadecimal character");t.result+=it(r),t.position++}else lt(t,"unknown escape sequence");i=a=t.position}else $(o)?(ct(t,i,a,!0),xt(t,ft(t,!1,e)),i=a=t.position):t.position===t.lineStart&&mt(t)?lt(t,"unexpected end of the document within a double quoted scalar"):(t.position++,a=t.position)}lt(t,"unexpected end of the stream within a double quoted scalar")}(t,u)?x=!0:function(t){var e,i,a;if(42!==(a=t.input.charCodeAt(t.position)))return!1;for(a=t.input.charCodeAt(++t.position),e=t.position;0!==a&&!J(a)&&!Q(a);)a=t.input.charCodeAt(++t.position);return t.position===e&&lt(t,"name of an alias node must contain at least one character"),i=t.input.slice(e,t.position),B.call(t.anchorMap,i)||lt(t,'unidentified alias "'+i+'"'),t.result=t.anchorMap[i],ft(t,!0,-1),!0}(t)?(x=!0,null===t.tag&&null===t.anchor||lt(t,"alias node should not have any properties")):function(t,e,i){var a,n,r,s,o,l,h,d,c=t.kind,p=t.result;if(J(d=t.input.charCodeAt(t.position))||Q(d)||35===d||38===d||42===d||33===d||124===d||62===d||39===d||34===d||37===d||64===d||96===d)return!1;if((63===d||45===d)&&(J(a=t.input.charCodeAt(t.position+1))||i&&Q(a)))return!1;for(t.kind="scalar",t.result="",n=r=t.position,s=!1;0!==d;){if(58===d){if(J(a=t.input.charCodeAt(t.position+1))||i&&Q(a))break}else if(35===d){if(J(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&mt(t)||i&&Q(d))break;if($(d)){if(o=t.line,l=t.lineStart,h=t.lineIndent,ft(t,!1,-1),t.lineIndent>=e){s=!0,d=t.input.charCodeAt(t.position);continue}t.position=r,t.line=o,t.lineStart=l,t.lineIndent=h;break}}s&&(ct(t,n,r,!1),xt(t,t.line-o),n=r=t.position,s=!1),Z(d)||(r=t.position+1),d=t.input.charCodeAt(++t.position)}return ct(t,n,r,!1),!!t.result||(t.kind=c,t.result=p,!1)}(t,u,1===a)&&(x=!0,null===t.tag&&(t.tag="?")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===f&&(x=l&&Rt(t,g))),null===t.tag)null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);else if("?"===t.tag){for(null!==t.result&&"scalar"!==t.kind&&lt(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),h=0,d=t.implicitTypes.length;h<d;h+=1)if((p=t.implicitTypes[h]).resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else if("!"!==t.tag){if(B.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,h=0,d=(c=t.typeMap.multi[t.kind||"fallback"]).length;h<d;h+=1)if(t.tag.slice(0,c[h].tag.length)===c[h].tag){p=c[h];break}p||lt(t,"unknown tag !<"+t.tag+">"),null!==t.result&&p.kind!==t.kind&&lt(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):lt(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||x}function At(t){var e,i,a,n,r=t.position,s=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);0!==(n=t.input.charCodeAt(t.position))&&(ft(t,!0,-1),n=t.input.charCodeAt(t.position),!(t.lineIndent>0||37!==n));){for(s=!0,n=t.input.charCodeAt(++t.position),e=t.position;0!==n&&!J(n);)n=t.input.charCodeAt(++t.position);for(a=[],(i=t.input.slice(e,t.position)).length<1&&lt(t,"directive name must not be less than one character in length");0!==n;){for(;Z(n);)n=t.input.charCodeAt(++t.position);if(35===n){do{n=t.input.charCodeAt(++t.position)}while(0!==n&&!$(n));break}if($(n))break;for(e=t.position;0!==n&&!J(n);)n=t.input.charCodeAt(++t.position);a.push(t.input.slice(e,t.position))}0!==n&&gt(t),B.call(dt,i)?dt[i](t,i,a):ht(t,'unknown document directive "'+i+'"')}ft(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,ft(t,!0,-1)):s&&lt(t,"directives end mark is expected"),yt(t,t.lineIndent-1,4,!1,!0),ft(t,!0,-1),t.checkLineBreaks&&U.test(t.input.slice(r,t.position))&&ht(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&mt(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,ft(t,!0,-1)):t.position<t.length-1&&lt(t,"end of the stream or a document separator is expected")}function Ct(t,e){e=e||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var i=new st(t,e),a=t.indexOf("\0");for(-1!==a&&(i.position=a,lt(i,"null byte is not allowed in input")),i.input+="\0";32===i.input.charCodeAt(i.position);)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)At(i);return i.documents}var wt=function(t,e,i){null!==e&&"object"==typeof e&&void 0===i&&(i=e,e=null);var a=Ct(t,i);if("function"!=typeof e)return a;for(var n=0,r=a.length;n<r;n+=1)e(a[n])},bt=function(t,e){var i=Ct(t,e);if(0!==i.length){if(1===i.length)return i[0];throw new r("expected a single document in the stream, but found more")}},Ft=Object.prototype.toString,Mt=Object.prototype.hasOwnProperty,Tt=65279,kt={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},Dt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],It=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function St(t){var e,a,n;if(e=t.toString(16).toUpperCase(),t<=255)a="x",n=2;else if(t<=65535)a="u",n=4;else{if(!(t<=4294967295))throw new r("code point within a string may not be greater than 0xFFFFFFFF");a="U",n=8}return"\\"+a+i.repeat("0",n-e.length)+e}function Ht(t){this.schema=t.schema||Y,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=i.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=function(t,e){var i,a,n,r,s,o,l;if(null===e)return{};for(i={},n=0,r=(a=Object.keys(e)).length;n<r;n+=1)s=a[n],o=String(e[s]),"!!"===s.slice(0,2)&&(s="tag:yaml.org,2002:"+s.slice(2)),(l=t.compiledTypeMap.fallback[s])&&Mt.call(l.styleAliases,o)&&(o=l.styleAliases[o]),i[s]=o;return i}(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType='"'===t.quotingType?2:1,this.forceQuotes=t.forceQuotes||!1,this.replacer="function"==typeof t.replacer?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Ot(t,e){for(var a,n=i.repeat(" ",e),r=0,s=-1,o="",l=t.length;r<l;)-1===(s=t.indexOf("\n",r))?(a=t.slice(r),r=l):(a=t.slice(r,s+1),r=s+1),a.length&&"\n"!==a&&(o+=n),o+=a;return o}function Et(t,e){return"\n"+i.repeat(" ",t.indent*e)}function _t(t){return 32===t||9===t}function Nt(t){return 32<=t&&t<=126||161<=t&&t<=55295&&8232!==t&&8233!==t||57344<=t&&t<=65533&&t!==Tt||65536<=t&&t<=1114111}function jt(t){return Nt(t)&&t!==Tt&&13!==t&&10!==t}function zt(t,e,i){var a=jt(t),n=a&&!_t(t);return(i?a:a&&44!==t&&91!==t&&93!==t&&123!==t&&125!==t)&&35!==t&&!(58===e&&!n)||jt(e)&&!_t(e)&&35===t||58===e&&n}function Wt(t,e){var i,a=t.charCodeAt(e);return a>=55296&&a<=56319&&e+1<t.length&&(i=t.charCodeAt(e+1))>=56320&&i<=57343?1024*(a-55296)+i-56320+65536:a}function Pt(t){return/^\n* /.test(t)}function Yt(t,e,i,a,n){t.dump=function(){if(0===e.length)return 2===t.quotingType?'""':"''";if(!t.noCompatMode&&(-1!==Dt.indexOf(e)||It.test(e)))return 2===t.quotingType?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,i),o=-1===t.lineWidth?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),l=a||t.flowLevel>-1&&i>=t.flowLevel;switch(function(t,e,i,a,n,r,s,o){var l,h,d=0,c=null,p=!1,u=!1,g=-1!==a,f=-1,m=Nt(h=Wt(t,0))&&h!==Tt&&!_t(h)&&45!==h&&63!==h&&58!==h&&44!==h&&91!==h&&93!==h&&123!==h&&125!==h&&35!==h&&38!==h&&42!==h&&33!==h&&124!==h&&61!==h&&62!==h&&39!==h&&34!==h&&37!==h&&64!==h&&96!==h&&function(t){return!_t(t)&&58!==t}(Wt(t,t.length-1));if(e||s)for(l=0;l<t.length;d>=65536?l+=2:l++){if(!Nt(d=Wt(t,l)))return 5;m=m&&zt(d,c,o),c=d}else{for(l=0;l<t.length;d>=65536?l+=2:l++){if(10===(d=Wt(t,l)))p=!0,g&&(u=u||l-f-1>a&&" "!==t[f+1],f=l);else if(!Nt(d))return 5;m=m&&zt(d,c,o),c=d}u=u||g&&l-f-1>a&&" "!==t[f+1]}return p||u?i>9&&Pt(t)?5:s?2===r?5:2:u?4:3:!m||s||n(t)?2===r?5:2:1}(e,l,t.indent,o,(function(e){return function(t,e){var i,a;for(i=0,a=t.implicitTypes.length;i<a;i+=1)if(t.implicitTypes[i].resolve(e))return!0;return!1}(t,e)}),t.quotingType,t.forceQuotes&&!a,n)){case 1:return e;case 2:return"'"+e.replace(/'/g,"''")+"'";case 3:return"|"+Bt(e,t.indent)+Vt(Ot(e,s));case 4:return">"+Bt(e,t.indent)+Vt(Ot(function(t,e){for(var i,a,n,r=/(\n+)([^\n]*)/g,s=(n=-1!==(n=t.indexOf("\n"))?n:t.length,r.lastIndex=n,Ut(t.slice(0,n),e)),o="\n"===t[0]||" "===t[0];a=r.exec(t);){var l=a[1],h=a[2];i=" "===h[0],s+=l+(o||i||""===h?"":"\n")+Ut(h,e),o=i}return s}(e,o),s));case 5:return'"'+function(t){for(var e,i="",a=0,n=0;n<t.length;a>=65536?n+=2:n++)a=Wt(t,n),!(e=kt[a])&&Nt(a)?(i+=t[n],a>=65536&&(i+=t[n+1])):i+=e||St(a);return i}(e)+'"';default:throw new r("impossible error: invalid scalar style")}}()}function Bt(t,e){var i=Pt(t)?String(e):"",a="\n"===t[t.length-1];return i+(!a||"\n"!==t[t.length-2]&&"\n"!==t?a?"":"-":"+")+"\n"}function Vt(t){return"\n"===t[t.length-1]?t.slice(0,-1):t}function Ut(t,e){if(""===t||" "===t[0])return t;for(var i,a,n=/ [^ ]/g,r=0,s=0,o=0,l="";i=n.exec(t);)(o=i.index)-r>e&&(a=s>r?s:o,l+="\n"+t.slice(r,a),r=a+1),s=o;return l+="\n",t.length-r>e&&s>r?l+=t.slice(r,s)+"\n"+t.slice(s+1):l+=t.slice(r),l.slice(1)}function Gt(t,e,i,a){var n,r,s,o="",l=t.tag;for(n=0,r=i.length;n<r;n+=1)s=i[n],t.replacer&&(s=t.replacer.call(i,String(n),s)),(qt(t,e+1,s,!0,!0,!1,!0)||void 0===s&&qt(t,e+1,null,!0,!0,!1,!0))&&(a&&""===o||(o+=Et(t,e)),t.dump&&10===t.dump.charCodeAt(0)?o+="-":o+="- ",o+=t.dump);t.tag=l,t.dump=o||"[]"}function Xt(t,e,i){var a,n,s,o,l,h;for(s=0,o=(n=i?t.explicitTypes:t.implicitTypes).length;s<o;s+=1)if(((l=n[s]).instanceOf||l.predicate)&&(!l.instanceOf||"object"==typeof e&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(i?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(h=t.styleMap[l.tag]||l.defaultStyle,"[object Function]"===Ft.call(l.represent))a=l.represent(e,h);else{if(!Mt.call(l.represent,h))throw new r("!<"+l.tag+'> tag resolver accepts not "'+h+'" style');a=l.represent[h](e,h)}t.dump=a}return!0}return!1}function qt(t,e,i,a,n,s,o){t.tag=null,t.dump=i,Xt(t,i,!1)||Xt(t,i,!0);var l,h=Ft.call(t.dump),d=a;a&&(a=t.flowLevel<0||t.flowLevel>e);var c,p,u="[object Object]"===h||"[object Array]"===h;if(u&&(p=-1!==(c=t.duplicates.indexOf(i))),(null!==t.tag&&"?"!==t.tag||p||2!==t.indent&&e>0)&&(n=!1),p&&t.usedDuplicates[c])t.dump="*ref_"+c;else{if(u&&p&&!t.usedDuplicates[c]&&(t.usedDuplicates[c]=!0),"[object Object]"===h)a&&0!==Object.keys(t.dump).length?(function(t,e,i,a){var n,s,o,l,h,d,c="",p=t.tag,u=Object.keys(i);if(!0===t.sortKeys)u.sort();else if("function"==typeof t.sortKeys)u.sort(t.sortKeys);else if(t.sortKeys)throw new r("sortKeys must be a boolean or a function");for(n=0,s=u.length;n<s;n+=1)d="",a&&""===c||(d+=Et(t,e)),l=i[o=u[n]],t.replacer&&(l=t.replacer.call(i,o,l)),qt(t,e+1,o,!0,!0,!0)&&((h=null!==t.tag&&"?"!==t.tag||t.dump&&t.dump.length>1024)&&(t.dump&&10===t.dump.charCodeAt(0)?d+="?":d+="? "),d+=t.dump,h&&(d+=Et(t,e)),qt(t,e+1,l,!0,h)&&(t.dump&&10===t.dump.charCodeAt(0)?d+=":":d+=": ",c+=d+=t.dump));t.tag=p,t.dump=c||"{}"}(t,e,t.dump,n),p&&(t.dump="&ref_"+c+t.dump)):(function(t,e,i){var a,n,r,s,o,l="",h=t.tag,d=Object.keys(i);for(a=0,n=d.length;a<n;a+=1)o="",""!==l&&(o+=", "),t.condenseFlow&&(o+='"'),s=i[r=d[a]],t.replacer&&(s=t.replacer.call(i,r,s)),qt(t,e,r,!1,!1)&&(t.dump.length>1024&&(o+="? "),o+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),qt(t,e,s,!1,!1)&&(l+=o+=t.dump));t.tag=h,t.dump="{"+l+"}"}(t,e,t.dump),p&&(t.dump="&ref_"+c+" "+t.dump));else if("[object Array]"===h)a&&0!==t.dump.length?(t.noArrayIndent&&!o&&e>0?Gt(t,e-1,t.dump,n):Gt(t,e,t.dump,n),p&&(t.dump="&ref_"+c+t.dump)):(function(t,e,i){var a,n,r,s="",o=t.tag;for(a=0,n=i.length;a<n;a+=1)r=i[a],t.replacer&&(r=t.replacer.call(i,String(a),r)),(qt(t,e,r,!1,!1)||void 0===r&&qt(t,e,null,!1,!1))&&(""!==s&&(s+=","+(t.condenseFlow?"":" ")),s+=t.dump);t.tag=o,t.dump="["+s+"]"}(t,e,t.dump),p&&(t.dump="&ref_"+c+" "+t.dump));else{if("[object String]"!==h){if("[object Undefined]"===h)return!1;if(t.skipInvalid)return!1;throw new r("unacceptable kind of an object to dump "+h)}"?"!==t.tag&&Yt(t,t.dump,e,s,d)}null!==t.tag&&"?"!==t.tag&&(l=encodeURI("!"===t.tag[0]?t.tag.slice(1):t.tag).replace(/!/g,"%21"),l="!"===t.tag[0]?"!"+l:"tag:yaml.org,2002:"===l.slice(0,18)?"!!"+l.slice(18):"!<"+l+">",t.dump=l+" "+t.dump)}return!0}function Kt(t,e){var i,a,n=[],r=[];for($t(t,n,r),i=0,a=r.length;i<a;i+=1)e.duplicates.push(n[r[i]]);e.usedDuplicates=new Array(a)}function $t(t,e,i){var a,n,r;if(null!==t&&"object"==typeof t)if(-1!==(n=e.indexOf(t)))-1===i.indexOf(n)&&i.push(n);else if(e.push(t),Array.isArray(t))for(n=0,r=t.length;n<r;n+=1)$t(t[n],e,i);else for(n=0,r=(a=Object.keys(t)).length;n<r;n+=1)$t(t[a[n]],e,i)}function Zt(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Jt=c,Qt=g,te=R,ee=M,ie=T,ae=Y,ne=bt,re=wt,se=function(t,e){var i=new Ht(e=e||{});i.noRefs||Kt(t,i);var a=t;return i.replacer&&(a=i.replacer.call({"":a},"",a)),qt(i,0,a,!0,!0)?i.dump+"\n":""},oe=r,le={binary:O,float:F,map:x,null:v,pairs:z,set:P,timestamp:I,bool:L,int:C,merge:S,omap:N,seq:m,str:f},he=Zt("safeLoad","load"),de=Zt("safeLoadAll","loadAll"),ce=Zt("safeDump","dump"),pe={Type:Jt,Schema:Qt,FAILSAFE_SCHEMA:te,JSON_SCHEMA:ee,CORE_SCHEMA:ie,DEFAULT_SCHEMA:ae,load:ne,loadAll:re,dump:se,YAMLException:oe,types:le,safeLoad:he,safeLoadAll:de,safeDump:ce};t.CORE_SCHEMA=ie,t.DEFAULT_SCHEMA=ae,t.FAILSAFE_SCHEMA=te,t.JSON_SCHEMA=ee,t.Schema=Qt,t.Type=Jt,t.YAMLException=oe,t.default=pe,t.dump=se,t.load=ne,t.loadAll=re,t.safeDump=ce,t.safeLoad=he,t.safeLoadAll=de,t.types=le,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).jsyaml={});class i{constructor(t,e){this.smallCanvas=new r(t,e);var i=document.getElementById(t),a=i.clientWidth,n=i.clientHeight,s=i.parentElement;i.remove(),this.canvas=document.createElement("canvas"),this.canvas.id=t,this.canvas.className="main-canvas",this.canvas.width=a,this.canvas.height=n,s.appendChild(this.canvas),this.offsetX=25,this.offsetY=25,this.marginTop=10,this.xPosAt=0,this.stepsX=0,this.isTranslateCenter=!1,this.ctx=this.canvas.getContext("2d"),this.shadowLinesInGraphNumber=5,this.shadowLineGap=(this.canvas.height-(this.offsetY+this.marginTop))/this.shadowLinesInGraphNumber,this.xTranslate=0,this.yTranslate=this.canvas.height-this.offsetY,this.titleText=e,this.data=new Array(2),this.subscribeData=new Array(2),this.currentIndexAt=new Array(2),this.startMetersIndex=0,this.endMetersIndex=0,this.lineColorMainData="rgb(72, 109, 232)",this.lineColorComparedData="rgb(197, 83, 5)",this.fillColorMainData="rgba(72, 109, 232, 0.3)",this.fillColorComparedData="rgba(197, 83, 5, 0.3)",this.lineWidth=1,this.boxWidth=38,"Speed"==this.titleText&&(this.boxWidth=54),"Gear"==this.titleText&&(this.boxWidth=22),this.dataMinMax={oldMin:99999,oldMax:-99999,newMin:99999,newMax:-99999},this.yMin=9999,this.yMax=-9999}clear(){this.data=new Array(2),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.closePath(),this.startMetersIndex=0,this.endMetersIndex=0}setLap(t,e){t>=2?console.log("Error: You Cannot Set More Than 2 data Laps!"):(this.data[t]=e,this.startMetersIndex=0,this.endMetersIndex=null!=this.data[0]?this.data[0].length:this.data[1].length)}setSubscribeData(t,e){t>=2?console.log("Error: You Cannot Set More Than 2 data Laps!"):this.subscribeData[t]=e}setMinMaxData(t,e,i,a){this.dataMinMax.oldMin>t&&(this.dataMinMax.oldMin=t),this.dataMinMax.oldMax<e&&(this.dataMinMax.oldMax=e),this.dataMinMax.newMin>i&&(this.dataMinMax.newMin=i),this.dataMinMax.newMax<a&&(this.dataMinMax.newMax=a)}setStartEndIndex(t,e){t=t<0?0:t,this.startMetersIndex=t,this.endMetersIndex=e,this.draw()}setIsTranslateCenter(t){this.isTranslateCenter=t,this.xTranslate=0,this.yTranslate=(this.canvas.height-this.offsetY)/2}getCanvas(){return this.canvas}getCurrentIndexAt(t){return this.currentIndexAt[t]}getOffsetX(){return this.offsetX}getOffsetY(){return this.offsetY}drawTextTitle(){this.ctx.beginPath(),this.ctx.font="bold 20px Arial",this.ctx.fillStyle="rgba(255, 255, 255, 0.5)",this.ctx.textAlign="left",this.ctx.fillText(this.titleText,29,25)}drawBaseLines(){this.ctx.strokeStyle="rgba(255, 255, 255, 0.2)";var t=this.canvas.height-this.offsetY+this.marginTop;this.ctx.beginPath();for(var e=this.marginTop;e<t;e+=this.shadowLineGap)this.ctx.moveTo(this.offsetX,e),this.ctx.lineTo(this.canvas.width,e);this.ctx.stroke(),this.ctx.beginPath(),this.ctx.strokeStyle="rgba(255, 255, 255, 0.8)",this.ctx.moveTo(this.offsetX,this.marginTop),this.ctx.lineTo(this.offsetX,this.canvas.height-this.offsetY),this.ctx.stroke()}drawBaseLinesValues(){this.ctx.fillStyle="rgba(255, 255, 255, 0.8)",this.ctx.textAlign="center",this.ctx.font="bold 10px Arial";var t=this.canvas.height-this.offsetY+this.marginTop;switch(this.titleText){case"Delta":this.ctx.beginPath(),this.ctx.fillText("0.0s",12,2+(this.canvas.height-this.offsetY)/2);break;case"Throttle":case"Brake":for(var e=100,i=e/this.shadowLinesInGraphNumber,a=this.marginTop;a<t;a+=this.shadowLineGap)this.ctx.beginPath(),this.ctx.fillText(Math.round(e),12,a+2),e-=i;break;case"Speed":var n=320;for(i=n/this.shadowLinesInGraphNumber,a=this.marginTop;a<t;a+=this.shadowLineGap)this.ctx.beginPath(),this.ctx.fillText(parseInt(n.toFixed(0)),12,a+2),n-=i;break;case"Gear":var r=this.dataMinMax.oldMax;for(i=r/this.shadowLinesInGraphNumber,a=this.marginTop;a<t;a+=this.shadowLineGap)this.ctx.beginPath(),this.ctx.fillText(Math.floor(r),12,a+2),r-=i;break;case"CFSRideHeight":case"Left front":case"Right front":case"Left rear":case"Right rear":this.ctx.font="bold 8px Arial";var s=this.dataMinMax.oldMax;for(i=s/this.shadowLinesInGraphNumber,a=this.marginTop;a<t;a+=this.shadowLineGap)this.ctx.beginPath(),this.ctx.fillText(s.toFixed(1),12,a+2),s-=i}}drawCircleOnHoveredPoint(t){this.ctx.beginPath(),this.ctx.fillStyle=0==t?this.lineColorMainData:this.lineColorComparedData;var e=this.currentIndexAt[t],i=-(this.canvas.height-(this.offsetY+this.marginTop));this.isTranslateCenter&&(i/=2);var a=0;a="CFSRideHeight"==this.titleText||"Left front"==this.titleText||"Right front"==this.titleText||"Left rear"==this.titleText||"Right rear"==this.titleText||"Gear"==this.titleText?this.data[t][e]/this.dataMinMax.oldMax*i:this.data[t][e]*i,this.ctx.arc(this.xPosAt+this.offsetX,a,4,0,2*Math.PI),this.ctx.fill()}drawBoxData(t){var e=this.currentIndexAt[t];this.ctx.beginPath(),this.ctx.fillStyle=0==t?this.lineColorMainData:this.lineColorComparedData;var i=this.xPosAt+this.offsetX+this.marginTop;i>this.canvas.width/2&&(i-=this.boxWidth+10);var a=-this.canvas.height/2;this.isTranslateCenter&&(a=0),1==t&&(a+=17),this.ctx.fillRect(i,a,this.boxWidth,16),this.ctx.beginPath(),this.ctx.font="12px Arial",this.ctx.fillStyle="rgba(255, 255, 255, 1.0)",this.ctx.textAlign="center";var n=this.extractOriginData(t,e);this.ctx.fillText(n,i+this.boxWidth/2,a+12)}extractOriginData(t,e){switch(this.titleText){case"Delta":return null!=this.data[t][e]?this.data[t][e].toFixed(2)+"s":"0.00s";case"Throttle":case"Brake":return(100*this.data[t][e]).toFixed(0)+"%";case"Gear":return this.data[t][e];case"Speed":return Math.round(320*this.data[t][e])+"km/h";case"CFSRideHeight":case"Left front":case"Right front":case"Left rear":case"Right rear":return this.data[t][e].toFixed(2)+"mm";default:return this.data[t][e].toFixed(3)}}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawBaseLines(),this.drawTextTitle(),this.ctx.save(),this.ctx.translate(this.xTranslate,this.yTranslate),this.isTranslateCenter&&(this.ctx.beginPath(),this.ctx.strokeStyle="rgba(255, 255, 255, 0.8)",this.ctx.moveTo(this.offsetX,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.stroke()),this.ctx.lineWidth=this.lineWidth;for(var t=0,e=0;e<this.data.length;e++)if(null!=this.data[e]&&null!=this.data[e]){this.ctx.strokeStyle=0==e?this.lineColorMainData:this.lineColorComparedData,this.ctx.fillStyle=0==e?this.fillColorMainData:this.fillColorComparedData,this.ctx.beginPath(),t=Math.abs(this.startMetersIndex-this.endMetersIndex),this.stepsX=(this.canvas.width-this.offsetX)/t;var i=this.stepsX,a=0;if("CFSRideHeight"==this.titleText||"Left front"==this.titleText||"Right front"==this.titleText||"Left rear"==this.titleText||"Right rear"==this.titleText||"Gear"==this.titleText)var n=((this.dataMinMax.newMax-this.dataMinMax.newMin)*(this.data[e][o]-this.dataMinMax.oldMin)/(this.dataMinMax.oldMax-this.dataMinMax.oldMin)+this.dataMinMax.newMin)*-(this.canvas.height-(this.offsetY+this.marginTop));else n=this.data[e][this.startMetersIndex]*-(this.canvas.height-(this.offsetY+this.marginTop));var r=0;r=this.isTranslateCenter?-(this.canvas.height-(this.offsetY+this.marginTop))/2:-(this.canvas.height-(this.offsetY+this.marginTop)),this.ctx.moveTo(this.offsetX+a,n);for(var s=0,o=this.startMetersIndex+1;o<this.endMetersIndex;o++)s="CFSRideHeight"==this.titleText||"Left front"==this.titleText||"Right front"==this.titleText||"Left rear"==this.titleText||"Right rear"==this.titleText||"Gear"==this.titleText?this.data[e][o]/this.dataMinMax.oldMax*r:this.data[e][o]*r,this.ctx.lineTo(this.offsetX+i,s),null!=this.subscribeData[e]&&this.subscribeData[e][o]>0&&this.ctx.fillRect(this.offsetX+i,0,this.stepsX,this.subscribeData[e][o]*r),a=i,n=s,i+=this.stepsX;this.ctx.stroke()}for(e=0;e<this.data.length;e++)null!=this.data[e]&&null!=this.data[e]&&(this.currentIndexAt[e]=Math.round(this.xPosAt/(this.canvas.width-this.offsetX)*t)+this.startMetersIndex,this.drawCircleOnHoveredPoint(e),this.drawBoxData(e),this.smallCanvas.isCanvasValid&&(this.smallCanvas.putCurrentData(e,this.data[e][this.currentIndexAt[e]]),null!=this.subscribeData[e]&&this.smallCanvas.putSubsCurrentData(e,this.subscribeData[e][this.currentIndexAt[e]])));this.smallCanvas.isCanvasValid&&this.smallCanvas.draw(),this.ctx.restore(),this.drawBaseLinesValues()}}class a{constructor(t){this.LFtempL=new Float32Array(t),this.LFtempM=new Float32Array(t),this.LFtempR=new Float32Array(t),this.RFtempL=new Float32Array(t),this.RFtempM=new Float32Array(t),this.RFtempR=new Float32Array(t),this.LRtempL=new Float32Array(t),this.LRtempM=new Float32Array(t),this.LRtempR=new Float32Array(t),this.RRtempL=new Float32Array(t),this.RRtempM=new Float32Array(t),this.RRtempR=new Float32Array(t),this.index=0,this.size=0}updateIndex(){this.index+=1,this.size+=1}addLFtempL(t){this.LFtempL[this.index]=t}addLFtempM(t){this.LFtempM[this.index]=t}addLFtempR(t){this.LFtempR[this.index]=t}addRFtempL(t){this.RFtempL[this.index]=t}addRFtempM(t){this.RFtempM[this.index]=t}addRFtempR(t){this.RFtempR[this.index]=t}addLRtempL(t){this.LRtempL[this.index]=t}addLRtempM(t){this.LRtempM[this.index]=t}addLRtempR(t){this.LRtempR[this.index]=t}addRRtempL(t){this.RRtempL[this.index]=t}addRRtempM(t){this.RRtempM[this.index]=t}addRRtempR(t){this.RRtempR[this.index]=t}print(){console.log("----- Left Front -----"),console.log(this.LFtempL),console.log(this.LFtempM),console.log(this.LFtempR),console.log("----- Right Front -----"),console.log(this.RFtempL),console.log(this.RFtempM),console.log(this.RFtempR)}}class n{constructor(t){this.lapNumber=t,this.airTemp=0,this.trackTemp=0,this.windSpeed=0;var e=35e3;this.LapDistPct=new Float32Array(e),this.lapDistMeters=new Float32Array(e),this.lapDistMetersInt=new Uint32Array(e),this.lapCurrentTimeSeconds=new Float32Array(e),this.throttle=new Float32Array(e),this.brake=new Float32Array(e),this.absActive=new Uint8Array(e),this.speedKmh=new Float32Array(e),this.gear=new Int32Array(e),this.minGear=99,this.maxGear=-99,this.steer=new Float32Array(e),this.windDir=new Float32Array(e),this.windVel=new Float32Array(e),this.fuelLevel=new Float32Array(e),this.yawNorth=new Float32Array(e),this.tires=new a(e),this.cFSRrideHeight=new Float32Array(e),this.minCFSRideHeight=9999,this.maxCFSRideHeight=-9999,this.lFRideHeight=new Float32Array(e),this.minLFRideHeight=9999,this.maxLFRideHeight=-9999,this.rFRideHeight=new Float32Array(e),this.minRFRideHeight=9999,this.maxRFRideHeight=-9999,this.lRRideHeight=new Float32Array(e),this.minLRRideHeight=9999,this.maxLRRideHeight=-9999,this.rRRideHeight=new Float32Array(e),this.minRRRideHeight=9999,this.maxRRRideHeight=-9999,this.trackCoordinate=new l(t,e),this.lapTimeStr="",this.index=0,this.size=0,this.dataLapToCompare=null}setDataLapToCompare(t){this.dataLapToCompare=t}runSyncLaps(){if(null==this.dataLapToCompare)return console.log("No data lap to compare!"),this;var t=new Array(2);t[0]=new n(1),t[1]=new n(2);for(var e=0;e<this.size;e++)for(var i=2;i<this.dataLapToCompare.size;){if(this.lapDistMetersInt[e]==this.dataLapToCompare.lapDistMetersInt[i]){var a=this.dataLapToCompare,r=Math.abs(this.lapDistMeters[e]-a.lapDistMeters[i]),s=Math.abs(this.lapDistMeters[e]-a.lapDistMeters[i+1]),o=Math.abs(this.lapDistMeters[e]-a.lapDistMeters[i-1]),l=Math.abs(this.lapDistMeters[e]-a.lapDistMeters[i+2]),h=Math.abs(this.lapDistMeters[e]-a.lapDistMeters[i-2]),d=0;r<=s&&r<=o&&(d=0),s<=r&&s<=o&&(d=1,r=s),o<=r&&o<=s&&(d=-1,r=o),l<=r&&l<=h&&(d=2,r=l),h<=r&&h<=l&&(d=-2,r=h),i+=d;var c=this.lapCurrentTimeSeconds[e]-a.lapCurrentTimeSeconds[i];t[0].addLapCurrentTimeSeconds(c),t[1].addLapCurrentTimeSeconds(0),t[0].addLapDistPct(this.LapDistPct[e]),t[0].addLapDistMeters(this.lapDistMeters[e]),t[0].addLapDistMetersInt(this.lapDistMetersInt[e]),t[0].addThrottle(this.throttle[e]),t[0].addBrake(this.brake[e]),t[0].addAbsActive(this.absActive[e]),t[0].addSpeedKmh(this.speedKmh[e]),t[0].addGear(this.gear[e]),t[0].addSteer(this.steer[e]),t[0].addWindDir(this.windDir[e]),t[0].addWindVel(this.windVel[e]),t[0].addFuelLevel(this.fuelLevel[e]),t[0].addYawNorth(this.yawNorth[e]),t[0].tires.addLFtempL(this.tires.LFtempL[e]),t[0].tires.addLFtempM(this.tires.LFtempM[e]),t[0].tires.addLFtempR(this.tires.LFtempR[e]),t[0].tires.addRFtempL(this.tires.RFtempL[e]),t[0].tires.addRFtempM(this.tires.RFtempM[e]),t[0].tires.addRFtempR(this.tires.RFtempR[e]),t[0].tires.addLRtempL(this.tires.LRtempL[e]),t[0].tires.addLRtempM(this.tires.LRtempM[e]),t[0].tires.addLRtempR(this.tires.LRtempR[e]),t[0].tires.addRRtempL(this.tires.RRtempL[e]),t[0].tires.addRRtempM(this.tires.RRtempM[e]),t[0].tires.addRRtempR(this.tires.RRtempR[e]),t[0].addcFSRrideHeight(this.cFSRrideHeight[e]),t[0].addFrontRideHeight(this.lFRideHeight[e],this.rFRideHeight[e]),t[0].addRearRideHeight(this.lRRideHeight[e],this.rRRideHeight[e]),t[0].trackCoordinate.addLat(this.trackCoordinate.lat[e]),t[0].trackCoordinate.addLon(this.trackCoordinate.lon[e]),t[1].addLapDistPct(a.LapDistPct[i]),t[1].addLapDistMeters(a.lapDistMeters[i]),t[1].addLapDistMetersInt(a.lapDistMetersInt[i]),t[1].addThrottle(a.throttle[i]),t[1].addBrake(a.brake[i]),t[1].addAbsActive(a.absActive[e]),t[1].addSpeedKmh(a.speedKmh[i]),t[1].addGear(a.gear[i]),t[1].addSteer(a.steer[i]),t[1].addWindDir(a.windDir[i]),t[1].addWindVel(a.windVel[i]),t[1].addFuelLevel(a.fuelLevel[i]),t[1].addYawNorth(a.yawNorth[i]),t[1].tires.addLFtempL(a.tires.LFtempL[e]),t[1].tires.addLFtempM(a.tires.LFtempM[e]),t[1].tires.addLFtempR(a.tires.LFtempR[e]),t[1].tires.addRFtempL(a.tires.RFtempL[e]),t[1].tires.addRFtempM(a.tires.RFtempM[e]),t[1].tires.addRFtempR(a.tires.RFtempR[e]),t[1].tires.addLRtempL(a.tires.LRtempL[e]),t[1].tires.addLRtempM(a.tires.LRtempM[e]),t[1].tires.addLRtempR(a.tires.LRtempR[e]),t[1].tires.addRRtempL(a.tires.RRtempL[e]),t[1].tires.addRRtempM(a.tires.RRtempM[e]),t[1].tires.addRRtempR(a.tires.RRtempR[e]),t[1].addcFSRrideHeight(a.cFSRrideHeight[i]),t[1].addFrontRideHeight(a.lFRideHeight[i],a.rFRideHeight[i]),t[1].addRearRideHeight(a.lRRideHeight[i],a.rRRideHeight[i]),t[1].trackCoordinate.addLat(a.trackCoordinate.lat[i]),t[1].trackCoordinate.addLon(a.trackCoordinate.lon[i]),t[0].updateIndex(),t[0].updateSize(),t[0].trackCoordinate.updateIndex(),t[0].trackCoordinate.updateSize(),t[0].tires.updateIndex(),t[1].updateIndex(),t[1].updateSize(),t[1].trackCoordinate.updateIndex(),t[1].trackCoordinate.updateSize(),t[1].tires.updateIndex();break}i++}for(e=0;e<t.length;e++)t[e].optimizeArraySize();return t}getDataLapToCompare(){return this.dataLapToCompare}getLapTimeStr(){return this.lapTimeStr}getAirTemp(){return this.airTemp}getTrackTemp(){return this.trackTemp}getLapDistPctArray(){return this.LapDistPct}getLapCurrentTimeSecondsArray(){return this.lapCurrentTimeSeconds}getLapCurrentTimeSeconds(t){return this.lapCurrentTimeSeconds[t]}getThrottleArray(){return this.throttle}getBrakeArray(){return this.brake}getAbsAcvtiveArray(){return this.absActive}getSpeedKmhArray(){return this.speedKmh}getGearArray(){return this.gear}getSteerArray(){return this.steer}getWindDirArray(){return this.windDir}getWindVelArray(){return this.windVel}getFuelLevelArray(){return this.fuelLevel}getYawNorthArray(){return this.yawNorth}getTires(){return this.tires}getCFSRrideHeightArray(){return this.cFSRrideHeight}getLFRideHeightArray(){return this.lFRideHeight}getRFRideHeightArray(){return this.rFRideHeight}getLRRideHeightArray(){return this.lRRideHeight}getRRRideHeightArray(){return this.rRRideHeight}getLapDistMetersArray(){return this.lapDistMeters}getLapDistMetersIntArray(){return this.lapDistMetersInt}getThrottle(t){return this.throttle[t]}getLapDistMeters(t){return this.lapDistMeters[t]}getLapDistMetersInt(t){return this.lapDistMetersInt[t]}updateIndex(){this.index+=1}updateSize(){this.size+=1}optimizeArraySize(){this.LapDistPct=this.LapDistPct.slice(0,this.size),this.lapDistMeters=this.lapDistMeters.slice(0,this.size),this.lapDistMetersInt=this.lapDistMetersInt.slice(0,this.size),this.lapCurrentTimeSeconds=this.lapCurrentTimeSeconds.slice(0,this.size),this.throttle=this.throttle.slice(0,this.size),this.brake=this.brake.slice(0,this.size),this.absActive=this.absActive.slice(0,this.size),this.speedKmh=this.speedKmh.slice(0,this.size),this.gear=this.gear.slice(0,this.size),this.steer=this.steer.slice(0,this.size),this.windDir=this.windDir.slice(0,this.size),this.windVel=this.windVel.slice(0,this.size),this.fuelLevel=this.fuelLevel.slice(0,this.size),this.yawNorth=this.yawNorth.slice(0,this.size),this.tires.LFtempL=this.tires.LFtempL.slice(0,this.size),this.tires.LFtempM=this.tires.LFtempM.slice(0,this.size),this.tires.LFtempR=this.tires.LFtempR.slice(0,this.size),this.tires.RFtempL=this.tires.RFtempL.slice(0,this.size),this.tires.RFtempM=this.tires.RFtempM.slice(0,this.size),this.tires.RFtempR=this.tires.RFtempR.slice(0,this.size),this.tires.LRtempL=this.tires.LRtempL.slice(0,this.size),this.tires.LRtempM=this.tires.LRtempM.slice(0,this.size),this.tires.LRtempR=this.tires.LRtempR.slice(0,this.size),this.tires.RRtempL=this.tires.RRtempL.slice(0,this.size),this.tires.RRtempM=this.tires.RRtempM.slice(0,this.size),this.tires.RRtempR=this.tires.RRtempR.slice(0,this.size),this.cFSRrideHeight=this.cFSRrideHeight.slice(0,this.size),this.lFRideHeight=this.lFRideHeight.slice(0,this.size),this.rFRideHeight=this.rFRideHeight.slice(0,this.size),this.lRRideHeight=this.lRRideHeight.slice(0,this.size),this.rRRideHeight=this.rRRideHeight.slice(0,this.size),this.trackCoordinate.lat=this.trackCoordinate.lat.slice(0,this.size),this.trackCoordinate.lon=this.trackCoordinate.lon.slice(0,this.size)}setAirTemp(t){this.airTemp=t}setTrackTemp(t){this.trackTemp=t}addLapCurrentTimeSeconds(t){this.lapCurrentTimeSeconds[this.index]=t}addLapDistPct(t){this.LapDistPct[this.index]=t}addLapDistMeters(t){this.lapDistMeters[this.index]=t}addLapDistMetersInt(t){this.lapDistMetersInt[this.index]=t}addThrottle(t){this.throttle[this.index]=t}addBrake(t){this.brake[this.index]=t}addAbsActive(t){this.absActive[this.index]=t}addSpeedKmh(t){this.speedKmh[this.index]=t}addGear(t){this.gear[this.index]=t,t<this.minGear&&(this.minGear=t),t>this.maxGear&&(this.maxGear=t)}addSteer(t){this.steer[this.index]=t}addWindDir(t){this.windDir[this.index]=t}addWindVel(t){this.windVel[this.index]=t}addFuelLevel(t){this.fuelLevel[this.index]=t}addYawNorth(t){this.yawNorth[this.index]=t}addcFSRrideHeight(t){this.cFSRrideHeight[this.index]=t,this.minCFSRideHeight>t&&(this.minCFSRideHeight=t),this.maxCFSRideHeight<t&&(this.maxCFSRideHeight=t)}addFrontRideHeight(t,e){this.lFRideHeight[this.index]=t,this.rFRideHeight[this.index]=e,this.minLFRideHeight>t&&(this.minLFRideHeight=t),this.maxLFRideHeight<t&&(this.maxLFRideHeight=t),this.minRFRideHeight>e&&(this.minRFRideHeight=e),this.maxRFRideHeight<e&&(this.maxRFRideHeight=e)}addRearRideHeight(t,e){this.lRRideHeight[this.index]=t,this.rRRideHeight[this.index]=e,this.minLRRideHeight>t&&(this.minLRRideHeight=t),this.maxLRRideHeight<t&&(this.maxLRRideHeight=t),this.minRRRideHeight>e&&(this.minRRRideHeight=e),this.maxRRRideHeight<e&&(this.maxRRRideHeight=e)}setLapTimeSeconds(t){var e=this.lapCurrentTimeSeconds[this.size-1],i=Math.floor(e/60),a=e%60;this.lapTimeStr=i+":"+a.toFixed(4)}}class r{constructor(t,e){var i="small-"+t;if(this.isCanvasValid=!0,null!=document.getElementById(i)){this.titleText=e;var a=document.getElementById(i),n=a.clientWidth,r=a.clientHeight,s=a.parentElement;a.remove(),this.canvas=document.createElement("canvas"),this.canvas.id=i,this.canvas.className="small-canvas",this.canvas.width=n,this.canvas.height=r,s.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.currentData=new Array(2),this.subsCurrentData=new Array(2),this.lineColorMainData="rgb(72, 109, 232)",this.lineColorComparedData="rgb(197, 83, 5)"}else this.isCanvasValid=!1}putCurrentData(t,e){t>=2?console.log("Error: Could not add more than 2 data in small canvas!"):this.currentData[t]=e}putSubsCurrentData(t,e){t>=2?console.log("Error: Could not add more than 2 data in small canvas!"):this.subsCurrentData[t]=e}drawThrottleBrake(t){var e=0==t?38:62,i=this.canvas.height-40;this.ctx.beginPath(),this.ctx.lineWidth=1,this.ctx.strokeStyle=0==t?this.lineColorMainData:this.lineColorComparedData,this.ctx.strokeRect(e,20,20,i),this.ctx.beginPath(),this.ctx.fillStyle="Throttle"==this.titleText?"rgba(0, 165, 0, 1.0)":"rgba(165, 0, 0, 1.0)","Throttle"==this.titleText?this.ctx.fillStyle="rgba(0, 165, 0, 1.0)":this.ctx.fillStyle=1==this.subsCurrentData[t]?"rgba(255, 255, 255, 0.8)":"rgba(165, 0, 0, 1.0)",this.ctx.fillRect(e,20+i,20,-i*this.currentData[t]),this.ctx.beginPath(),this.ctx.fillStyle=0==t?this.lineColorMainData:this.lineColorComparedData,this.ctx.rect(e,this.canvas.height-18,20,15),this.ctx.fill()}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var t=0;t<this.currentData.length;t++)if(null!=this.currentData[t])switch(this.titleText){case"Throttle":case"Brake":this.drawThrottleBrake(t)}}}class s{constructor(t){this.file=t,this.header={},this.diskHeader={},this.varsHeader=[],this.dataLaps=null,this.data=null,this.sessionInfoBytes=null,this.sessionInfo={}}getHeader(){return this.header}getDiskHeader(){return this.diskHeader}getVarsHeader(){return this.varsHeader}getData(){return this.data}getDataLaps(){return this.dataLaps}getOneDataLap(t){return this.dataLaps[t]}isValid(){return null!=this.file}read(){if(this.isValid()){var t=this;return new Promise((function(e,i){var a=new FileReader;a.onloadend=function(i){t.extractData(i.target.result),e(i.target.result)},a.onerror=function(t){i(t.target.error.message)},a.readAsArrayBuffer(t.file)}))}}extractData(t){var e=new DataView(t,0,112);this.header.version=e.getUint32(0,!0),this.header.status=e.getUint32(4,!0),this.header.tick_rate=e.getUint32(8,!0),this.header.session_info_update=e.getUint32(12,!0),this.header.session_info_length=e.getUint32(16,!0),this.header.session_info_offset=e.getUint32(20,!0),this.header.num_vars=e.getUint32(24,!0),this.header.var_header_offset=e.getUint32(28,!0),this.header.num_buf=e.getUint32(32,!0),this.header.buf_len=e.getUint32(36,!0),this.header.buf_offset=e.getUint32(52,!0);var i=new DataView(t,112,32);this.diskHeader.start_date=i.getFloat64(0,!0),this.diskHeader.start_time=i.getFloat64(8,!0),this.diskHeader.end_time=i.getFloat64(16,!0),this.diskHeader.lap_count=i.getUint32(24,!0),this.diskHeader.record_count=i.getUint32(28,!0);for(var a=new DataView(t,this.header.var_header_offset,144*this.header.num_vars),n=0,r=0;r<this.header.num_vars;r++)this.varsHeader.push({type:a.getUint32(n+0,!0),offset:a.getUint32(n+4,!0),count:a.getUint32(n+8,!0),count_as_time:a.getUint8(n+12,!0),name:this.convertToString(a,n+16,n+16+32),desc:null,unit:null}),n+=144;this.sessionInfoBytes=new Uint8Array(t.slice(this.header.session_info_offset,this.header.session_info_offset+this.header.session_info_length)),this.loadSessionInfo(),this.data=new Uint8Array(t.slice(this.header.buf_offset)),this.loadDataLaps()}print(){console.log(this.header),console.log(this.diskHeader),console.log(this.varsHeader),console.log(this.sessionInfo),console.log("Data Length:",this.data.length)}convertToString(t,e,i){for(var a="",n=i-e,r=0;r<n;r++){a+=0==t.getUint8(r+e)?"":String.fromCharCode(t.getUint8(r+e))}return a}loadDataLaps(){for(var t=new Array(this.diskHeader.lap_count),e=1;e<=this.diskHeader.lap_count;e++)t[e-1]=new n(e);for(var i=this.data.length/this.header.buf_len,a=0,r=this.getHeaderData("Lap",0).content,s=0,o=0,l=0,h=0;h<i;h++){if((a=this.getHeaderData("Lap",h).content)!=r){if(t[l].setLapTimeSeconds(0),t[l].optimizeArraySize(),o+1>=this.diskHeader.lap_count)break;o++}var d=this.getHeaderData("LapDistPct",h).content,c=parseFloat(this.getHeaderData("LapDist",h).content),p=parseInt(c),u=this.getHeaderData("AirTemp",h).content.toFixed(1),g=this.getHeaderData("TrackTemp",h).content.toFixed(1),f=0;p>210&&(f=parseFloat(this.getHeaderData("LapCurrentLapTime",h).content));var m=this.getHeaderData("Throttle",h).content,x=this.getHeaderData("Brake",h).content,R=this.getHeaderData("BrakeABSactive",h).content,v=(3600*this.getHeaderData("Speed",h).content/1e3/320).toFixed(3),L=this.getHeaderData("Gear",h).content,y=this.getHeaderData("SteeringWheelAngle",h).content,A=this.getHeaderData("WindDir",h).content,C=3.6*this.getHeaderData("WindVel",h).content,w=this.getHeaderData("FuelLevel",h).content,b=this.getHeaderData("YawNorth",h).content,F=1e3*this.getHeaderData("CFSRrideHeight",h).content,M=1e3*this.getHeaderData("LFrideHeight",h).content,T=1e3*this.getHeaderData("RFrideHeight",h).content,k=1e3*this.getHeaderData("LRrideHeight",h).content,D=1e3*this.getHeaderData("RRrideHeight",h).content,I=this.getHeaderData("Lat",h).content,S=this.getHeaderData("Lon",h).content;t[o].lapNumber=a,t[o].setAirTemp(u),t[o].setTrackTemp(g),t[o].addLapCurrentTimeSeconds(f),t[o].addLapDistPct(d),t[o].addLapDistMeters(c),t[o].addLapDistMetersInt(p),m<0&&(m=0),x<0&&(x=0),t[o].addThrottle(m),t[o].addBrake(x),t[o].addAbsActive(R),t[o].addSpeedKmh(v),0==L&&(L=s),t[o].addGear(L),t[o].addSteer(y),t[o].addWindDir(A),t[o].addWindVel(C),t[o].addFuelLevel(w),t[o].addYawNorth(b),t[o].tires.addLFtempL(this.getHeaderData("LFtempL",h).content),t[o].tires.addLFtempM(this.getHeaderData("LFtempM",h).content),t[o].tires.addLFtempR(this.getHeaderData("LFtempR",h).content),t[o].tires.addRFtempL(this.getHeaderData("RFtempL",h).content),t[o].tires.addRFtempM(this.getHeaderData("RFtempM",h).content),t[o].tires.addRFtempR(this.getHeaderData("RFtempR",h).content),t[o].tires.addLRtempL(this.getHeaderData("LRtempL",h).content),t[o].tires.addLRtempM(this.getHeaderData("LRtempM",h).content),t[o].tires.addLRtempR(this.getHeaderData("LRtempR",h).content),t[o].tires.addRRtempL(this.getHeaderData("RRtempL",h).content),t[o].tires.addRRtempM(this.getHeaderData("RRtempM",h).content),t[o].tires.addRRtempR(this.getHeaderData("RRtempR",h).content),t[o].addcFSRrideHeight(F),t[o].addFrontRideHeight(M,T),t[o].addRearRideHeight(k,D),t[o].trackCoordinate.addLat(I),t[o].trackCoordinate.addLon(S),t[o].updateSize(),t[o].updateIndex(),t[o].trackCoordinate.updateSize(),t[o].trackCoordinate.updateIndex(),t[o].tires.updateIndex(),r=a,l=o,s=L}t[o].setLapTimeSeconds(0),t[o].optimizeArraySize(),this.dataLaps=t}getHeaderData(t,e){for(var i=null,a=0;a<this.varsHeader.length;a++)if(this.varsHeader[a].name==t){i=this.varsHeader[a];break}if(null==i)return i={content:0};var n=e*this.header.buf_len+i.offset;switch(i.type){case 0:i.content_type="string";var r=this.data.slice(n,n+8),s="";for(a=0;a<8;a++){s+=0==r[a]?"":String.fromCharCode(r[a])}i.content=s,8;break;case 1:i.content_type="boolean";r=this.data.slice(n,n+1);i.content=255&r,1;break;case 2:i.content_type="int32";var o=4294967295&((r=this.data.slice(n,n+4))[0]|r[1]<<8|r[2]<<16|r[3]<<24);i.content=o,4;break;case 3:o=4294967295&((r=this.data.slice(n,n+4))[0]|r[1]<<8|r[2]<<16|r[3]<<24);i.content_type="uint32",i.content=o,4;break;case 4:i.content_type="float32";r=this.data.slice(n,n+4);var l=new ArrayBuffer(4);(h=new DataView(l)).setUint8(0,r[0]),h.setUint8(1,r[1]),h.setUint8(2,r[2]),h.setUint8(3,r[3]),i.content=h.getFloat32(0,!0),4;break;case 5:i.content_type="float64";var h;r=this.data.slice(n,n+8),l=new ArrayBuffer(8);(h=new DataView(l)).setInt8(0,r[0]),h.setInt8(1,r[1]),h.setInt8(2,r[2]),h.setInt8(3,r[3]),h.setInt8(4,r[4]),h.setInt8(5,r[5]),h.setInt8(6,r[6]),h.setInt8(7,r[7]),i.content=h.getFloat64(0,!0),8;break;default:console.log("default")}return i}loadSessionInfo(){for(var t=0,e="";t<this.sessionInfoBytes.length;)e+=String.fromCharCode(this.sessionInfoBytes[t]),t++;this.sessionInfo=jsyaml.load(e)}}class o{constructor(){var t="track-canvas",e=document.getElementById(t),i=e.clientWidth,a=e.clientHeight,n=e.parentElement;e.remove(),this.canvas=document.createElement("canvas"),this.canvas.className=e.className,this.canvas.id=t,this.canvas.width=i,this.canvas.height=a,n.appendChild(this.canvas),this.widthForTrack=this.canvas.width-200,this.heightForTrack=this.canvas.height-80,this.ctx=this.canvas.getContext("2d"),this.currentIndexAt=0,this.trackCoordinates=new Array(2),this.steerAngles=new Array(2),this.windDirs=new Array(2),this.carsYaw=new Array(2),this.LFtemp={left:new Array(2),middle:new Array(2),right:new Array(2)},this.RFtemp={left:new Array(2),middle:new Array(2),right:new Array(2)},this.LRtemp={left:new Array(2),middle:new Array(2),right:new Array(2)},this.RRtemp={left:new Array(2),middle:new Array(2),right:new Array(2)},this.steerImgs=new Array(2),this.steerImgs[0]=document.getElementById("steeringWheel1"),this.steerImgs[1]=document.getElementById("steeringWheel2"),this.windDirImgs=new Array(2),this.windDirImgs[0]=document.getElementById("windDir1"),this.windDirImgs[1]=document.getElementById("windDir2"),this.compassImg=document.getElementById("arrow-compass"),this.carDirImgs=new Array(2),this.carDirImgs[0]=document.getElementById("carDir-main"),this.carDirImgs[1]=document.getElementById("carDir-compared"),this.xTranslate=this.canvas.width/4,this.yTranslate=10,this.zoom=.8,this.trackLineColorMain="rgb(72, 109, 232)",this.trackLineColorCompared="rgb(197, 83, 5)",this.circleSize=4,this.drawTestLines(),this.activeMoveTrack()}setZoom(t){this.zoom=t}setTranslate(t,e){this.xTranslate=t,this.yTranslate=e}setTrackCoordinates(t,e){t>=2?console.log("Error: You Cannot Set More Than 2 data Laps!"):this.trackCoordinates[t]=e}setSteerAngles(t,e){t>=2?console.log("Error: You Cannot Set More Than 2 data Laps!"):this.steerAngles[t]=e}setWindDirs(t,e){t>=2?console.log("Error: You Cannot Set More Than 2 data Laps!"):this.windDirs[t]=e}setCarsYaw(t,e){t>=2?console.log("Error: You Cannot Set More Than 2 data Laps!"):this.carsYaw[t]=e}setTiresFrontTemp(t,e,i,a,n,r,s){this.LFtemp.left[t]=e,this.LFtemp.middle[t]=i,this.LFtemp.right[t]=a,this.RFtemp.left[t]=n,this.RFtemp.middle[t]=r,this.RFtemp.right[t]=s}setTiresRearTemp(t,e,i,a,n,r,s){this.LRtemp.left[t]=e,this.LRtemp.middle[t]=i,this.LRtemp.right[t]=a,this.RRtemp.left[t]=n,this.RRtemp.middle[t]=r,this.RRtemp.right[t]=s}updateCurrentIndexAt(t){this.currentIndexAt=t,this.draw()}activeMoveTrack(){var t=this,e=!1,i=0,a=0;this.canvas.addEventListener("mousedown",(function(n){null==t.trackCoordinates[0]&&null==t.trackCoordinates[1]||(i=n.pageX-t.xTranslate,a=n.pageY-t.yTranslate,e=!0)})),this.canvas.addEventListener("mousemove",(function(n){e&&(t.xTranslate=n.pageX-i,t.yTranslate=n.pageY-a,t.draw())})),this.canvas.addEventListener("mouseup",(function(){e&&(e=!1)})),this.canvas.addEventListener("mouseout",(function(){e&&(e=!1)}));this.canvas.addEventListener("wheel",(function(e){if(null!=t.trackCoordinates[0]||null!=t.trackCoordinates[1]){e.preventDefault();var i=1;(i="Up"==(e.deltaY>0?"Down":"Up")?t.zoom+.1:t.zoom-.1)>5&&(i=5),i<.25&&(i=.25),t.zoom=i,t.draw()}}))}convertLatLonToCanvas(t,e){var i=this.trackCoordinates[t];return{x:(i.lon[e]-i.minLon)*(this.widthForTrack/(i.maxLon-i.minLon)),y:this.heightForTrack-(i.lat[e]-i.minLat)*(this.heightForTrack/(i.maxLat-i.minLat))}}drawTestLines(){this.ctx.fillStyle=this.trackLineColorMain,this.ctx.strokeStyle=this.trackLineColorCompared,this.ctx.beginPath(),this.ctx.font="bold 48px Arial",this.ctx.fillText("TRACK",this.canvas.width/2-92,this.canvas.height/2),this.ctx.strokeText("TRACK",this.canvas.width/2-92,this.canvas.height/2)}drawCircleOnTrack(){for(var t=0;t<this.carDirImgs.length;t++)if(null!=this.trackCoordinates[t]){this.ctx.beginPath();var e=this.convertLatLonToCanvas(t,this.currentIndexAt);this.ctx.save(),this.ctx.translate(e.x,e.y),this.ctx.rotate(this.carsYaw[t][this.currentIndexAt]),this.ctx.drawImage(this.carDirImgs[t],-6,-6,12,12),this.ctx.restore()}}drawSteerAngles(){if(null!=this.steerAngles[0]||null!=this.steerAngles[1])for(var t=10,e=this.canvas.width-90,i=0;i<this.steerAngles.length;i++)null!=this.steerAngles[i]&&(t=t+80*i+8,this.ctx.beginPath(),this.ctx.fillStyle=0==i?this.trackLineColorMain:this.trackLineColorCompared,this.ctx.textAlign="center",this.ctx.font="12px Arial",this.ctx.fillText((-this.steerAngles[i][this.currentIndexAt]*(180/Math.PI)).toFixed(1)+"Â°",e+40,t+2),this.ctx.beginPath(),this.ctx.save(),this.ctx.translate(e+40,t+40),this.ctx.rotate(-this.steerAngles[i][this.currentIndexAt]),this.ctx.drawImage(this.steerImgs[i],-40,-40,80,80),this.ctx.restore(),this.ctx.fillStyle=0==i?this.trackLineColorMain:this.trackLineColorCompared,this.ctx.arc(e+40,t+40,8,0,2*Math.PI),this.ctx.fill())}drawWindDir(){if(null!=this.steerAngles[0]||null!=this.steerAngles[1])for(var t=15,e=0;e<this.windDirs.length;e++)null!=this.windDirs[e]&&(t+=0==e?30:80,this.ctx.beginPath(),this.ctx.save(),this.ctx.translate(50,t+15),this.ctx.drawImage(this.compassImg,-38,-32,70,70),this.ctx.rotate(this.windDirs[e][this.currentIndexAt]),this.ctx.drawImage(this.windDirImgs[e],-15,-15,30,30),this.ctx.restore())}drawTires(){for(var t=20,e=50,i=0;i<2;i++)if(null!=this.LFtemp.left[i]){var a=0==i?15:95;this.ctx.lineWidth=2,this.ctx.strokeStyle=0==i?this.trackLineColorMain:this.trackLineColorCompared,this.ctx.rect(a,this.canvas.height-160,72,140),this.ctx.stroke(),t=0==i?20:100,this.ctx.fillStyle="rgb(255, 255, 255)";var n=150,r=0,s=0,o=0;this.ctx.beginPath(),r=this.LFtemp.left[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+r+", "+(255-r)+", 0)",this.ctx.fillRect(t,this.canvas.height-150,8,e),s=this.LFtemp.middle[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+s+", "+(255-s)+", 0)",this.ctx.fillRect(t+8+2,this.canvas.height-150,8,e),o=this.LFtemp.right[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+o+", "+(255-o)+", 0)",this.ctx.fillRect(t+16+4,this.canvas.height-150,8,e),t+=34,r=this.RFtemp.left[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+r+", "+(255-r)+", 0)",this.ctx.fillRect(t,this.canvas.height-150,8,e),s=this.RFtemp.middle[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+r+", "+(255-r)+", 0)",this.ctx.fillRect(t+8+2,this.canvas.height-150,8,e),o=this.RFtemp.right[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+r+", "+(255-r)+", 0)",this.ctx.fillRect(t+16+4,this.canvas.height-150,8,e),this.ctx.beginPath(),t=0==i?20:100,r=this.LRtemp.left[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+r+", "+(255-r)+", 0)",this.ctx.fillRect(t,this.canvas.height-80,8,e),s=this.LRtemp.middle[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+r+", "+(255-r)+", 0)",this.ctx.fillRect(t+8+2,this.canvas.height-80,8,e),o=this.LRtemp.right[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+r+", "+(255-r)+", 0)",this.ctx.fillRect(t+16+4,this.canvas.height-80,8,e),t+=34,r=this.RRtemp.left[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+r+", "+(255-r)+", 0)",this.ctx.fillRect(t,this.canvas.height-80,8,e),s=this.RRtemp.middle[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+r+", "+(255-r)+", 0)",this.ctx.fillRect(t+8+2,this.canvas.height-80,8,e),o=this.RRtemp.right[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+r+", "+(255-r)+", 0)",this.ctx.fillRect(t+16+4,this.canvas.height-80,8,e)}}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),this.ctx.translate(this.xTranslate,this.yTranslate),this.ctx.scale(this.zoom,this.zoom),this.ctx.lineWidth=1;for(let r=0;r<this.trackCoordinates.length;r++)if(null!=this.trackCoordinates[r]&&null!=this.trackCoordinates[r]){var t=this.trackCoordinates[r],e=this.convertLatLonToCanvas(r,0);this.ctx.strokeStyle=0==r?this.trackLineColorMain:this.trackLineColorCompared;var i=e.x,a=e.y;this.ctx.beginPath();for(var n=1;n<t.size;n++)e=this.convertLatLonToCanvas(r,n),this.ctx.moveTo(i,a),i=e.x,a=e.y,e.x*this.zoom-5+this.xTranslate>this.canvas.width||e.x*this.zoom+this.xTranslate<-5||e.y*this.zoom-5+this.yTranslate>this.canvas.height||e.y*this.zoom+this.yTranslate<-5||this.ctx.lineTo(e.x,e.y);this.ctx.stroke()}this.drawCircleOnTrack(),this.ctx.restore(),this.drawSteerAngles(),this.drawWindDir(),this.drawTires()}}class l{constructor(t,e){this.lapNum=t,this.lat=new Float32Array(e),this.lon=new Float32Array(e),this.minLat=9999,this.maxLat=-9999,this.minLon=9999,this.maxLon=-9999,this.size=0,this.index=0}updateSize(){this.size+=1}updateIndex(){this.index+=1}addLat(t){this.lat[this.index]=t,this.minLat>t&&(this.minLat=t),this.maxLat<t&&(this.maxLat=t)}addLon(t){this.lon[this.index]=t,this.minLon>t&&(this.minLon=t),this.maxLon<t&&(this.maxLon=t)}getLatArray(){return this.lat}getLonArray(){return this.lon}}var h=document.getElementById("form_data");null==h&&console.log("Error: Could not find the form to upload");var d=document.querySelector(".loading_div");function c(){d.style.display="none"}var p=document.querySelectorAll(".str_file_name"),u=new Array(2),g=[{},{}],f=new Array(10),m=new class{constructor(){this.allCanvases=[],this.TrackCanvas=new o,this.isMouseDown=!1,this.xData=new Array(2),this.fuelLevels=new Array(2),this.windVel=new Array(2),this.filesInfoElements=[document.querySelectorAll(".file1Info"),document.querySelectorAll(".file2Info")],this.MAX_SELECTION=200}addCanvas(t){this.allCanvases.push(t)}clearAllCanvas(){this.allCanvases=[],this.TrackCanvas=new o}getTrackCanvas(){return this.TrackCanvas}setXData(t,e){this.xData[t]=e}setFuelLevel(t,e){this.fuelLevels[t]=e}setWindVel(t,e){this.windVel[t]=e}activeOnMouseMove(){var t=this;for(let e=0;e<this.allCanvases.length;e++)this.allCanvases[e].getCanvas().onmousemove=function(i){t.allCanvases[e].xPosAt=i.offsetX-t.allCanvases[e].getOffsetX();var a=t.allCanvases[e].xPosAt/(t.allCanvases[e].canvas.width-t.allCanvases[e].getOffsetX());for(let e=0;e<t.allCanvases.length;e++)t.canvasOnMouseMove(i,a,t.allCanvases[e],t)},this.allCanvases[e].getCanvas().onmousedown=function(i){t.canvasOnMouseDown(i,t.allCanvases[e])}}canvasOnMouseMove(t,e,i,a){if(i.xPosAt=e*(i.canvas.width-i.getOffsetX()),!(i.xPosAt<0||i.xPosAt+i.getOffsetX()>=i.canvas.width)){var n=i.xPosAt+i.getOffsetX();i.draw(),i.ctx.strokeStyle="rgba(255, 255, 255, 1.0)",i.ctx.lineWidth=1,i.ctx.beginPath(),i.ctx.moveTo(n,0),i.ctx.lineTo(n,i.getCanvas().height-i.getOffsetY()),i.ctx.stroke();var r=null!=i.getCurrentIndexAt(0)?i.getCurrentIndexAt(0):i.getCurrentIndexAt(1),s=a.xData[0][r];i.ctx.beginPath(),i.ctx.font="bold 10px Arial",i.ctx.textAlign="center",i.ctx.fillStyle="rgba(255, 255, 255, 1.0)",i.ctx.fillText(s+"m",n,i.getCanvas().height-10),a.TrackCanvas.updateCurrentIndexAt(r),null!=i.getCurrentIndexAt(0)&&null!=a.fuelLevels[0]&&(a.filesInfoElements[0][2].textContent=parseFloat(a.windVel[0][i.getCurrentIndexAt(0)]).toFixed(1)+"km/h",a.filesInfoElements[0][3].textContent=parseFloat(a.fuelLevels[0][i.getCurrentIndexAt(0)]).toFixed(2)+"L"),null!=i.getCurrentIndexAt(1)&&null!=a.fuelLevels[1]&&(a.filesInfoElements[1][2].textContent=parseFloat(a.windVel[1][i.getCurrentIndexAt(1)]).toFixed(1)+"km/h",a.filesInfoElements[1][3].textContent=parseFloat(a.fuelLevels[1][i.getCurrentIndexAt(1)]).toFixed(2)+"L")}}canvasOnMouseDown(t,e){var i=t.offsetX,a=null!=e.getCurrentIndexAt(0)?e.getCurrentIndexAt(0):e.getCurrentIndexAt(1),n=0;if(!(i<0)){this.isMouseDown=!0;var r=this;window.onmousemove=function(t){r.isMouseDown&&(t.offsetX-e.getOffsetX()<0||(n=null!=e.getCurrentIndexAt(0)?e.getCurrentIndexAt(0):e.getCurrentIndexAt(1),r.highlightsSelectedPart(a,n)))},window.onmouseup=function(){if(r.isMouseDown){if(a+n!=a&&Math.abs(a-n)>r.MAX_SELECTION){if(a>n){var t=a;a=n,n=t}for(var e=0;e<r.allCanvases.length;e++)r.allCanvases[e].setStartEndIndex(a,n)}r.isMouseDown=!1}}}}highlightsSelectedPart(t,e){for(var i=0,a=0;a<this.allCanvases.length;a++){var n=this.allCanvases[a].ctx;n.beginPath(),n.fillStyle="rgba(255, 255, 255, 0.2)",i=e-t,n.fillRect(this.allCanvases[a].getOffsetX()+(t-this.allCanvases[a].startMetersIndex)*this.allCanvases[a].stepsX,0,i*this.allCanvases[a].stepsX,this.allCanvases[a].getCanvas().height)}}},x={lap1:-1,lap2:-1};function R(){f[0]=new i("delta","Delta"),f[0].setIsTranslateCenter(!0),f[1]=new i("throttle","Throttle"),f[2]=new i("brake","Brake"),f[3]=new i("speed","Speed"),f[4]=new i("gear","Gear"),f[5]=new i("CFSRideHeight","CFSRideHeight"),f[6]=new i("LFRideHeight","Left front"),f[7]=new i("RFRideHeight","Right front"),f[8]=new i("LRRideHeight","Left rear"),f[9]=new i("RRRideHeight","Right rear"),m.clearAllCanvas();for(var t=0;t<f.length;t++)f[t].clear(),m.addCanvas(f[t])}function v(t){for(var e=document.querySelectorAll(t),i=0;i<e.length;i++)e[i].className=""}function L(t){R();var e=parseInt(t.parentElement.getAttribute("data-file-index")),i=parseInt(t.getAttribute("data-lap"));0==e?(v(".ul-laps1 li"),x.lap1==i?x.lap1=-1:(x.lap1=i,t.className="selectedFile1")):(v(".ul-laps2 li"),x.lap2==i?x.lap2=-1:(x.lap2=i,t.className="selectedFile2")),-1!=x.lap1||-1!=x.lap2?(!function(){if(u[0].isValid()&&-1!=x.lap1&&-1==x.lap2){var t=u[0].getOneDataLap(x.lap1),e=new Float32Array(t.size);f[0].setLap(0,e),f[0].draw(),f[1].setLap(0,t.getThrottleArray()),f[1].draw(),f[2].setLap(0,t.getBrakeArray()),f[2].setSubscribeData(0,t.getAbsAcvtiveArray()),f[2].draw(),f[3].setLap(0,t.getSpeedKmhArray()),f[3].draw(),f[4].setLap(0,t.getGearArray()),f[4].setMinMaxData(0,t.maxGear,0,1),f[4].draw(),f[5].boxWidth=56,f[5].setLap(0,t.getCFSRrideHeightArray()),f[5].setMinMaxData(t.minCFSRideHeight,t.maxCFSRideHeight,0,1),f[5].draw(),f[6].boxWidth=56,f[6].setLap(0,t.getLFRideHeightArray()),f[6].setMinMaxData(t.minLFRideHeight,t.maxLFRideHeight,0,1),f[6].draw(),f[7].boxWidth=56,f[7].setLap(0,t.getRFRideHeightArray()),f[7].setMinMaxData(t.minRFRideHeight,t.maxRFRideHeight,0,1),f[7].draw(),f[8].boxWidth=56,f[8].setLap(0,t.getLRRideHeightArray()),f[8].setMinMaxData(t.minLRRideHeight,t.maxLRRideHeight,0,1),f[8].draw(),f[9].boxWidth=56,f[9].setLap(0,t.getRRRideHeightArray()),f[9].setMinMaxData(t.minRRRideHeight,t.maxRRRideHeight,0,1),f[9].draw(),m.setXData(0,t.getLapDistMetersIntArray()),m.getTrackCanvas().setTrackCoordinates(0,t.trackCoordinate),m.getTrackCanvas().setSteerAngles(0,t.getSteerArray()),m.getTrackCanvas().setWindDirs(0,t.getWindDirArray()),m.getTrackCanvas().setCarsYaw(0,t.getYawNorthArray()),m.getTrackCanvas().setTiresFrontTemp(0,t.tires.LFtempL,t.tires.LFtempM,t.tires.LFtempR,t.tires.RFtempL,t.tires.RFtempM,t.tires.RFtempR),m.getTrackCanvas().setTiresRearTemp(0,t.tires.LRtempL,t.tires.LRtempM,t.tires.LRtempR,t.tires.RRtempL,t.tires.RRtempM,t.tires.RRtempR),m.setWindVel(0,t.getWindVelArray()),m.setFuelLevel(0,t.getFuelLevelArray()),m.getTrackCanvas().draw(),y(0,t.airTemp,t.trackTemp,t.windVel[0],t.fuelLevel[0])}if(u[1].isValid()&&-1!=x.lap2&&-1==x.lap1){var i=u[1].getOneDataLap(x.lap2);e=new Float32Array(i.size);f[0].setLap(1,e),f[0].draw(),f[1].setLap(1,i.getThrottleArray()),f[1].draw(),f[2].setLap(1,i.getBrakeArray()),f[2].setSubscribeData(1,i.getAbsAcvtiveArray()),f[2].draw(),f[3].setLap(1,i.getSpeedKmhArray()),f[3].draw(),f[4].setLap(1,i.getGearArray()),f[4].setMinMaxData(0,i.maxGear,0,1),f[4].draw(),f[5].boxWidth=56,f[5].setLap(1,i.getCFSRrideHeightArray()),f[5].setMinMaxData(i.minCFSRideHeight,i.maxCFSRideHeight,0,1),f[5].draw(),f[6].boxWidth=56,f[6].setLap(1,i.getLFRideHeightArray()),f[6].setMinMaxData(i.minLFRideHeight,i.maxLFRideHeight,0,1),f[6].draw(),f[7].boxWidth=56,f[7].setLap(1,i.getRFRideHeightArray()),f[7].setMinMaxData(i.minRFRideHeight,i.maxRFRideHeight,0,1),f[7].draw(),f[8].boxWidth=56,f[8].setLap(1,i.getLRRideHeightArray()),f[8].setMinMaxData(i.minLRRideHeight,i.maxLRRideHeight,0,1),f[8].draw(),f[9].boxWidth=56,f[9].setLap(1,i.getRRRideHeightArray()),f[9].setMinMaxData(i.minRRRideHeight,i.maxRRRideHeight,0,1),f[9].draw(),m.setXData(0,i.getLapDistMetersIntArray()),m.getTrackCanvas().setTrackCoordinates(1,i.trackCoordinate),m.getTrackCanvas().setSteerAngles(1,i.getSteerArray()),m.getTrackCanvas().setWindDirs(1,i.getWindDirArray()),m.getTrackCanvas().setCarsYaw(1,i.getYawNorthArray()),m.getTrackCanvas().setTiresFrontTemp(1,i.tires.LFtempL,i.tires.LFtempM,i.tires.LFtempR,i.tires.RFtempL,i.tires.RFtempM,i.tires.RFtempR),m.getTrackCanvas().setTiresRearTemp(1,i.tires.LRtempL,i.tires.LRtempM,i.tires.LRtempR,i.tires.RRtempL,i.tires.RRtempM,i.tires.RRtempR),m.setWindVel(1,i.getWindVelArray()),m.setFuelLevel(1,i.getFuelLevelArray()),m.getTrackCanvas().draw(),y(1,i.airTemp,i.trackTemp,i.windVel[0],i.fuelLevel[0])}if(u[0].isValid()&&u[1].isValid()&&x.lap1>-1&&x.lap2>-1){t=u[0].getOneDataLap(x.lap1),i=u[1].getOneDataLap(x.lap2);t.setDataLapToCompare(i);var a=t.runSyncLaps();f[0].setLap(0,a[0].getLapCurrentTimeSecondsArray()),f[0].draw(),f[1].setLap(0,a[0].getThrottleArray()),f[1].setLap(1,a[1].getThrottleArray()),f[1].draw(),f[2].setLap(0,a[0].getBrakeArray()),f[2].setLap(1,a[1].getBrakeArray()),f[2].setSubscribeData(0,a[0].getAbsAcvtiveArray()),f[2].setSubscribeData(1,a[1].getAbsAcvtiveArray()),f[2].draw(),f[3].setLap(0,a[0].getSpeedKmhArray()),f[3].setLap(1,a[1].getSpeedKmhArray()),f[3].draw(),f[4].setLap(0,a[0].getGearArray()),f[4].setLap(1,a[1].getGearArray()),f[4].setMinMaxData(0,a[0].maxGear,0,1),f[4].setMinMaxData(0,a[1].maxGear,0,1),f[4].draw(),f[5].boxWidth=56,f[5].setLap(0,a[0].getCFSRrideHeightArray()),f[5].setLap(1,a[1].getCFSRrideHeightArray()),f[5].setMinMaxData(a[0].minCFSRideHeight,a[0].maxCFSRideHeight,0,1),f[5].setMinMaxData(a[1].minCFSRideHeight,a[1].maxCFSRideHeight,0,1),f[5].draw(),f[6].boxWidth=56,f[6].setLap(0,a[0].getLFRideHeightArray()),f[6].setLap(1,a[1].getLFRideHeightArray()),f[6].setMinMaxData(a[0].minLFRideHeight,a[0].maxLFRideHeight,0,1),f[6].setMinMaxData(a[1].minLFRideHeight,a[1].maxLFRideHeight,0,1),f[6].draw(),f[7].boxWidth=56,f[7].setLap(0,a[0].getRFRideHeightArray()),f[7].setLap(1,a[1].getRFRideHeightArray()),f[7].setMinMaxData(a[0].minRFRideHeight,a[0].maxRFRideHeight,0,1),f[7].setMinMaxData(a[1].minRFRideHeight,a[1].maxRFRideHeight,0,1),f[7].draw(),f[8].boxWidth=56,f[8].setLap(0,a[0].getLRRideHeightArray()),f[8].setLap(1,a[1].getLRRideHeightArray()),f[8].setMinMaxData(a[0].minLRRideHeight,a[0].maxLRRideHeight,0,1),f[8].setMinMaxData(a[1].minLRRideHeight,a[1].maxLRRideHeight,0,1),f[8].draw(),f[9].boxWidth=56,f[9].setLap(0,a[0].getRRRideHeightArray()),f[9].setLap(1,a[1].getRRRideHeightArray()),f[9].setMinMaxData(a[0].minRRRideHeight,a[0].maxRRRideHeight,0,1),f[9].setMinMaxData(a[1].minRRRideHeight,a[1].maxRRRideHeight,0,1),f[9].draw(),m.setXData(0,a[0].getLapDistMetersIntArray()),m.getTrackCanvas().setTrackCoordinates(0,a[0].trackCoordinate),m.getTrackCanvas().setTrackCoordinates(1,a[1].trackCoordinate),m.getTrackCanvas().setSteerAngles(0,a[0].getSteerArray()),m.getTrackCanvas().setSteerAngles(1,a[1].getSteerArray()),m.getTrackCanvas().setWindDirs(0,a[0].getWindDirArray()),m.getTrackCanvas().setWindDirs(1,a[1].getWindDirArray()),m.getTrackCanvas().setCarsYaw(0,a[0].getYawNorthArray()),m.getTrackCanvas().setCarsYaw(1,a[1].getYawNorthArray()),m.getTrackCanvas().setTiresFrontTemp(0,a[0].tires.LFtempL,a[0].tires.LFtempM,a[0].tires.LFtempR,a[0].tires.RFtempL,a[0].tires.RFtempM,a[0].tires.RFtempR),m.getTrackCanvas().setTiresRearTemp(0,a[0].tires.LRtempL,a[0].tires.LRtempM,a[0].tires.LRtempR,a[0].tires.RRtempL,a[0].tires.RRtempM,a[0].tires.RRtempR),m.getTrackCanvas().setTiresFrontTemp(1,a[1].tires.LFtempL,a[1].tires.LFtempM,a[1].tires.LFtempR,a[1].tires.RFtempL,a[1].tires.RFtempM,a[1].tires.RFtempR),m.getTrackCanvas().setTiresRearTemp(1,a[1].tires.LRtempL,a[1].tires.LRtempM,a[1].tires.LRtempR,a[1].tires.RRtempL,a[1].tires.RRtempM,a[1].tires.RRtempR),m.setWindVel(0,a[0].getWindVelArray()),m.setWindVel(1,a[1].getWindVelArray()),m.setFuelLevel(0,a[0].getFuelLevelArray()),m.setFuelLevel(1,a[1].getFuelLevelArray()),m.getTrackCanvas().draw(),y(0,t.airTemp,t.trackTemp,a[0].windVel[0],a[0].fuelLevel[0]),y(1,i.airTemp,i.trackTemp,a[1].windVel[0],a[1].fuelLevel[0])}}(),m.activeOnMouseMove()):console.log("Choose The Laps")}function y(t,e,i,a,n){var r=[document.querySelectorAll(".file1Info"),document.querySelectorAll(".file2Info")];if(null==u[t])return r[t][0].textContent="0c",r[t][1].textContent="0c",r[t][2].textContent="0km/h",void(r[t][3].textContent="0L");r[t][0].textContent=e+"c",r[t][1].textContent=i+"c",r[t][2].textContent=parseFloat(a).toFixed(1)+"km/h",r[t][3].textContent=parseFloat(n).toFixed(2)+"L"}function A(t){if(null==t)return null;for(var e=[],i=0;i<t.length;i++)e.push(t[i].getLapTimeStr());return e}h.file1.onchange=function(){p[0].textContent=h.file1.files[0].name},h.file2.onchange=function(){p[1].textContent=h.file2.files[0].name},h.addEventListener("submit",(async function(t){if(t.preventDefault(),function(){d.style.display="block"}(),(u=new Array(2))[0]=new s(h.file1.files[0]),u[1]=new s(h.file2.files[0]),!u[0].isValid()&&!u[1].isValid())return console.log("no files"),void setTimeout(c,1e3);x.lap1=-1,x.lap2=-1,driversLaps=[{},{}];for(var e=0;e<u.length;e++)if(u[e].isValid()){await u[e].read(),p[e].textContent=u[e].file.name;for(var i=u[e].sessionInfo.DriverInfo.DriverCarIdx,a=u[e].sessionInfo.DriverInfo.Drivers.length,n=0;n<a;n++)if(i==u[e].sessionInfo.DriverInfo.Drivers[n].CarIdx){g[e]=u[e].sessionInfo.DriverInfo.Drivers[n];break}}setTimeout((function(){R(),function(t,e){for(var i=document.querySelectorAll(".filename_laps"),a=0;a<g.length;a++)null!=g[a].UserName&&(i[a].textContent=g[a].UserName);var n=new Array(2);n[0]=A(t),n[1]=A(e),function(t){var e=document.querySelector(".ul-laps1");if(e.innerHTML="",null!=t[0])for(var i=0;i<t[0].length;i++)e.innerHTML+="<li data-lap='"+i+"'>"+t[0][i]+" <span class='lap_number'>L "+u[0].getOneDataLap(i).lapNumber+"</span></li>";var a=document.querySelector(".ul-laps2");if(a.innerHTML="",null!=t[1])for(i=0;i<t[1].length;i++)a.innerHTML+="<li data-lap='"+i+"'>"+t[1][i]+"  <span class='lap_number'>L "+u[1].getOneDataLap(i).lapNumber+"</span></li>";var n=document.querySelectorAll(".ul-laps1 li"),r=document.querySelectorAll(".ul-laps2 li");for(let t=0;t<n.length;t++)n[t].addEventListener("click",(function(){L(n[t])}));for(let t=0;t<r.length;t++)r[t].addEventListener("click",(function(){L(r[t])}));c()}(n)}(u[0].getDataLaps(),u[1].getDataLaps())}),100)})),document.getElementById("controller-zoom-out").onclick=function(){for(var t=0;t<m.allCanvases.length;t++)for(var e=0;e<m.allCanvases[t].data.length;e++)null!=m.allCanvases[t].data[e]&&m.allCanvases[t].setStartEndIndex(0,m.allCanvases[t].data[e].length);m.getTrackCanvas().setZoom(1),m.getTrackCanvas().setTranslate(0,0),m.getTrackCanvas().draw()};var C=document.getElementById("controller-play-lap"),w=document.getElementById("play_pause_image"),b=document.getElementById("playback_speed"),F=!1,M=0,T=1e-4,k=0;function D(){for(var t=0;t<m.allCanvases.length;t++)m.canvasOnMouseMove(null,M,m.allCanvases[t],m);(M+=T)>=.98999?(cancelAnimationFrame(k),M=0,F=!1,w.src="images/play.png"):k=requestAnimationFrame(D)}b.oninput=function(){T=parseFloat(this.value),document.getElementById("playback_speed_text").textContent=(1e4*this.value).toFixed(0)},C.onclick=function(){if(-1!=x.lap1||-1!=x.lap2){if(F)return cancelAnimationFrame(k),w.src="images/play.png",F=!1,void(M=0);F=!0,w.src="images/pause.png",D()}};