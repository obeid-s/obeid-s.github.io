var t,e;t=this,e=function(t){"use strict";function e(t){return null==t}var i={isNothing:e,isObject:function(t){return"object"==typeof t&&null!==t},toArray:function(t){return Array.isArray(t)?t:e(t)?[]:[t]},repeat:function(t,e){var i,a="";for(i=0;i<e;i+=1)a+=t;return a},isNegativeZero:function(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t},extend:function(t,e){var i,a,n,s;if(e)for(i=0,a=(s=Object.keys(e)).length;i<a;i+=1)t[n=s[i]]=e[n];return t}};function a(t,e){var i="",a=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(i+='in "'+t.mark.name+'" '),i+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(i+="\n\n"+t.mark.snippet),a+" "+i):a}function n(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=a(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.toString=function(t){return this.name+": "+a(this,t)};var s=n;function r(t,e,i,a,n){var s="",r="",o=Math.floor(n/2)-1;return a-e>o&&(e=a-o+(s=" ... ").length),i-a>o&&(i=a+o-(r=" ...").length),{str:s+t.slice(e,i).replace(/\t/g,"â†’")+r,pos:a-e+s.length}}function o(t,e){return i.repeat(" ",e-t.length)+t}var l=function(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),"number"!=typeof e.indent&&(e.indent=1),"number"!=typeof e.linesBefore&&(e.linesBefore=3),"number"!=typeof e.linesAfter&&(e.linesAfter=2);for(var a,n=/\r?\n|\r|\0/g,s=[0],l=[],h=-1;a=n.exec(t.buffer);)l.push(a.index),s.push(a.index+a[0].length),t.position<=a.index&&h<0&&(h=s.length-2);h<0&&(h=s.length-1);var c,d,p="",u=Math.min(t.line+e.linesAfter,l.length).toString().length,g=e.maxLength-(e.indent+u+3);for(c=1;c<=e.linesBefore&&!(h-c<0);c++)d=r(t.buffer,s[h-c],l[h-c],t.position-(s[h]-s[h-c]),g),p=i.repeat(" ",e.indent)+o((t.line-c+1).toString(),u)+" | "+d.str+"\n"+p;for(d=r(t.buffer,s[h],l[h],t.position,g),p+=i.repeat(" ",e.indent)+o((t.line+1).toString(),u)+" | "+d.str+"\n",p+=i.repeat("-",e.indent+u+3+d.pos)+"^\n",c=1;c<=e.linesAfter&&!(h+c>=l.length);c++)d=r(t.buffer,s[h+c],l[h+c],t.position-(s[h]-s[h+c]),g),p+=i.repeat(" ",e.indent)+o((t.line+c+1).toString(),u)+" | "+d.str+"\n";return p.replace(/\n$/,"")},h=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],c=["scalar","sequence","mapping"],d=function(t,e){if(e=e||{},Object.keys(e).forEach((function(e){if(-1===h.indexOf(e))throw new s('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')})),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=function(t){var e={};return null!==t&&Object.keys(t).forEach((function(i){t[i].forEach((function(t){e[String(t)]=i}))})),e}(e.styleAliases||null),-1===c.indexOf(this.kind))throw new s('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')};function p(t,e){var i=[];return t[e].forEach((function(t){var e=i.length;i.forEach((function(i,a){i.tag===t.tag&&i.kind===t.kind&&i.multi===t.multi&&(e=a)})),i[e]=t})),i}function u(t){return this.extend(t)}u.prototype.extend=function(t){var e=[],i=[];if(t instanceof d)i.push(t);else if(Array.isArray(t))i=i.concat(t);else{if(!t||!Array.isArray(t.implicit)&&!Array.isArray(t.explicit))throw new s("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.implicit&&(e=e.concat(t.implicit)),t.explicit&&(i=i.concat(t.explicit))}e.forEach((function(t){if(!(t instanceof d))throw new s("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(t.loadKind&&"scalar"!==t.loadKind)throw new s("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(t.multi)throw new s("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),i.forEach((function(t){if(!(t instanceof d))throw new s("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var a=Object.create(u.prototype);return a.implicit=(this.implicit||[]).concat(e),a.explicit=(this.explicit||[]).concat(i),a.compiledImplicit=p(a,"implicit"),a.compiledExplicit=p(a,"explicit"),a.compiledTypeMap=function(){var t,e,i={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function a(t){t.multi?(i.multi[t.kind].push(t),i.multi.fallback.push(t)):i[t.kind][t.tag]=i.fallback[t.tag]=t}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(a);return i}(a.compiledImplicit,a.compiledExplicit),a};var g=u,f=new d("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),m=new d("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),x=new d("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}}),R=new g({explicit:[f,m,x]}),v=new d("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(t){if(null===t)return!0;var e=t.length;return 1===e&&"~"===t||4===e&&("null"===t||"Null"===t||"NULL"===t)},construct:function(){return null},predicate:function(t){return null===t},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),L=new d("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e=t.length;return 4===e&&("true"===t||"True"===t||"TRUE"===t)||5===e&&("false"===t||"False"===t||"FALSE"===t)},construct:function(t){return"true"===t||"True"===t||"TRUE"===t},predicate:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function y(t){return 48<=t&&t<=55}function A(t){return 48<=t&&t<=57}var w=new d("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,i,a=t.length,n=0,s=!1;if(!a)return!1;if("-"!==(e=t[n])&&"+"!==e||(e=t[++n]),"0"===e){if(n+1===a)return!0;if("b"===(e=t[++n])){for(n++;n<a;n++)if("_"!==(e=t[n])){if("0"!==e&&"1"!==e)return!1;s=!0}return s&&"_"!==e}if("x"===e){for(n++;n<a;n++)if("_"!==(e=t[n])){if(!(48<=(i=t.charCodeAt(n))&&i<=57||65<=i&&i<=70||97<=i&&i<=102))return!1;s=!0}return s&&"_"!==e}if("o"===e){for(n++;n<a;n++)if("_"!==(e=t[n])){if(!y(t.charCodeAt(n)))return!1;s=!0}return s&&"_"!==e}}if("_"===e)return!1;for(;n<a;n++)if("_"!==(e=t[n])){if(!A(t.charCodeAt(n)))return!1;s=!0}return!(!s||"_"===e)},construct:function(t){var e,i=t,a=1;if(-1!==i.indexOf("_")&&(i=i.replace(/_/g,"")),"-"!==(e=i[0])&&"+"!==e||("-"===e&&(a=-1),e=(i=i.slice(1))[0]),"0"===i)return 0;if("0"===e){if("b"===i[1])return a*parseInt(i.slice(2),2);if("x"===i[1])return a*parseInt(i.slice(2),16);if("o"===i[1])return a*parseInt(i.slice(2),8)}return a*parseInt(i,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!i.isNegativeZero(t)},represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),C=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),b=/^[-+]?[0-9]+e/,F=new d("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(t){return null!==t&&!(!C.test(t)||"_"===t[t.length-1])},construct:function(t){var e,i;return i="-"===(e=t.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),".inf"===e?1===i?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===e?NaN:i*parseFloat(e,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||i.isNegativeZero(t))},represent:function(t,e){var a;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(i.isNegativeZero(t))return"-0.0";return a=t.toString(10),b.test(a)?a.replace("e",".e"):a},defaultStyle:"lowercase"}),T=R.extend({implicit:[v,L,w,F]}),M=T,k=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),D=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),S=new d("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(t){return null!==t&&(null!==k.exec(t)||null!==D.exec(t))},construct:function(t){var e,i,a,n,s,r,o,l,h=0,c=null;if(null===(e=k.exec(t))&&(e=D.exec(t)),null===e)throw new Error("Date resolve error");if(i=+e[1],a=+e[2]-1,n=+e[3],!e[4])return new Date(Date.UTC(i,a,n));if(s=+e[4],r=+e[5],o=+e[6],e[7]){for(h=e[7].slice(0,3);h.length<3;)h+="0";h=+h}return e[9]&&(c=6e4*(60*+e[10]+ +(e[11]||0)),"-"===e[9]&&(c=-c)),l=new Date(Date.UTC(i,a,n,s,r,o,h)),c&&l.setTime(l.getTime()-c),l},instanceOf:Date,represent:function(t){return t.toISOString()}}),I=new d("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(t){return"<<"===t||null===t}}),H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",O=new d("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,i,a=0,n=t.length,s=H;for(i=0;i<n;i++)if(!((e=s.indexOf(t.charAt(i)))>64)){if(e<0)return!1;a+=6}return a%8==0},construct:function(t){var e,i,a=t.replace(/[\r\n=]/g,""),n=a.length,s=H,r=0,o=[];for(e=0;e<n;e++)e%4==0&&e&&(o.push(r>>16&255),o.push(r>>8&255),o.push(255&r)),r=r<<6|s.indexOf(a.charAt(e));return 0==(i=n%4*6)?(o.push(r>>16&255),o.push(r>>8&255),o.push(255&r)):18===i?(o.push(r>>10&255),o.push(r>>2&255)):12===i&&o.push(r>>4&255),new Uint8Array(o)},predicate:function(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)},represent:function(t){var e,i,a="",n=0,s=t.length,r=H;for(e=0;e<s;e++)e%3==0&&e&&(a+=r[n>>18&63],a+=r[n>>12&63],a+=r[n>>6&63],a+=r[63&n]),n=(n<<8)+t[e];return 0==(i=s%3)?(a+=r[n>>18&63],a+=r[n>>12&63],a+=r[n>>6&63],a+=r[63&n]):2===i?(a+=r[n>>10&63],a+=r[n>>4&63],a+=r[n<<2&63],a+=r[64]):1===i&&(a+=r[n>>2&63],a+=r[n<<4&63],a+=r[64],a+=r[64]),a}}),E=Object.prototype.hasOwnProperty,_=Object.prototype.toString,N=new d("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,i,a,n,s,r=[],o=t;for(e=0,i=o.length;e<i;e+=1){if(a=o[e],s=!1,"[object Object]"!==_.call(a))return!1;for(n in a)if(E.call(a,n)){if(s)return!1;s=!0}if(!s)return!1;if(-1!==r.indexOf(n))return!1;r.push(n)}return!0},construct:function(t){return null!==t?t:[]}}),z=Object.prototype.toString,P=new d("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,i,a,n,s,r=t;for(s=new Array(r.length),e=0,i=r.length;e<i;e+=1){if(a=r[e],"[object Object]"!==z.call(a))return!1;if(1!==(n=Object.keys(a)).length)return!1;s[e]=[n[0],a[n[0]]]}return!0},construct:function(t){if(null===t)return[];var e,i,a,n,s,r=t;for(s=new Array(r.length),e=0,i=r.length;e<i;e+=1)a=r[e],n=Object.keys(a),s[e]=[n[0],a[n[0]]];return s}}),j=Object.prototype.hasOwnProperty,W=new d("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(t){if(null===t)return!0;var e,i=t;for(e in i)if(j.call(i,e)&&null!==i[e])return!1;return!0},construct:function(t){return null!==t?t:{}}}),Y=M.extend({implicit:[S,I],explicit:[O,N,P,W]}),B=Object.prototype.hasOwnProperty,V=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,U=/[\x85\u2028\u2029]/,X=/[,\[\]\{\}]/,G=/^(?:!|!!|![a-z\-]+!)$/i,q=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function K(t){return Object.prototype.toString.call(t)}function $(t){return 10===t||13===t}function Z(t){return 9===t||32===t}function J(t){return 9===t||32===t||10===t||13===t}function Q(t){return 44===t||91===t||93===t||123===t||125===t}function tt(t){var e;return 48<=t&&t<=57?t-48:97<=(e=32|t)&&e<=102?e-97+10:-1}function et(t){return 48===t?"\0":97===t?"":98===t?"\b":116===t||9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"Â…":95===t?" ":76===t?"\u2028":80===t?"\u2029":""}function it(t){return t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}for(var at=new Array(256),nt=new Array(256),st=0;st<256;st++)at[st]=et(st)?1:0,nt[st]=et(st);function rt(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Y,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function ot(t,e){var i={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return i.snippet=l(i),new s(e,i)}function lt(t,e){throw ot(t,e)}function ht(t,e){t.onWarning&&t.onWarning.call(null,ot(t,e))}var ct={YAML:function(t,e,i){var a,n,s;null!==t.version&&lt(t,"duplication of %YAML directive"),1!==i.length&&lt(t,"YAML directive accepts exactly one argument"),null===(a=/^([0-9]+)\.([0-9]+)$/.exec(i[0]))&&lt(t,"ill-formed argument of the YAML directive"),n=parseInt(a[1],10),s=parseInt(a[2],10),1!==n&&lt(t,"unacceptable YAML version of the document"),t.version=i[0],t.checkLineBreaks=s<2,1!==s&&2!==s&&ht(t,"unsupported YAML version of the document")},TAG:function(t,e,i){var a,n;2!==i.length&&lt(t,"TAG directive accepts exactly two arguments"),a=i[0],n=i[1],G.test(a)||lt(t,"ill-formed tag handle (first argument) of the TAG directive"),B.call(t.tagMap,a)&&lt(t,'there is a previously declared suffix for "'+a+'" tag handle'),q.test(n)||lt(t,"ill-formed tag prefix (second argument) of the TAG directive");try{n=decodeURIComponent(n)}catch(e){lt(t,"tag prefix is malformed: "+n)}t.tagMap[a]=n}};function dt(t,e,i,a){var n,s,r,o;if(e<i){if(o=t.input.slice(e,i),a)for(n=0,s=o.length;n<s;n+=1)9===(r=o.charCodeAt(n))||32<=r&&r<=1114111||lt(t,"expected valid JSON character");else V.test(o)&&lt(t,"the stream contains non-printable characters");t.result+=o}}function pt(t,e,a,n){var s,r,o,l;for(i.isObject(a)||lt(t,"cannot merge mappings; the provided source object is unacceptable"),o=0,l=(s=Object.keys(a)).length;o<l;o+=1)r=s[o],B.call(e,r)||(e[r]=a[r],n[r]=!0)}function ut(t,e,i,a,n,s,r,o,l){var h,c;if(Array.isArray(n))for(h=0,c=(n=Array.prototype.slice.call(n)).length;h<c;h+=1)Array.isArray(n[h])&&lt(t,"nested arrays are not supported inside keys"),"object"==typeof n&&"[object Object]"===K(n[h])&&(n[h]="[object Object]");if("object"==typeof n&&"[object Object]"===K(n)&&(n="[object Object]"),n=String(n),null===e&&(e={}),"tag:yaml.org,2002:merge"===a)if(Array.isArray(s))for(h=0,c=s.length;h<c;h+=1)pt(t,e,s[h],i);else pt(t,e,s,i);else t.json||B.call(i,n)||!B.call(e,n)||(t.line=r||t.line,t.lineStart=o||t.lineStart,t.position=l||t.position,lt(t,"duplicated mapping key")),"__proto__"===n?Object.defineProperty(e,n,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[n]=s,delete i[n];return e}function gt(t){var e;10===(e=t.input.charCodeAt(t.position))?t.position++:13===e?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):lt(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function ft(t,e,i){for(var a=0,n=t.input.charCodeAt(t.position);0!==n;){for(;Z(n);)9===n&&-1===t.firstTabInLine&&(t.firstTabInLine=t.position),n=t.input.charCodeAt(++t.position);if(e&&35===n)do{n=t.input.charCodeAt(++t.position)}while(10!==n&&13!==n&&0!==n);if(!$(n))break;for(gt(t),n=t.input.charCodeAt(t.position),a++,t.lineIndent=0;32===n;)t.lineIndent++,n=t.input.charCodeAt(++t.position)}return-1!==i&&0!==a&&t.lineIndent<i&&ht(t,"deficient indentation"),a}function mt(t){var e,i=t.position;return!(45!==(e=t.input.charCodeAt(i))&&46!==e||e!==t.input.charCodeAt(i+1)||e!==t.input.charCodeAt(i+2)||(i+=3,0!==(e=t.input.charCodeAt(i))&&!J(e)))}function xt(t,e){1===e?t.result+=" ":e>1&&(t.result+=i.repeat("\n",e-1))}function Rt(t,e){var i,a,n=t.tag,s=t.anchor,r=[],o=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=r),a=t.input.charCodeAt(t.position);0!==a&&(-1!==t.firstTabInLine&&(t.position=t.firstTabInLine,lt(t,"tab characters must not be used in indentation")),45===a)&&J(t.input.charCodeAt(t.position+1));)if(o=!0,t.position++,ft(t,!0,-1)&&t.lineIndent<=e)r.push(null),a=t.input.charCodeAt(t.position);else if(i=t.line,yt(t,e,3,!1,!0),r.push(t.result),ft(t,!0,-1),a=t.input.charCodeAt(t.position),(t.line===i||t.lineIndent>e)&&0!==a)lt(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!o&&(t.tag=n,t.anchor=s,t.kind="sequence",t.result=r,!0)}function vt(t){var e,i,a,n,s=!1,r=!1;if(33!==(n=t.input.charCodeAt(t.position)))return!1;if(null!==t.tag&&lt(t,"duplication of a tag property"),60===(n=t.input.charCodeAt(++t.position))?(s=!0,n=t.input.charCodeAt(++t.position)):33===n?(r=!0,i="!!",n=t.input.charCodeAt(++t.position)):i="!",e=t.position,s){do{n=t.input.charCodeAt(++t.position)}while(0!==n&&62!==n);t.position<t.length?(a=t.input.slice(e,t.position),n=t.input.charCodeAt(++t.position)):lt(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==n&&!J(n);)33===n&&(r?lt(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),G.test(i)||lt(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),n=t.input.charCodeAt(++t.position);a=t.input.slice(e,t.position),X.test(a)&&lt(t,"tag suffix cannot contain flow indicator characters")}a&&!q.test(a)&&lt(t,"tag name cannot contain such characters: "+a);try{a=decodeURIComponent(a)}catch(e){lt(t,"tag name is malformed: "+a)}return s?t.tag=a:B.call(t.tagMap,i)?t.tag=t.tagMap[i]+a:"!"===i?t.tag="!"+a:"!!"===i?t.tag="tag:yaml.org,2002:"+a:lt(t,'undeclared tag handle "'+i+'"'),!0}function Lt(t){var e,i;if(38!==(i=t.input.charCodeAt(t.position)))return!1;for(null!==t.anchor&&lt(t,"duplication of an anchor property"),i=t.input.charCodeAt(++t.position),e=t.position;0!==i&&!J(i)&&!Q(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&lt(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function yt(t,e,a,n,s){var r,o,l,h,c,d,p,u,g,f=1,m=!1,x=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,r=o=l=4===a||3===a,n&&ft(t,!0,-1)&&(m=!0,t.lineIndent>e?f=1:t.lineIndent===e?f=0:t.lineIndent<e&&(f=-1)),1===f)for(;vt(t)||Lt(t);)ft(t,!0,-1)?(m=!0,l=r,t.lineIndent>e?f=1:t.lineIndent===e?f=0:t.lineIndent<e&&(f=-1)):l=!1;if(l&&(l=m||s),1!==f&&4!==a||(u=1===a||2===a?e:e+1,g=t.position-t.lineStart,1===f?l&&(Rt(t,g)||function(t,e,i){var a,n,s,r,o,l,h,c=t.tag,d=t.anchor,p={},u=Object.create(null),g=null,f=null,m=null,x=!1,R=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=p),h=t.input.charCodeAt(t.position);0!==h;){if(x||-1===t.firstTabInLine||(t.position=t.firstTabInLine,lt(t,"tab characters must not be used in indentation")),a=t.input.charCodeAt(t.position+1),s=t.line,63!==h&&58!==h||!J(a)){if(r=t.line,o=t.lineStart,l=t.position,!yt(t,i,2,!1,!0))break;if(t.line===s){for(h=t.input.charCodeAt(t.position);Z(h);)h=t.input.charCodeAt(++t.position);if(58===h)J(h=t.input.charCodeAt(++t.position))||lt(t,"a whitespace character is expected after the key-value separator within a block mapping"),x&&(ut(t,p,u,g,f,null,r,o,l),g=f=m=null),R=!0,x=!1,n=!1,g=t.tag,f=t.result;else{if(!R)return t.tag=c,t.anchor=d,!0;lt(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!R)return t.tag=c,t.anchor=d,!0;lt(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===h?(x&&(ut(t,p,u,g,f,null,r,o,l),g=f=m=null),R=!0,x=!0,n=!0):x?(x=!1,n=!0):lt(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,h=a;if((t.line===s||t.lineIndent>e)&&(x&&(r=t.line,o=t.lineStart,l=t.position),yt(t,e,4,!0,n)&&(x?f=t.result:m=t.result),x||(ut(t,p,u,g,f,m,r,o,l),g=f=m=null),ft(t,!0,-1),h=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&0!==h)lt(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return x&&ut(t,p,u,g,f,null,r,o,l),R&&(t.tag=c,t.anchor=d,t.kind="mapping",t.result=p),R}(t,g,u))||function(t,e){var i,a,n,s,r,o,l,h,c,d,p,u,g=!0,f=t.tag,m=t.anchor,x=Object.create(null);if(91===(u=t.input.charCodeAt(t.position)))r=93,h=!1,s=[];else{if(123!==u)return!1;r=125,h=!0,s={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=s),u=t.input.charCodeAt(++t.position);0!==u;){if(ft(t,!0,e),(u=t.input.charCodeAt(t.position))===r)return t.position++,t.tag=f,t.anchor=m,t.kind=h?"mapping":"sequence",t.result=s,!0;g?44===u&&lt(t,"expected the node content, but found ','"):lt(t,"missed comma between flow collection entries"),p=null,o=l=!1,63===u&&J(t.input.charCodeAt(t.position+1))&&(o=l=!0,t.position++,ft(t,!0,e)),i=t.line,a=t.lineStart,n=t.position,yt(t,e,1,!1,!0),d=t.tag,c=t.result,ft(t,!0,e),u=t.input.charCodeAt(t.position),!l&&t.line!==i||58!==u||(o=!0,u=t.input.charCodeAt(++t.position),ft(t,!0,e),yt(t,e,1,!1,!0),p=t.result),h?ut(t,s,x,d,c,p,i,a,n):o?s.push(ut(t,null,x,d,c,p,i,a,n)):s.push(c),ft(t,!0,e),44===(u=t.input.charCodeAt(t.position))?(g=!0,u=t.input.charCodeAt(++t.position)):g=!1}lt(t,"unexpected end of the stream within a flow collection")}(t,u)?x=!0:(o&&function(t,e){var a,n,s,r,o,l=1,h=!1,c=!1,d=e,p=0,u=!1;if(124===(r=t.input.charCodeAt(t.position)))n=!1;else{if(62!==r)return!1;n=!0}for(t.kind="scalar",t.result="";0!==r;)if(43===(r=t.input.charCodeAt(++t.position))||45===r)1===l?l=43===r?3:2:lt(t,"repeat of a chomping mode identifier");else{if(!((s=48<=(o=r)&&o<=57?o-48:-1)>=0))break;0===s?lt(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?lt(t,"repeat of an indentation width identifier"):(d=e+s-1,c=!0)}if(Z(r)){do{r=t.input.charCodeAt(++t.position)}while(Z(r));if(35===r)do{r=t.input.charCodeAt(++t.position)}while(!$(r)&&0!==r)}for(;0!==r;){for(gt(t),t.lineIndent=0,r=t.input.charCodeAt(t.position);(!c||t.lineIndent<d)&&32===r;)t.lineIndent++,r=t.input.charCodeAt(++t.position);if(!c&&t.lineIndent>d&&(d=t.lineIndent),$(r))p++;else{if(t.lineIndent<d){3===l?t.result+=i.repeat("\n",h?1+p:p):1===l&&h&&(t.result+="\n");break}for(n?Z(r)?(u=!0,t.result+=i.repeat("\n",h?1+p:p)):u?(u=!1,t.result+=i.repeat("\n",p+1)):0===p?h&&(t.result+=" "):t.result+=i.repeat("\n",p):t.result+=i.repeat("\n",h?1+p:p),h=!0,c=!0,p=0,a=t.position;!$(r)&&0!==r;)r=t.input.charCodeAt(++t.position);dt(t,a,t.position,!1)}}return!0}(t,u)||function(t,e){var i,a,n;if(39!==(i=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,a=n=t.position;0!==(i=t.input.charCodeAt(t.position));)if(39===i){if(dt(t,a,t.position,!0),39!==(i=t.input.charCodeAt(++t.position)))return!0;a=t.position,t.position++,n=t.position}else $(i)?(dt(t,a,n,!0),xt(t,ft(t,!1,e)),a=n=t.position):t.position===t.lineStart&&mt(t)?lt(t,"unexpected end of the document within a single quoted scalar"):(t.position++,n=t.position);lt(t,"unexpected end of the stream within a single quoted scalar")}(t,u)||function(t,e){var i,a,n,s,r,o,l;if(34!==(o=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,i=a=t.position;0!==(o=t.input.charCodeAt(t.position));){if(34===o)return dt(t,i,t.position,!0),t.position++,!0;if(92===o){if(dt(t,i,t.position,!0),$(o=t.input.charCodeAt(++t.position)))ft(t,!1,e);else if(o<256&&at[o])t.result+=nt[o],t.position++;else if((r=120===(l=o)?2:117===l?4:85===l?8:0)>0){for(n=r,s=0;n>0;n--)(r=tt(o=t.input.charCodeAt(++t.position)))>=0?s=(s<<4)+r:lt(t,"expected hexadecimal character");t.result+=it(s),t.position++}else lt(t,"unknown escape sequence");i=a=t.position}else $(o)?(dt(t,i,a,!0),xt(t,ft(t,!1,e)),i=a=t.position):t.position===t.lineStart&&mt(t)?lt(t,"unexpected end of the document within a double quoted scalar"):(t.position++,a=t.position)}lt(t,"unexpected end of the stream within a double quoted scalar")}(t,u)?x=!0:function(t){var e,i,a;if(42!==(a=t.input.charCodeAt(t.position)))return!1;for(a=t.input.charCodeAt(++t.position),e=t.position;0!==a&&!J(a)&&!Q(a);)a=t.input.charCodeAt(++t.position);return t.position===e&&lt(t,"name of an alias node must contain at least one character"),i=t.input.slice(e,t.position),B.call(t.anchorMap,i)||lt(t,'unidentified alias "'+i+'"'),t.result=t.anchorMap[i],ft(t,!0,-1),!0}(t)?(x=!0,null===t.tag&&null===t.anchor||lt(t,"alias node should not have any properties")):function(t,e,i){var a,n,s,r,o,l,h,c,d=t.kind,p=t.result;if(J(c=t.input.charCodeAt(t.position))||Q(c)||35===c||38===c||42===c||33===c||124===c||62===c||39===c||34===c||37===c||64===c||96===c)return!1;if((63===c||45===c)&&(J(a=t.input.charCodeAt(t.position+1))||i&&Q(a)))return!1;for(t.kind="scalar",t.result="",n=s=t.position,r=!1;0!==c;){if(58===c){if(J(a=t.input.charCodeAt(t.position+1))||i&&Q(a))break}else if(35===c){if(J(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&mt(t)||i&&Q(c))break;if($(c)){if(o=t.line,l=t.lineStart,h=t.lineIndent,ft(t,!1,-1),t.lineIndent>=e){r=!0,c=t.input.charCodeAt(t.position);continue}t.position=s,t.line=o,t.lineStart=l,t.lineIndent=h;break}}r&&(dt(t,n,s,!1),xt(t,t.line-o),n=s=t.position,r=!1),Z(c)||(s=t.position+1),c=t.input.charCodeAt(++t.position)}return dt(t,n,s,!1),!!t.result||(t.kind=d,t.result=p,!1)}(t,u,1===a)&&(x=!0,null===t.tag&&(t.tag="?")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===f&&(x=l&&Rt(t,g))),null===t.tag)null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);else if("?"===t.tag){for(null!==t.result&&"scalar"!==t.kind&&lt(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),h=0,c=t.implicitTypes.length;h<c;h+=1)if((p=t.implicitTypes[h]).resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else if("!"!==t.tag){if(B.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,h=0,c=(d=t.typeMap.multi[t.kind||"fallback"]).length;h<c;h+=1)if(t.tag.slice(0,d[h].tag.length)===d[h].tag){p=d[h];break}p||lt(t,"unknown tag !<"+t.tag+">"),null!==t.result&&p.kind!==t.kind&&lt(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):lt(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||x}function At(t){var e,i,a,n,s=t.position,r=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);0!==(n=t.input.charCodeAt(t.position))&&(ft(t,!0,-1),n=t.input.charCodeAt(t.position),!(t.lineIndent>0||37!==n));){for(r=!0,n=t.input.charCodeAt(++t.position),e=t.position;0!==n&&!J(n);)n=t.input.charCodeAt(++t.position);for(a=[],(i=t.input.slice(e,t.position)).length<1&&lt(t,"directive name must not be less than one character in length");0!==n;){for(;Z(n);)n=t.input.charCodeAt(++t.position);if(35===n){do{n=t.input.charCodeAt(++t.position)}while(0!==n&&!$(n));break}if($(n))break;for(e=t.position;0!==n&&!J(n);)n=t.input.charCodeAt(++t.position);a.push(t.input.slice(e,t.position))}0!==n&&gt(t),B.call(ct,i)?ct[i](t,i,a):ht(t,'unknown document directive "'+i+'"')}ft(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,ft(t,!0,-1)):r&&lt(t,"directives end mark is expected"),yt(t,t.lineIndent-1,4,!1,!0),ft(t,!0,-1),t.checkLineBreaks&&U.test(t.input.slice(s,t.position))&&ht(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&mt(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,ft(t,!0,-1)):t.position<t.length-1&&lt(t,"end of the stream or a document separator is expected")}function wt(t,e){e=e||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var i=new rt(t,e),a=t.indexOf("\0");for(-1!==a&&(i.position=a,lt(i,"null byte is not allowed in input")),i.input+="\0";32===i.input.charCodeAt(i.position);)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)At(i);return i.documents}var Ct=function(t,e,i){null!==e&&"object"==typeof e&&void 0===i&&(i=e,e=null);var a=wt(t,i);if("function"!=typeof e)return a;for(var n=0,s=a.length;n<s;n+=1)e(a[n])},bt=function(t,e){var i=wt(t,e);if(0!==i.length){if(1===i.length)return i[0];throw new s("expected a single document in the stream, but found more")}},Ft=Object.prototype.toString,Tt=Object.prototype.hasOwnProperty,Mt=65279,kt={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},Dt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],St=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function It(t){var e,a,n;if(e=t.toString(16).toUpperCase(),t<=255)a="x",n=2;else if(t<=65535)a="u",n=4;else{if(!(t<=4294967295))throw new s("code point within a string may not be greater than 0xFFFFFFFF");a="U",n=8}return"\\"+a+i.repeat("0",n-e.length)+e}function Ht(t){this.schema=t.schema||Y,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=i.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=function(t,e){var i,a,n,s,r,o,l;if(null===e)return{};for(i={},n=0,s=(a=Object.keys(e)).length;n<s;n+=1)r=a[n],o=String(e[r]),"!!"===r.slice(0,2)&&(r="tag:yaml.org,2002:"+r.slice(2)),(l=t.compiledTypeMap.fallback[r])&&Tt.call(l.styleAliases,o)&&(o=l.styleAliases[o]),i[r]=o;return i}(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType='"'===t.quotingType?2:1,this.forceQuotes=t.forceQuotes||!1,this.replacer="function"==typeof t.replacer?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Ot(t,e){for(var a,n=i.repeat(" ",e),s=0,r=-1,o="",l=t.length;s<l;)-1===(r=t.indexOf("\n",s))?(a=t.slice(s),s=l):(a=t.slice(s,r+1),s=r+1),a.length&&"\n"!==a&&(o+=n),o+=a;return o}function Et(t,e){return"\n"+i.repeat(" ",t.indent*e)}function _t(t){return 32===t||9===t}function Nt(t){return 32<=t&&t<=126||161<=t&&t<=55295&&8232!==t&&8233!==t||57344<=t&&t<=65533&&t!==Mt||65536<=t&&t<=1114111}function zt(t){return Nt(t)&&t!==Mt&&13!==t&&10!==t}function Pt(t,e,i){var a=zt(t),n=a&&!_t(t);return(i?a:a&&44!==t&&91!==t&&93!==t&&123!==t&&125!==t)&&35!==t&&!(58===e&&!n)||zt(e)&&!_t(e)&&35===t||58===e&&n}function jt(t,e){var i,a=t.charCodeAt(e);return a>=55296&&a<=56319&&e+1<t.length&&(i=t.charCodeAt(e+1))>=56320&&i<=57343?1024*(a-55296)+i-56320+65536:a}function Wt(t){return/^\n* /.test(t)}function Yt(t,e,i,a,n){t.dump=function(){if(0===e.length)return 2===t.quotingType?'""':"''";if(!t.noCompatMode&&(-1!==Dt.indexOf(e)||St.test(e)))return 2===t.quotingType?'"'+e+'"':"'"+e+"'";var r=t.indent*Math.max(1,i),o=-1===t.lineWidth?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-r),l=a||t.flowLevel>-1&&i>=t.flowLevel;switch(function(t,e,i,a,n,s,r,o){var l,h,c=0,d=null,p=!1,u=!1,g=-1!==a,f=-1,m=Nt(h=jt(t,0))&&h!==Mt&&!_t(h)&&45!==h&&63!==h&&58!==h&&44!==h&&91!==h&&93!==h&&123!==h&&125!==h&&35!==h&&38!==h&&42!==h&&33!==h&&124!==h&&61!==h&&62!==h&&39!==h&&34!==h&&37!==h&&64!==h&&96!==h&&function(t){return!_t(t)&&58!==t}(jt(t,t.length-1));if(e||r)for(l=0;l<t.length;c>=65536?l+=2:l++){if(!Nt(c=jt(t,l)))return 5;m=m&&Pt(c,d,o),d=c}else{for(l=0;l<t.length;c>=65536?l+=2:l++){if(10===(c=jt(t,l)))p=!0,g&&(u=u||l-f-1>a&&" "!==t[f+1],f=l);else if(!Nt(c))return 5;m=m&&Pt(c,d,o),d=c}u=u||g&&l-f-1>a&&" "!==t[f+1]}return p||u?i>9&&Wt(t)?5:r?2===s?5:2:u?4:3:!m||r||n(t)?2===s?5:2:1}(e,l,t.indent,o,(function(e){return function(t,e){var i,a;for(i=0,a=t.implicitTypes.length;i<a;i+=1)if(t.implicitTypes[i].resolve(e))return!0;return!1}(t,e)}),t.quotingType,t.forceQuotes&&!a,n)){case 1:return e;case 2:return"'"+e.replace(/'/g,"''")+"'";case 3:return"|"+Bt(e,t.indent)+Vt(Ot(e,r));case 4:return">"+Bt(e,t.indent)+Vt(Ot(function(t,e){for(var i,a,n,s=/(\n+)([^\n]*)/g,r=(n=-1!==(n=t.indexOf("\n"))?n:t.length,s.lastIndex=n,Ut(t.slice(0,n),e)),o="\n"===t[0]||" "===t[0];a=s.exec(t);){var l=a[1],h=a[2];i=" "===h[0],r+=l+(o||i||""===h?"":"\n")+Ut(h,e),o=i}return r}(e,o),r));case 5:return'"'+function(t){for(var e,i="",a=0,n=0;n<t.length;a>=65536?n+=2:n++)a=jt(t,n),!(e=kt[a])&&Nt(a)?(i+=t[n],a>=65536&&(i+=t[n+1])):i+=e||It(a);return i}(e)+'"';default:throw new s("impossible error: invalid scalar style")}}()}function Bt(t,e){var i=Wt(t)?String(e):"",a="\n"===t[t.length-1];return i+(!a||"\n"!==t[t.length-2]&&"\n"!==t?a?"":"-":"+")+"\n"}function Vt(t){return"\n"===t[t.length-1]?t.slice(0,-1):t}function Ut(t,e){if(""===t||" "===t[0])return t;for(var i,a,n=/ [^ ]/g,s=0,r=0,o=0,l="";i=n.exec(t);)(o=i.index)-s>e&&(a=r>s?r:o,l+="\n"+t.slice(s,a),s=a+1),r=o;return l+="\n",t.length-s>e&&r>s?l+=t.slice(s,r)+"\n"+t.slice(r+1):l+=t.slice(s),l.slice(1)}function Xt(t,e,i,a){var n,s,r,o="",l=t.tag;for(n=0,s=i.length;n<s;n+=1)r=i[n],t.replacer&&(r=t.replacer.call(i,String(n),r)),(qt(t,e+1,r,!0,!0,!1,!0)||void 0===r&&qt(t,e+1,null,!0,!0,!1,!0))&&(a&&""===o||(o+=Et(t,e)),t.dump&&10===t.dump.charCodeAt(0)?o+="-":o+="- ",o+=t.dump);t.tag=l,t.dump=o||"[]"}function Gt(t,e,i){var a,n,r,o,l,h;for(r=0,o=(n=i?t.explicitTypes:t.implicitTypes).length;r<o;r+=1)if(((l=n[r]).instanceOf||l.predicate)&&(!l.instanceOf||"object"==typeof e&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(i?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(h=t.styleMap[l.tag]||l.defaultStyle,"[object Function]"===Ft.call(l.represent))a=l.represent(e,h);else{if(!Tt.call(l.represent,h))throw new s("!<"+l.tag+'> tag resolver accepts not "'+h+'" style');a=l.represent[h](e,h)}t.dump=a}return!0}return!1}function qt(t,e,i,a,n,r,o){t.tag=null,t.dump=i,Gt(t,i,!1)||Gt(t,i,!0);var l,h=Ft.call(t.dump),c=a;a&&(a=t.flowLevel<0||t.flowLevel>e);var d,p,u="[object Object]"===h||"[object Array]"===h;if(u&&(p=-1!==(d=t.duplicates.indexOf(i))),(null!==t.tag&&"?"!==t.tag||p||2!==t.indent&&e>0)&&(n=!1),p&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(u&&p&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),"[object Object]"===h)a&&0!==Object.keys(t.dump).length?(function(t,e,i,a){var n,r,o,l,h,c,d="",p=t.tag,u=Object.keys(i);if(!0===t.sortKeys)u.sort();else if("function"==typeof t.sortKeys)u.sort(t.sortKeys);else if(t.sortKeys)throw new s("sortKeys must be a boolean or a function");for(n=0,r=u.length;n<r;n+=1)c="",a&&""===d||(c+=Et(t,e)),l=i[o=u[n]],t.replacer&&(l=t.replacer.call(i,o,l)),qt(t,e+1,o,!0,!0,!0)&&((h=null!==t.tag&&"?"!==t.tag||t.dump&&t.dump.length>1024)&&(t.dump&&10===t.dump.charCodeAt(0)?c+="?":c+="? "),c+=t.dump,h&&(c+=Et(t,e)),qt(t,e+1,l,!0,h)&&(t.dump&&10===t.dump.charCodeAt(0)?c+=":":c+=": ",d+=c+=t.dump));t.tag=p,t.dump=d||"{}"}(t,e,t.dump,n),p&&(t.dump="&ref_"+d+t.dump)):(function(t,e,i){var a,n,s,r,o,l="",h=t.tag,c=Object.keys(i);for(a=0,n=c.length;a<n;a+=1)o="",""!==l&&(o+=", "),t.condenseFlow&&(o+='"'),r=i[s=c[a]],t.replacer&&(r=t.replacer.call(i,s,r)),qt(t,e,s,!1,!1)&&(t.dump.length>1024&&(o+="? "),o+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),qt(t,e,r,!1,!1)&&(l+=o+=t.dump));t.tag=h,t.dump="{"+l+"}"}(t,e,t.dump),p&&(t.dump="&ref_"+d+" "+t.dump));else if("[object Array]"===h)a&&0!==t.dump.length?(t.noArrayIndent&&!o&&e>0?Xt(t,e-1,t.dump,n):Xt(t,e,t.dump,n),p&&(t.dump="&ref_"+d+t.dump)):(function(t,e,i){var a,n,s,r="",o=t.tag;for(a=0,n=i.length;a<n;a+=1)s=i[a],t.replacer&&(s=t.replacer.call(i,String(a),s)),(qt(t,e,s,!1,!1)||void 0===s&&qt(t,e,null,!1,!1))&&(""!==r&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=o,t.dump="["+r+"]"}(t,e,t.dump),p&&(t.dump="&ref_"+d+" "+t.dump));else{if("[object String]"!==h){if("[object Undefined]"===h)return!1;if(t.skipInvalid)return!1;throw new s("unacceptable kind of an object to dump "+h)}"?"!==t.tag&&Yt(t,t.dump,e,r,c)}null!==t.tag&&"?"!==t.tag&&(l=encodeURI("!"===t.tag[0]?t.tag.slice(1):t.tag).replace(/!/g,"%21"),l="!"===t.tag[0]?"!"+l:"tag:yaml.org,2002:"===l.slice(0,18)?"!!"+l.slice(18):"!<"+l+">",t.dump=l+" "+t.dump)}return!0}function Kt(t,e){var i,a,n=[],s=[];for($t(t,n,s),i=0,a=s.length;i<a;i+=1)e.duplicates.push(n[s[i]]);e.usedDuplicates=new Array(a)}function $t(t,e,i){var a,n,s;if(null!==t&&"object"==typeof t)if(-1!==(n=e.indexOf(t)))-1===i.indexOf(n)&&i.push(n);else if(e.push(t),Array.isArray(t))for(n=0,s=t.length;n<s;n+=1)$t(t[n],e,i);else for(n=0,s=(a=Object.keys(t)).length;n<s;n+=1)$t(t[a[n]],e,i)}function Zt(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Jt=d,Qt=g,te=R,ee=T,ie=M,ae=Y,ne=bt,se=Ct,re=function(t,e){var i=new Ht(e=e||{});i.noRefs||Kt(t,i);var a=t;return i.replacer&&(a=i.replacer.call({"":a},"",a)),qt(i,0,a,!0,!0)?i.dump+"\n":""},oe=s,le={binary:O,float:F,map:x,null:v,pairs:P,set:W,timestamp:S,bool:L,int:w,merge:I,omap:N,seq:m,str:f},he=Zt("safeLoad","load"),ce=Zt("safeLoadAll","loadAll"),de=Zt("safeDump","dump"),pe={Type:Jt,Schema:Qt,FAILSAFE_SCHEMA:te,JSON_SCHEMA:ee,CORE_SCHEMA:ie,DEFAULT_SCHEMA:ae,load:ne,loadAll:se,dump:re,YAMLException:oe,types:le,safeLoad:he,safeLoadAll:ce,safeDump:de};t.CORE_SCHEMA=ie,t.DEFAULT_SCHEMA=ae,t.FAILSAFE_SCHEMA=te,t.JSON_SCHEMA=ee,t.Schema=Qt,t.Type=Jt,t.YAMLException=oe,t.default=pe,t.dump=re,t.load=ne,t.loadAll=se,t.safeDump=de,t.safeLoad=he,t.safeLoadAll=ce,t.types=le,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).jsyaml={});class i{constructor(t,e){this.smallCanvas=new s(t,e);var i=document.getElementById(t),a=i.clientWidth,n=i.clientHeight,r=i.parentElement;i.remove(),this.canvas=document.createElement("canvas"),this.canvas.id=t,this.canvas.className="main-canvas",this.canvas.width=a,this.canvas.height=n,r.appendChild(this.canvas),this.offsetX=25,this.offsetY=25,this.marginTop=10,this.xPosAt=0,this.stepsX=0,this.isTranslateCenter=!1,this.ctx=this.canvas.getContext("2d"),this.shadowLinesInGraphNumber=5,this.shadowLineGap=(this.canvas.height-(this.offsetY+this.marginTop))/this.shadowLinesInGraphNumber,this.xTranslate=0,this.yTranslate=this.canvas.height-this.offsetY,this.titleText=e,this.data=new Array(2),this.subscribeData=new Array(2),this.currentIndexAt=0,this.startMetersIndex=0,this.endMetersIndex=0,this.lineColorMainData="rgb(72, 109, 232)",this.lineColorComparedData="rgb(197, 83, 5)",this.fillColorMainData="rgba(72, 109, 232, 0.3)",this.fillColorComparedData="rgba(197, 83, 5, 0.3)",this.lineWidth=1,this.boxWidth=38,"Speed"==this.titleText&&(this.boxWidth=54),"Gear"==this.titleText&&(this.boxWidth=110),this.dataMinMax={oldMin:99999,oldMax:-99999,newMin:99999,newMax:-99999},this.yMin=9999,this.yMax=-9999}clear(){this.data=new Array(2),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.closePath(),this.startMetersIndex=0,this.endMetersIndex=0}resetStartEndMeters(){this.setStartEndIndex(0,null!=this.data[0]?this.data[0].length:this.data[1].length)}setLap(t,e){t>=2?console.log("Error: You Cannot Set More Than 2 data Laps!"):(this.data[t]=e,this.startMetersIndex=0,this.endMetersIndex=null!=this.data[0]?this.data[0].length:this.data[1].length)}setSubscribeData(t,e){t>=2?console.log("Error: You Cannot Set More Than 2 data Laps!"):this.subscribeData[t]=e}setMinMaxData(t,e,i,a){this.dataMinMax.oldMin>t&&(this.dataMinMax.oldMin=t),this.dataMinMax.oldMax<e&&(this.dataMinMax.oldMax=e),this.dataMinMax.newMin>i&&(this.dataMinMax.newMin=i),this.dataMinMax.newMax<a&&(this.dataMinMax.newMax=a)}setStartEndIndex(t,e){t=t<0?0:t,this.startMetersIndex=t,this.endMetersIndex=e,this.draw()}setIsTranslateCenter(t){this.isTranslateCenter=t,this.xTranslate=0,this.yTranslate=(this.canvas.height-this.offsetY)/2}getCanvas(){return this.canvas}getCurrentIndexAt(){return this.currentIndexAt}getOffsetX(){return this.offsetX}getOffsetY(){return this.offsetY}drawTextTitle(){this.ctx.beginPath(),this.ctx.font="bold 20px Arial",this.ctx.fillStyle="rgba(255, 255, 255, 0.5)",this.ctx.textAlign="left",this.ctx.fillText(this.titleText,29,25)}drawBaseLines(){this.ctx.strokeStyle="rgba(100, 100, 100, 0.2)";var t=this.canvas.height-this.offsetY+this.marginTop;this.ctx.beginPath(),this.ctx.lineWidth=1;for(var e=this.marginTop;e<t;e+=this.shadowLineGap)this.ctx.moveTo(this.offsetX,e),this.ctx.lineTo(this.canvas.width,e);this.ctx.stroke(),this.ctx.beginPath(),this.ctx.strokeStyle="rgba(255, 255, 255, 0.8)",this.ctx.moveTo(this.offsetX,this.marginTop),this.ctx.lineTo(this.offsetX,this.canvas.height-this.offsetY),this.ctx.stroke()}drawBaseLinesValues(){this.ctx.fillStyle="rgba(255, 255, 255, 0.8)",this.ctx.textAlign="center",this.ctx.font="bold 10px Arial";var t=this.canvas.height-this.offsetY+this.marginTop;switch(this.titleText){case"Delta":this.ctx.beginPath(),this.ctx.fillText("0.0s",12,2+(this.canvas.height-this.offsetY)/2);break;case"Throttle":case"Brake":for(var e=100,i=e/this.shadowLinesInGraphNumber,a=this.marginTop;a<t;a+=this.shadowLineGap)this.ctx.beginPath(),this.ctx.fillText(Math.round(e),12,a+2),e-=i;break;case"Speed":var n=320;for(i=n/this.shadowLinesInGraphNumber,a=this.marginTop;a<t;a+=this.shadowLineGap)this.ctx.beginPath(),this.ctx.fillText(parseInt(n.toFixed(0)),12,a+2),n-=i;break;case"Gear":var s=this.dataMinMax.oldMax;for(i=s/this.shadowLinesInGraphNumber,a=this.marginTop;a<t;a+=this.shadowLineGap)this.ctx.beginPath(),this.ctx.fillText(Math.floor(s),12,a+2),s-=i;break;case"CFSRideHeight":case"Left front":case"Right front":case"Left rear":case"Right rear":this.ctx.font="bold 8px Arial";var r=this.dataMinMax.oldMax;for(i=r/this.shadowLinesInGraphNumber,a=this.marginTop;a<t;a+=this.shadowLineGap)this.ctx.beginPath(),this.ctx.fillText(r.toFixed(1),12,a+2),r-=i}}drawCircleOnHoveredPoint(t){this.ctx.beginPath(),this.ctx.fillStyle=0==t?this.lineColorMainData:this.lineColorComparedData;var e=this.currentIndexAt,i=-(this.canvas.height-(this.offsetY+this.marginTop));this.isTranslateCenter&&(i/=2);var a=0;a="CFSRideHeight"==this.titleText||"Left front"==this.titleText||"Right front"==this.titleText||"Left rear"==this.titleText||"Right rear"==this.titleText||"Gear"==this.titleText?this.data[t][e]/this.dataMinMax.oldMax*i:this.data[t][e]*i,this.ctx.arc(this.xPosAt+this.offsetX,a,4,0,2*Math.PI),this.ctx.fill()}drawLineOnHover(){this.ctx.beginPath(),this.ctx.save(),this.ctx.translate(-this.xTranslate,-this.yTranslate),this.ctx.strokeStyle="rgba(255, 255, 255, 1.0)",this.ctx.lineWidth=1,this.ctx.moveTo(this.xPosAt+this.offsetX,0),this.ctx.lineTo(this.xPosAt+this.offsetX,this.canvas.height-this.offsetY),this.ctx.stroke(),this.ctx.restore()}drawBoxData(t){var e=this.currentIndexAt;this.ctx.beginPath(),this.ctx.fillStyle=0==t?this.lineColorMainData:this.lineColorComparedData;var i=this.xPosAt+this.offsetX+this.marginTop;i>this.canvas.width/2&&(i-=this.boxWidth+10);var a=-this.canvas.height/2;this.isTranslateCenter&&(a=0),1==t&&(a+=17),this.ctx.fillRect(i,a,this.boxWidth,16),this.ctx.beginPath(),this.ctx.font="12px Arial",this.ctx.fillStyle="rgba(255, 255, 255, 1.0)",this.ctx.textAlign="center";var n=this.extractOriginData(t,e);"Gear"==this.titleText&&(n+=" ("+this.subscribeData[t][e].toFixed(0)+" revs/min)"),this.ctx.fillText(n,i+this.boxWidth/2,a+12)}extractOriginData(t,e){switch(this.titleText){case"Delta":return null!=this.data[t][e]?this.data[t][e].toFixed(2)+"s":"0.00s";case"Throttle":case"Brake":return(100*this.data[t][e]).toFixed(0)+"%";case"Gear":return this.data[t][e];case"Speed":return Math.round(320*this.data[t][e])+"km/h";case"CFSRideHeight":case"Left front":case"Right front":case"Left rear":case"Right rear":return this.data[t][e].toFixed(2)+"mm";default:return this.data[t][e].toFixed(3)}}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawBaseLines(),this.drawTextTitle(),this.ctx.save(),this.ctx.translate(this.xTranslate,this.yTranslate),this.isTranslateCenter&&(this.ctx.beginPath(),this.ctx.strokeStyle="rgba(255, 255, 255, 0.8)",this.ctx.moveTo(this.offsetX,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.stroke()),this.ctx.lineWidth=this.lineWidth;for(var t=0,e=0;e<this.data.length;e++)if(null!=this.data[e]&&null!=this.data[e]){this.ctx.strokeStyle=0==e?this.lineColorMainData:this.lineColorComparedData,this.ctx.fillStyle=0==e?this.fillColorMainData:this.fillColorComparedData,this.ctx.beginPath(),t=Math.abs(this.startMetersIndex-this.endMetersIndex),this.stepsX=(this.canvas.width-this.offsetX)/t;var i=this.stepsX,a=0;if("CFSRideHeight"==this.titleText||"Left front"==this.titleText||"Right front"==this.titleText||"Left rear"==this.titleText||"Right rear"==this.titleText||"Gear"==this.titleText)var n=((this.dataMinMax.newMax-this.dataMinMax.newMin)*(this.data[e][o]-this.dataMinMax.oldMin)/(this.dataMinMax.oldMax-this.dataMinMax.oldMin)+this.dataMinMax.newMin)*-(this.canvas.height-(this.offsetY+this.marginTop));else n=this.data[e][this.startMetersIndex]*-(this.canvas.height-(this.offsetY+this.marginTop));var s=0;s=this.isTranslateCenter?-(this.canvas.height-(this.offsetY+this.marginTop))/2:-(this.canvas.height-(this.offsetY+this.marginTop)),this.ctx.moveTo(this.offsetX+a,n);for(var r=0,o=this.startMetersIndex+1;o<this.endMetersIndex;o++)r="CFSRideHeight"==this.titleText||"Left front"==this.titleText||"Right front"==this.titleText||"Left rear"==this.titleText||"Right rear"==this.titleText||"Gear"==this.titleText?this.data[e][o]/this.dataMinMax.oldMax*s:this.data[e][o]*s,this.ctx.lineTo(this.offsetX+i,r),null!=this.subscribeData[e]&&this.subscribeData[e][o]>0&&"Brake"==this.titleText&&this.ctx.fillRect(this.offsetX+i,0,this.stepsX,this.subscribeData[e][o]*s),a=i,n=r,i+=this.stepsX;this.ctx.stroke()}this.drawLineOnHover(),this.currentIndexAt=Math.round(this.xPosAt/(this.canvas.width-this.offsetX)*t)+this.startMetersIndex;for(e=0;e<this.data.length;e++)null!=this.data[e]&&null!=this.data[e]&&(this.drawCircleOnHoveredPoint(e),this.drawBoxData(e),this.smallCanvas.isCanvasValid&&(this.smallCanvas.putCurrentData(e,this.data[e][this.currentIndexAt]),null!=this.subscribeData[e]&&this.smallCanvas.putSubsCurrentData(e,this.subscribeData[e][this.currentIndexAt])));this.smallCanvas.isCanvasValid&&this.smallCanvas.draw(),this.ctx.restore(),this.drawBaseLinesValues()}}class a{constructor(t){this.LFtempL=new Float32Array(t),this.LFtempM=new Float32Array(t),this.LFtempR=new Float32Array(t),this.RFtempL=new Float32Array(t),this.RFtempM=new Float32Array(t),this.RFtempR=new Float32Array(t),this.LRtempL=new Float32Array(t),this.LRtempM=new Float32Array(t),this.LRtempR=new Float32Array(t),this.RRtempL=new Float32Array(t),this.RRtempM=new Float32Array(t),this.RRtempR=new Float32Array(t),this.index=0,this.size=0}updateIndex(){this.index+=1,this.size+=1}addLFtempL(t){this.LFtempL[this.index]=t}addLFtempM(t){this.LFtempM[this.index]=t}addLFtempR(t){this.LFtempR[this.index]=t}addRFtempL(t){this.RFtempL[this.index]=t}addRFtempM(t){this.RFtempM[this.index]=t}addRFtempR(t){this.RFtempR[this.index]=t}addLRtempL(t){this.LRtempL[this.index]=t}addLRtempM(t){this.LRtempM[this.index]=t}addLRtempR(t){this.LRtempR[this.index]=t}addRRtempL(t){this.RRtempL[this.index]=t}addRRtempM(t){this.RRtempM[this.index]=t}addRRtempR(t){this.RRtempR[this.index]=t}print(){console.log("----- Left Front -----"),console.log(this.LFtempL),console.log(this.LFtempM),console.log(this.LFtempR),console.log("----- Right Front -----"),console.log(this.RFtempL),console.log(this.RFtempM),console.log(this.RFtempR)}}class n{constructor(t){this.lapNumber=t,this.airTemp=0,this.trackTemp=0,this.airDensity=0,this.airPressure=0,this.windSpeed=0;var e=35e3;this.LapDistPct=new Float32Array(e),this.lapDistMeters=new Float32Array(e),this.lapDistMetersInt=new Uint32Array(e),this.lapCurrentTimeSeconds=new Float32Array(e),this.throttle=new Float32Array(e),this.brake=new Float32Array(e),this.absActive=new Uint8Array(e),this.speedKmh=new Float32Array(e),this.gear=new Int32Array(e),this.rpm=new Float32Array(e),this.minGear=99,this.maxGear=-99,this.steer=new Float32Array(e),this.windDir=new Float32Array(e),this.windVel=new Float32Array(e),this.fuelLevel=new Float32Array(e),this.yawNorth=new Float32Array(e),this.tires=new a(e),this.cFSRrideHeight=new Float32Array(e),this.minCFSRideHeight=9999,this.maxCFSRideHeight=-9999,this.lFRideHeight=new Float32Array(e),this.minLFRideHeight=9999,this.maxLFRideHeight=-9999,this.rFRideHeight=new Float32Array(e),this.minRFRideHeight=9999,this.maxRFRideHeight=-9999,this.lRRideHeight=new Float32Array(e),this.minLRRideHeight=9999,this.maxLRRideHeight=-9999,this.rRRideHeight=new Float32Array(e),this.minRRRideHeight=9999,this.maxRRRideHeight=-9999,this.trackCoordinate=new l(t,e),this.lapTimeStr="",this.index=0,this.size=0,this.dataLapToCompare=null}setDataLapToCompare(t){this.dataLapToCompare=t}runSyncLaps(){if(null==this.dataLapToCompare)return console.log("No data lap to compare!"),this;var t=new Array(2);t[0]=new n(1),t[1]=new n(2);for(var e=0;e<this.size;e++)for(var i=2;i<this.dataLapToCompare.size;){if(this.lapDistMetersInt[e]==this.dataLapToCompare.lapDistMetersInt[i]){var a=this.dataLapToCompare,s=Math.abs(this.lapDistMeters[e]-a.lapDistMeters[i]),r=Math.abs(this.lapDistMeters[e]-a.lapDistMeters[i+1]),o=Math.abs(this.lapDistMeters[e]-a.lapDistMeters[i-1]),l=Math.abs(this.lapDistMeters[e]-a.lapDistMeters[i+2]),h=Math.abs(this.lapDistMeters[e]-a.lapDistMeters[i-2]),c=0;s<=r&&s<=o&&(c=0),r<=s&&r<=o&&(c=1,s=r),o<=s&&o<=r&&(c=-1,s=o),l<=s&&l<=h&&(c=2,s=l),h<=s&&h<=l&&(c=-2,s=h),i+=c;var d=this.lapCurrentTimeSeconds[e]-a.lapCurrentTimeSeconds[i];t[0].addLapCurrentTimeSeconds(d),t[1].addLapCurrentTimeSeconds(0),t[0].addLapDistPct(this.LapDistPct[e]),t[0].addLapDistMeters(this.lapDistMeters[e]),t[0].addLapDistMetersInt(this.lapDistMetersInt[e]),t[0].addThrottle(this.throttle[e]),t[0].addBrake(this.brake[e]),t[0].addAbsActive(this.absActive[e]),t[0].addSpeedKmh(this.speedKmh[e]),t[0].addGear(this.gear[e]),t[0].addRpm(this.rpm[e]),t[0].addSteer(this.steer[e]),t[0].addWindDir(this.windDir[e]),t[0].addWindVel(this.windVel[e]),t[0].addFuelLevel(this.fuelLevel[e]),t[0].addYawNorth(this.yawNorth[e]),t[0].tires.addLFtempL(this.tires.LFtempL[e]),t[0].tires.addLFtempM(this.tires.LFtempM[e]),t[0].tires.addLFtempR(this.tires.LFtempR[e]),t[0].tires.addRFtempL(this.tires.RFtempL[e]),t[0].tires.addRFtempM(this.tires.RFtempM[e]),t[0].tires.addRFtempR(this.tires.RFtempR[e]),t[0].tires.addLRtempL(this.tires.LRtempL[e]),t[0].tires.addLRtempM(this.tires.LRtempM[e]),t[0].tires.addLRtempR(this.tires.LRtempR[e]),t[0].tires.addRRtempL(this.tires.RRtempL[e]),t[0].tires.addRRtempM(this.tires.RRtempM[e]),t[0].tires.addRRtempR(this.tires.RRtempR[e]),t[0].addcFSRrideHeight(this.cFSRrideHeight[e]),t[0].addFrontRideHeight(this.lFRideHeight[e],this.rFRideHeight[e]),t[0].addRearRideHeight(this.lRRideHeight[e],this.rRRideHeight[e]),t[0].trackCoordinate.addLat(this.trackCoordinate.lat[e]),t[0].trackCoordinate.addLon(this.trackCoordinate.lon[e]),t[1].addLapDistPct(a.LapDistPct[i]),t[1].addLapDistMeters(a.lapDistMeters[i]),t[1].addLapDistMetersInt(a.lapDistMetersInt[i]),t[1].addThrottle(a.throttle[i]),t[1].addBrake(a.brake[i]),t[1].addAbsActive(a.absActive[e]),t[1].addSpeedKmh(a.speedKmh[i]),t[1].addGear(a.gear[i]),t[1].addRpm(a.rpm[i]),t[1].addSteer(a.steer[i]),t[1].addWindDir(a.windDir[i]),t[1].addWindVel(a.windVel[i]),t[1].addFuelLevel(a.fuelLevel[i]),t[1].addYawNorth(a.yawNorth[i]),t[1].tires.addLFtempL(a.tires.LFtempL[e]),t[1].tires.addLFtempM(a.tires.LFtempM[e]),t[1].tires.addLFtempR(a.tires.LFtempR[e]),t[1].tires.addRFtempL(a.tires.RFtempL[e]),t[1].tires.addRFtempM(a.tires.RFtempM[e]),t[1].tires.addRFtempR(a.tires.RFtempR[e]),t[1].tires.addLRtempL(a.tires.LRtempL[e]),t[1].tires.addLRtempM(a.tires.LRtempM[e]),t[1].tires.addLRtempR(a.tires.LRtempR[e]),t[1].tires.addRRtempL(a.tires.RRtempL[e]),t[1].tires.addRRtempM(a.tires.RRtempM[e]),t[1].tires.addRRtempR(a.tires.RRtempR[e]),t[1].addcFSRrideHeight(a.cFSRrideHeight[i]),t[1].addFrontRideHeight(a.lFRideHeight[i],a.rFRideHeight[i]),t[1].addRearRideHeight(a.lRRideHeight[i],a.rRRideHeight[i]),t[1].trackCoordinate.addLat(a.trackCoordinate.lat[i]),t[1].trackCoordinate.addLon(a.trackCoordinate.lon[i]),t[0].updateIndex(),t[0].updateSize(),t[0].trackCoordinate.updateIndex(),t[0].trackCoordinate.updateSize(),t[0].tires.updateIndex(),t[1].updateIndex(),t[1].updateSize(),t[1].trackCoordinate.updateIndex(),t[1].trackCoordinate.updateSize(),t[1].tires.updateIndex();break}i++}for(e=0;e<t.length;e++)t[e].optimizeArraySize();return t}getDataLapToCompare(){return this.dataLapToCompare}getLapTimeStr(){return this.lapTimeStr}getAirTemp(){return this.airTemp}getTrackTemp(){return this.trackTemp}getLapDistPctArray(){return this.LapDistPct}getLapCurrentTimeSecondsArray(){return this.lapCurrentTimeSeconds}getLapCurrentTimeSeconds(t){return this.lapCurrentTimeSeconds[t]}getThrottleArray(){return this.throttle}getBrakeArray(){return this.brake}getAbsAcvtiveArray(){return this.absActive}getSpeedKmhArray(){return this.speedKmh}getGearArray(){return this.gear}getRpmArray(){return this.rpm}getSteerArray(){return this.steer}getWindDirArray(){return this.windDir}getWindVelArray(){return this.windVel}getFuelLevelArray(){return this.fuelLevel}getYawNorthArray(){return this.yawNorth}getTires(){return this.tires}getCFSRrideHeightArray(){return this.cFSRrideHeight}getLFRideHeightArray(){return this.lFRideHeight}getRFRideHeightArray(){return this.rFRideHeight}getLRRideHeightArray(){return this.lRRideHeight}getRRRideHeightArray(){return this.rRRideHeight}getLapDistMetersArray(){return this.lapDistMeters}getLapDistMetersIntArray(){return this.lapDistMetersInt}getThrottle(t){return this.throttle[t]}getLapDistMeters(t){return this.lapDistMeters[t]}getLapDistMetersInt(t){return this.lapDistMetersInt[t]}updateIndex(){this.index+=1}updateSize(){this.size+=1}optimizeArraySize(){this.LapDistPct=this.LapDistPct.slice(0,this.size),this.lapDistMeters=this.lapDistMeters.slice(0,this.size),this.lapDistMetersInt=this.lapDistMetersInt.slice(0,this.size),this.lapCurrentTimeSeconds=this.lapCurrentTimeSeconds.slice(0,this.size),this.throttle=this.throttle.slice(0,this.size),this.brake=this.brake.slice(0,this.size),this.absActive=this.absActive.slice(0,this.size),this.speedKmh=this.speedKmh.slice(0,this.size),this.gear=this.gear.slice(0,this.size),this.rpm=this.rpm.slice(0,this.size),this.steer=this.steer.slice(0,this.size),this.windDir=this.windDir.slice(0,this.size),this.windVel=this.windVel.slice(0,this.size),this.fuelLevel=this.fuelLevel.slice(0,this.size),this.yawNorth=this.yawNorth.slice(0,this.size),this.tires.LFtempL=this.tires.LFtempL.slice(0,this.size),this.tires.LFtempM=this.tires.LFtempM.slice(0,this.size),this.tires.LFtempR=this.tires.LFtempR.slice(0,this.size),this.tires.RFtempL=this.tires.RFtempL.slice(0,this.size),this.tires.RFtempM=this.tires.RFtempM.slice(0,this.size),this.tires.RFtempR=this.tires.RFtempR.slice(0,this.size),this.tires.LRtempL=this.tires.LRtempL.slice(0,this.size),this.tires.LRtempM=this.tires.LRtempM.slice(0,this.size),this.tires.LRtempR=this.tires.LRtempR.slice(0,this.size),this.tires.RRtempL=this.tires.RRtempL.slice(0,this.size),this.tires.RRtempM=this.tires.RRtempM.slice(0,this.size),this.tires.RRtempR=this.tires.RRtempR.slice(0,this.size),this.cFSRrideHeight=this.cFSRrideHeight.slice(0,this.size),this.lFRideHeight=this.lFRideHeight.slice(0,this.size),this.rFRideHeight=this.rFRideHeight.slice(0,this.size),this.lRRideHeight=this.lRRideHeight.slice(0,this.size),this.rRRideHeight=this.rRRideHeight.slice(0,this.size),this.trackCoordinate.lat=this.trackCoordinate.lat.slice(0,this.size),this.trackCoordinate.lon=this.trackCoordinate.lon.slice(0,this.size)}setAirTemp(t){this.airTemp=t}setTrackTemp(t){this.trackTemp=t}setAirDensity(t){this.airDensity=t}setAirPressure(t){this.airPressure=t}addLapCurrentTimeSeconds(t){this.lapCurrentTimeSeconds[this.index]=t}addLapDistPct(t){this.LapDistPct[this.index]=t}addLapDistMeters(t){this.lapDistMeters[this.index]=t}addLapDistMetersInt(t){this.lapDistMetersInt[this.index]=t}addThrottle(t){this.throttle[this.index]=t}addBrake(t){this.brake[this.index]=t}addAbsActive(t){this.absActive[this.index]=t}addSpeedKmh(t){this.speedKmh[this.index]=t}addGear(t){this.gear[this.index]=t,t<this.minGear&&(this.minGear=t),t>this.maxGear&&(this.maxGear=t)}addRpm(t){this.rpm[this.index]=t}addSteer(t){this.steer[this.index]=t}addWindDir(t){this.windDir[this.index]=t}addWindVel(t){this.windVel[this.index]=t}addFuelLevel(t){this.fuelLevel[this.index]=t}addYawNorth(t){this.yawNorth[this.index]=t}addcFSRrideHeight(t){this.cFSRrideHeight[this.index]=t,this.minCFSRideHeight>t&&(this.minCFSRideHeight=t),this.maxCFSRideHeight<t&&(this.maxCFSRideHeight=t)}addFrontRideHeight(t,e){this.lFRideHeight[this.index]=t,this.rFRideHeight[this.index]=e,this.minLFRideHeight>t&&(this.minLFRideHeight=t),this.maxLFRideHeight<t&&(this.maxLFRideHeight=t),this.minRFRideHeight>e&&(this.minRFRideHeight=e),this.maxRFRideHeight<e&&(this.maxRFRideHeight=e)}addRearRideHeight(t,e){this.lRRideHeight[this.index]=t,this.rRRideHeight[this.index]=e,this.minLRRideHeight>t&&(this.minLRRideHeight=t),this.maxLRRideHeight<t&&(this.maxLRRideHeight=t),this.minRRRideHeight>e&&(this.minRRRideHeight=e),this.maxRRRideHeight<e&&(this.maxRRRideHeight=e)}setLapTimeSeconds(t){var e=this.lapCurrentTimeSeconds[this.size-1],i=Math.floor(e/60),a=e%60,n="";a<10&&(n="0"),this.lapTimeStr=i+":"+n+a.toFixed(3)}}class s{constructor(t,e){var i="small-"+t;if(this.isCanvasValid=!0,null!=document.getElementById(i)){this.titleText=e;var a=document.getElementById(i),n=a.clientWidth,s=a.clientHeight,r=a.parentElement;a.remove(),this.canvas=document.createElement("canvas"),this.canvas.id=i,this.canvas.className="small-canvas",this.canvas.width=n,this.canvas.height=s,r.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.currentData=new Array(2),this.subsCurrentData=new Array(2),this.lineColorMainData="rgb(72, 109, 232)",this.lineColorComparedData="rgb(197, 83, 5)"}else this.isCanvasValid=!1}putCurrentData(t,e){t>=2?console.log("Error: Could not add more than 2 data in small canvas!"):this.currentData[t]=e}putSubsCurrentData(t,e){t>=2?console.log("Error: Could not add more than 2 data in small canvas!"):this.subsCurrentData[t]=e}drawThrottleBrake(t){var e=0==t?28:54,i=this.canvas.height-55;this.ctx.beginPath(),this.ctx.fillStyle="Throttle"==this.titleText?"rgba(0, 165, 0, 1.0)":"rgba(165, 0, 0, 1.0)","Throttle"==this.titleText?this.ctx.fillStyle="rgba(0, 165, 0, 1.0)":this.ctx.fillStyle=1==this.subsCurrentData[t]?"rgba(255, 255, 255, 0.8)":"rgba(165, 0, 0, 1.0)",this.ctx.fillRect(e,20+i,20,-i*this.currentData[t]),this.ctx.beginPath(),this.ctx.lineWidth=2,this.ctx.strokeStyle=0==t?this.lineColorMainData:this.lineColorComparedData,this.ctx.strokeRect(e,20,20,i),this.ctx.beginPath(),this.ctx.fillStyle=0==t?this.lineColorMainData:this.lineColorComparedData,this.ctx.rect(e,this.canvas.height-30,20,10),this.ctx.fill()}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var t=0;t<this.currentData.length;t++)if(null!=this.currentData[t])switch(this.titleText){case"Throttle":case"Brake":this.drawThrottleBrake(t)}}}class r{constructor(t){this.file=t,this.header={},this.diskHeader={},this.varsHeader=[],this.dataLaps=null,this.data=null,this.sessionInfoBytes=null,this.sessionInfo={}}getHeader(){return this.header}getDiskHeader(){return this.diskHeader}getVarsHeader(){return this.varsHeader}getData(){return this.data}getDataLaps(){return this.dataLaps}getOneDataLap(t){return this.dataLaps[t]}isValid(){return null!=this.file}read(){if(this.isValid()){var t=this;return new Promise((function(e,i){var a=new FileReader;a.onloadend=function(i){t.extractData(i.target.result),e(i.target.result)},a.onerror=function(t){i(t.target.error.message)},a.readAsArrayBuffer(t.file)}))}}extractData(t){var e=new DataView(t,0,112);this.header.version=e.getUint32(0,!0),this.header.status=e.getUint32(4,!0),this.header.tick_rate=e.getUint32(8,!0),this.header.session_info_update=e.getUint32(12,!0),this.header.session_info_length=e.getUint32(16,!0),this.header.session_info_offset=e.getUint32(20,!0),this.header.num_vars=e.getUint32(24,!0),this.header.var_header_offset=e.getUint32(28,!0),this.header.num_buf=e.getUint32(32,!0),this.header.buf_len=e.getUint32(36,!0),this.header.buf_offset=e.getUint32(52,!0);var i=new DataView(t,112,32);this.diskHeader.start_date=i.getFloat64(0,!0),this.diskHeader.start_time=i.getFloat64(8,!0),this.diskHeader.end_time=i.getFloat64(16,!0),this.diskHeader.lap_count=i.getUint32(24,!0),this.diskHeader.record_count=i.getUint32(28,!0);for(var a=new DataView(t,this.header.var_header_offset,144*this.header.num_vars),n=0,s=0;s<this.header.num_vars;s++)this.varsHeader.push({type:a.getUint32(n+0,!0),offset:a.getUint32(n+4,!0),count:a.getUint32(n+8,!0),count_as_time:a.getUint8(n+12,!0),name:this.convertToString(a,n+16,n+16+32),desc:null,unit:null}),n+=144;this.sessionInfoBytes=new Uint8Array(t.slice(this.header.session_info_offset,this.header.session_info_offset+this.header.session_info_length)),this.loadSessionInfo(),this.data=new Uint8Array(t.slice(this.header.buf_offset)),this.loadDataLaps()}print(){console.log(this.header),console.log(this.diskHeader),console.log(this.varsHeader),console.log(this.sessionInfo),console.log("Data Length:",this.data.length)}convertToString(t,e,i){for(var a="",n=i-e,s=0;s<n;s++){a+=0==t.getUint8(s+e)?"":String.fromCharCode(t.getUint8(s+e))}return a}initArrayOfDataLap(t){for(var e=new Array(t),i=1;i<=t;i++)e[i-1]=new n(i);return e}loadDataLaps(){for(var t=this.diskHeader.lap_count,e=this.initArrayOfDataLap(t),i=this.data.length/this.header.buf_len,a=0,n=this.getHeaderData("Lap",0).content,s=0,r=0,o=0,l=[],h=0;h<i;h++){if((a=this.getHeaderData("Lap",h).content)!=n){if(e[o].setLapTimeSeconds(0),e[o].optimizeArraySize(),r+1>=this.diskHeader.lap_count){t+=1;for(var c=this.initArrayOfDataLap(t),d=0;d<e.length;d++)c[d]=e[d];e=c,c=null}r++}0==this.getHeaderData("EnterExitReset",h).content&&l.push(n);var p=this.getHeaderData("LapDistPct",h).content,u=parseFloat(this.getHeaderData("LapDist",h).content),g=parseInt(u),f=this.getHeaderData("AirTemp",h).content.toFixed(1),m=this.getHeaderData("TrackTemp",h).content.toFixed(1),x=this.getHeaderData("AirDensity",h).content.toFixed(1),R=this.getHeaderData("AirPressure",h).content.toFixed(1),v=0;g>210&&(v=parseFloat(this.getHeaderData("LapCurrentLapTime",h).content));var L=this.getHeaderData("Throttle",h).content,y=this.getHeaderData("Brake",h).content,A=this.getHeaderData("BrakeABSactive",h).content,w=(3600*this.getHeaderData("Speed",h).content/1e3/320).toFixed(3),C=this.getHeaderData("Gear",h).content,b=this.getHeaderData("RPM",h).content,F=this.getHeaderData("SteeringWheelAngle",h).content,T=this.getHeaderData("WindDir",h).content,M=3.6*this.getHeaderData("WindVel",h).content,k=this.getHeaderData("FuelLevel",h).content,D=this.getHeaderData("YawNorth",h).content,S=1e3*this.getHeaderData("CFSRrideHeight",h).content,I=1e3*this.getHeaderData("LFrideHeight",h).content,H=1e3*this.getHeaderData("RFrideHeight",h).content,O=1e3*this.getHeaderData("LRrideHeight",h).content,E=1e3*this.getHeaderData("RRrideHeight",h).content,_=this.getHeaderData("Lat",h).content,N=this.getHeaderData("Lon",h).content;e[r].lapNumber=a,e[r].setAirTemp(f),e[r].setTrackTemp(m),e[r].setAirDensity(x),e[r].setAirPressure(R),e[r].addLapCurrentTimeSeconds(v),e[r].addLapDistPct(p),e[r].addLapDistMeters(u),e[r].addLapDistMetersInt(g),L<0&&(L=0),y<0&&(y=0),e[r].addThrottle(L),e[r].addBrake(y),e[r].addAbsActive(A),e[r].addSpeedKmh(w),0==C&&(C=s),e[r].addGear(C),e[r].addRpm(b),e[r].addSteer(F),e[r].addWindDir(T),e[r].addWindVel(M),e[r].addFuelLevel(k),e[r].addYawNorth(D),e[r].tires.addLFtempL(this.getHeaderData("LFtempL",h).content),e[r].tires.addLFtempM(this.getHeaderData("LFtempM",h).content),e[r].tires.addLFtempR(this.getHeaderData("LFtempR",h).content),e[r].tires.addRFtempL(this.getHeaderData("RFtempL",h).content),e[r].tires.addRFtempM(this.getHeaderData("RFtempM",h).content),e[r].tires.addRFtempR(this.getHeaderData("RFtempR",h).content),e[r].tires.addLRtempL(this.getHeaderData("LRtempL",h).content),e[r].tires.addLRtempM(this.getHeaderData("LRtempM",h).content),e[r].tires.addLRtempR(this.getHeaderData("LRtempR",h).content),e[r].tires.addRRtempL(this.getHeaderData("RRtempL",h).content),e[r].tires.addRRtempM(this.getHeaderData("RRtempM",h).content),e[r].tires.addRRtempR(this.getHeaderData("RRtempR",h).content),e[r].addcFSRrideHeight(S),e[r].addFrontRideHeight(I,H),e[r].addRearRideHeight(O,E),e[r].trackCoordinate.addLat(_),e[r].trackCoordinate.addLon(N),e[r].updateSize(),e[r].updateIndex(),e[r].trackCoordinate.updateSize(),e[r].trackCoordinate.updateIndex(),e[r].tires.updateIndex(),n=a,o=r,s=C}e[r].setLapTimeSeconds(0),e[r].optimizeArraySize();for(var z=0,P=e.length;z<P;)0!=e[z].lapNumber?l.includes(e[z].lapNumber)?(e.splice(z,1),P-=1,z=0):z++:(e.splice(z,1),P-=1,z=0);l=null,this.dataLaps=e}getHeaderData(t,e){for(var i=null,a=0;a<this.varsHeader.length;a++)if(this.varsHeader[a].name==t){i=this.varsHeader[a];break}if(null==i)return i={content:0};var n=e*this.header.buf_len+i.offset;switch(i.type){case 0:i.content_type="string";var s=this.data.slice(n,n+8),r="";for(a=0;a<8;a++){r+=0==s[a]?"":String.fromCharCode(s[a])}i.content=r,8;break;case 1:i.content_type="boolean";s=this.data.slice(n,n+1);i.content=255&s,1;break;case 2:i.content_type="int32";var o=4294967295&((s=this.data.slice(n,n+4))[0]|s[1]<<8|s[2]<<16|s[3]<<24);i.content=o,4;break;case 3:o=4294967295&((s=this.data.slice(n,n+4))[0]|s[1]<<8|s[2]<<16|s[3]<<24);i.content_type="uint32",i.content=o,4;break;case 4:i.content_type="float32";s=this.data.slice(n,n+4);var l=new ArrayBuffer(4);(h=new DataView(l)).setUint8(0,s[0]),h.setUint8(1,s[1]),h.setUint8(2,s[2]),h.setUint8(3,s[3]),i.content=h.getFloat32(0,!0),4;break;case 5:i.content_type="float64";var h;s=this.data.slice(n,n+8),l=new ArrayBuffer(8);(h=new DataView(l)).setInt8(0,s[0]),h.setInt8(1,s[1]),h.setInt8(2,s[2]),h.setInt8(3,s[3]),h.setInt8(4,s[4]),h.setInt8(5,s[5]),h.setInt8(6,s[6]),h.setInt8(7,s[7]),i.content=h.getFloat64(0,!0),8;break;default:console.log("default")}return i}loadSessionInfo(){for(var t=0,e="";t<this.sessionInfoBytes.length;)e+=String.fromCharCode(this.sessionInfoBytes[t]),t++;this.sessionInfo=jsyaml.load(e)}}class o{constructor(){var t="track-canvas",e=document.getElementById(t),i=e.clientWidth,a=e.clientHeight,n=e.parentElement;e.remove(),this.canvas=document.createElement("canvas"),this.canvas.className=e.className,this.canvas.id=t,this.canvas.width=i,this.canvas.height=a,n.appendChild(this.canvas),this.widthForTrack=this.canvas.width,this.heightForTrack=this.canvas.height,this.ctx=this.canvas.getContext("2d"),this.currentIndexAt=0,this.trackCoordinates=new Array(2),this.steerAngles=new Array(2),this.windDirs=new Array(2),this.carsYaw=new Array(2),this.LFtemp={left:new Array(2),middle:new Array(2),right:new Array(2)},this.RFtemp={left:new Array(2),middle:new Array(2),right:new Array(2)},this.LRtemp={left:new Array(2),middle:new Array(2),right:new Array(2)},this.RRtemp={left:new Array(2),middle:new Array(2),right:new Array(2)},this.steerImgs=new Array(2),this.steerImgs[0]=document.getElementById("steeringWheel1"),this.steerImgs[1]=document.getElementById("steeringWheel2"),this.windDirImgs=new Array(2),this.windDirImgs[0]=document.getElementById("windDir1"),this.windDirImgs[1]=document.getElementById("windDir2"),this.compassImg=document.getElementById("arrow-compass"),this.carDirImgs=new Array(2),this.carDirImgs[0]=document.getElementById("carDir-main"),this.carDirImgs[1]=document.getElementById("carDir-compared"),this.xTranslate=0,this.yTranslate=0,this.zoom=.8,this.trackLineColorMain="rgb(72, 109, 232)",this.trackLineColorCompared="rgb(197, 83, 5)",this.circleSize=4,this.drawTestLines(),this.activeMoveTrack()}setZoom(t){this.zoom=t}setTranslate(t,e){this.xTranslate=t,this.yTranslate=e}setTrackCoordinates(t,e){t>=2?console.log("Error: You Cannot Set More Than 2 data Laps!"):(this.trackCoordinates[t]=e,this.trackCoordinates[t].generateXY(this.widthForTrack,this.heightForTrack))}setSteerAngles(t,e){t>=2?console.log("Error: You Cannot Set More Than 2 data Laps!"):this.steerAngles[t]=e}setWindDirs(t,e){t>=2?console.log("Error: You Cannot Set More Than 2 data Laps!"):this.windDirs[t]=e}setCarsYaw(t,e){t>=2?console.log("Error: You Cannot Set More Than 2 data Laps!"):this.carsYaw[t]=e}setTiresFrontTemp(t,e,i,a,n,s,r){this.LFtemp.left[t]=e,this.LFtemp.middle[t]=i,this.LFtemp.right[t]=a,this.RFtemp.left[t]=n,this.RFtemp.middle[t]=s,this.RFtemp.right[t]=r}setTiresRearTemp(t,e,i,a,n,s,r){this.LRtemp.left[t]=e,this.LRtemp.middle[t]=i,this.LRtemp.right[t]=a,this.RRtemp.left[t]=n,this.RRtemp.middle[t]=s,this.RRtemp.right[t]=r}updateCurrentIndexAt(t){this.currentIndexAt=t,this.draw()}resetTrackPositionOnCanvas(){this.zoom=.8,this.xTranslate=this.canvas.width/4,this.yTranslate=10,this.draw()}activeMoveTrack(){var t=this,e=!1,i=0,a=0;this.canvas.addEventListener("mousedown",(function(n){null==t.trackCoordinates[0]&&null==t.trackCoordinates[1]||(i=n.pageX-t.xTranslate,a=n.pageY-t.yTranslate,e=!0)})),this.canvas.addEventListener("mousemove",(function(n){e&&(t.xTranslate=n.pageX-i,t.yTranslate=n.pageY-a,t.draw())})),this.canvas.addEventListener("mouseup",(function(){e&&(e=!1)})),this.canvas.addEventListener("mouseout",(function(){e&&(e=!1)}));var n=0,s=0,r=0,o=0;this.canvas.addEventListener("wheel",(function(e){null==t.trackCoordinates[0]&&null==t.trackCoordinates[1]||(e.preventDefault(),n=e.offsetX,s=e.offsetY,r=e.deltaY>0?.9:1.1,(o=t.zoom*r)>20||o<.1||(t.xTranslate=n-(n-t.xTranslate)*r,t.yTranslate=s-(s-t.yTranslate)*r,t.zoom=o,t.draw()))})),window.onscroll=function(){var t=document.querySelectorAll(".data-canvas")[0],e=document.querySelectorAll(".track")[0],i=window.scrollY;i+e.clientHeight>=t.clientHeight||(e.style.top=i+"px")}}convertLatLonToCanvas(t,e){var i=this.trackCoordinates[t];const a=i.maxLat-i.minLat,n=i.maxLon-i.minLon,s=Math.max(a,n),r=this.widthForTrack/s;return{x:(i.lon[e]-i.minLon)*r,y:this.heightForTrack-(i.lat[e]-i.minLat)*r}}drawTestLines(){this.ctx.fillStyle=this.trackLineColorMain,this.ctx.strokeStyle=this.trackLineColorCompared,this.ctx.beginPath(),this.ctx.font="bold 48px Arial",this.ctx.fillText("TRACK",this.canvas.width/2-92,this.canvas.height/2),this.ctx.strokeText("TRACK",this.canvas.width/2-92,this.canvas.height/2)}drawCircleOnTrack(){for(var t=12/this.zoom,e=t/2,i=0;i<this.carDirImgs.length;i++)if(null!=this.trackCoordinates[i]){this.ctx.beginPath();var a=this.trackCoordinates[i].getXY(this.currentIndexAt);this.ctx.save(),this.ctx.translate(a.x,a.y),this.ctx.rotate(this.carsYaw[i][this.currentIndexAt]),this.ctx.drawImage(this.carDirImgs[i],-e,-e,t,t),this.ctx.restore()}}drawSteerAngles(){if(null!=this.steerAngles[0]||null!=this.steerAngles[1])for(var t=10,e=this.canvas.width-70,i=0;i<this.steerAngles.length;i++)null!=this.steerAngles[i]&&(t=t+60*i+8,this.ctx.beginPath(),this.ctx.fillStyle=0==i?this.trackLineColorMain:this.trackLineColorCompared,this.ctx.textAlign="center",this.ctx.font="12px Arial",this.ctx.fillText((-this.steerAngles[i][this.currentIndexAt]*(180/Math.PI)).toFixed(1)+"Â°",e+30,t+2),this.ctx.beginPath(),this.ctx.save(),this.ctx.translate(e+30,t+30),this.ctx.rotate(-this.steerAngles[i][this.currentIndexAt]),this.ctx.drawImage(this.steerImgs[i],-30,-30,60,60),this.ctx.restore(),this.ctx.fillStyle=0==i?this.trackLineColorMain:this.trackLineColorCompared,this.ctx.arc(e+30,t+30,4,0,2*Math.PI),this.ctx.fill())}drawWindDir(){if(null!=this.steerAngles[0]||null!=this.steerAngles[1])for(var t=10,e=0;e<this.windDirs.length;e++)null!=this.windDirs[e]&&(t+=0==e?30:60,this.ctx.beginPath(),this.ctx.save(),this.ctx.translate(42.5,t+12.5),this.ctx.drawImage(this.compassImg,-32,-28,60,60),this.ctx.rotate(this.windDirs[e][this.currentIndexAt]),this.ctx.drawImage(this.windDirImgs[e],-12.5,-12.5,25,25),this.ctx.restore())}drawTires(){for(var t=20,e=50,i=0;i<2;i++)if(null!=this.LFtemp.left[i]){var a=0==i?15:95;this.ctx.lineWidth=2,this.ctx.strokeStyle=0==i?this.trackLineColorMain:this.trackLineColorCompared,this.ctx.rect(a,this.canvas.height-160,72,140),this.ctx.stroke(),t=0==i?20:100,this.ctx.fillStyle="rgb(255, 255, 255)";var n=150,s=0,r=0,o=0;this.ctx.beginPath(),s=this.LFtemp.left[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+s+", "+(255-s)+", 0)",this.ctx.fillRect(t,this.canvas.height-150,8,e),r=this.LFtemp.middle[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+r+", "+(255-r)+", 0)",this.ctx.fillRect(t+8+2,this.canvas.height-150,8,e),o=this.LFtemp.right[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+o+", "+(255-o)+", 0)",this.ctx.fillRect(t+16+4,this.canvas.height-150,8,e),t+=34,s=this.RFtemp.left[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+s+", "+(255-s)+", 0)",this.ctx.fillRect(t,this.canvas.height-150,8,e),r=this.RFtemp.middle[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+s+", "+(255-s)+", 0)",this.ctx.fillRect(t+8+2,this.canvas.height-150,8,e),o=this.RFtemp.right[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+s+", "+(255-s)+", 0)",this.ctx.fillRect(t+16+4,this.canvas.height-150,8,e),this.ctx.beginPath(),t=0==i?20:100,s=this.LRtemp.left[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+s+", "+(255-s)+", 0)",this.ctx.fillRect(t,this.canvas.height-80,8,e),r=this.LRtemp.middle[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+s+", "+(255-s)+", 0)",this.ctx.fillRect(t+8+2,this.canvas.height-80,8,e),o=this.LRtemp.right[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+s+", "+(255-s)+", 0)",this.ctx.fillRect(t+16+4,this.canvas.height-80,8,e),t+=34,s=this.RRtemp.left[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+s+", "+(255-s)+", 0)",this.ctx.fillRect(t,this.canvas.height-80,8,e),r=this.RRtemp.middle[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+s+", "+(255-s)+", 0)",this.ctx.fillRect(t+8+2,this.canvas.height-80,8,e),o=this.RRtemp.right[i][this.currentIndexAt]/n*255,this.ctx.fillStyle="rgb("+s+", "+(255-s)+", 0)",this.ctx.fillRect(t+16+4,this.canvas.height-80,8,e)}}drawTrackSurface(){}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),this.ctx.translate(this.xTranslate,this.yTranslate),this.ctx.scale(this.zoom,this.zoom),this.ctx.lineWidth=1/this.zoom;for(let s=0;s<this.trackCoordinates.length;s++)if(null!=this.trackCoordinates[s]&&null!=this.trackCoordinates[s]){var t=this.trackCoordinates[s],e=this.trackCoordinates[s].getXY(0);this.ctx.strokeStyle=0==s?this.trackLineColorMain:this.trackLineColorCompared;var i=e.x,a=e.y;this.ctx.beginPath();for(var n=1;n<t.size;n++)e=this.trackCoordinates[s].getXY(n),this.ctx.moveTo(i,a),i=e.x,a=e.y,e.x*this.zoom-5+this.xTranslate>this.canvas.width||e.x*this.zoom+this.xTranslate<-5||e.y*this.zoom-5+this.yTranslate>this.canvas.height||e.y*this.zoom+this.yTranslate<-5||this.ctx.lineTo(e.x,e.y);this.ctx.stroke()}this.drawCircleOnTrack(),this.ctx.restore(),this.drawSteerAngles(),this.drawWindDir(),this.drawTires()}}class l{constructor(t,e){this.lapNum=t,this.lat=new Float64Array(e),this.lon=new Float64Array(e),this.x=new Float64Array(e),this.y=new Float64Array(e),this.minLat=9999,this.maxLat=-9999,this.minLon=9999,this.maxLon=-9999,this.latRange=0,this.lonRange=0,this.maxRange=0,this.scale=0,this.size=0,this.index=0}updateSize(){this.size+=1}updateIndex(){this.index+=1}generateXY(t,e){this.scale=t/this.maxRange;for(var i=0;i<this.size;i++)this.x[i]=(this.lon[i]-this.minLon)*this.scale,this.y[i]=e-(this.lat[i]-this.minLat)*this.scale}getX(t){return this.x[t]}getY(t){return this.y[t]}getXY(t){return{x:this.x[t],y:this.y[t]}}#t(){this.latRange=this.maxLat-this.minLat,this.lonRange=this.maxLon-this.minLon,this.maxRange=Math.max(this.latRange,this.lonRange)}addLat(t){this.lat[this.index]=t,this.minLat>t&&(this.minLat=t),this.maxLat<t&&(this.maxLat=t),this.#t()}addLon(t){this.lon[this.index]=t,this.minLon>t&&(this.minLon=t),this.maxLon<t&&(this.maxLon=t),this.#t()}getLatArray(){return this.lat}getLonArray(){return this.lon}}var h=document.getElementById("form_data");null==h&&console.log("Error: Could not find the form to upload");var c=document.querySelector(".loading_div");function d(){c.style.display="none"}var p=document.querySelectorAll(".str_file_name"),u=new Array(2),g=[{},{}],f=new Array(10),m=new class{constructor(){this.allCanvases=[],this.TrackCanvas=new o,this.isMouseDown=!1,this.xData=new Array(2),this.fuelLevels=new Array(2),this.windVel=new Array(2),this.filesInfoElements=[document.querySelectorAll(".file1Info"),document.querySelectorAll(".file2Info")],this.MAX_SELECTION=200}addCanvas(t){this.allCanvases.push(t)}clearAllCanvas(){this.allCanvases=[],this.TrackCanvas=new o}getTrackCanvas(){return this.TrackCanvas}setXData(t,e){this.xData[t]=e}setFuelLevel(t,e){this.fuelLevels[t]=e}setWindVel(t,e){this.windVel[t]=e}activeOnMouseMove(){var t=this;for(let e=0;e<this.allCanvases.length;e++)this.allCanvases[e].getCanvas().onmousemove=function(i){t.allCanvases[e].xPosAt=i.offsetX-t.allCanvases[e].getOffsetX();var a=t.allCanvases[e].xPosAt/(t.allCanvases[e].canvas.width-t.allCanvases[e].getOffsetX());for(let e=0;e<t.allCanvases.length;e++)t.canvasOnMouseMove(i,a,t.allCanvases[e],t)},this.allCanvases[e].getCanvas().onmousedown=function(i){t.canvasOnMouseDown(i,t.allCanvases[e])},this.allCanvases[e].getCanvas().ondblclick=function(){t.TrackCanvas.resetTrackPositionOnCanvas();for(let e=0;e<t.allCanvases.length;e++)t.allCanvases[e].resetStartEndMeters()}}canvasOnMouseMove(t,e,i,a){if(i.xPosAt=e*(i.canvas.width-i.getOffsetX()),!(i.xPosAt<0||i.xPosAt+i.getOffsetX()>=i.canvas.width)){var n=i.xPosAt+i.getOffsetX();i.draw();var s=i.getCurrentIndexAt(),r=a.xData[0][s];i.ctx.beginPath(),i.ctx.font="bold 10px Arial",i.ctx.textAlign="center",i.ctx.fillStyle="rgba(255, 255, 255, 1.0)",i.ctx.fillText(r+"m",n,i.getCanvas().height-10),a.TrackCanvas.updateCurrentIndexAt(s),null!=i.getCurrentIndexAt()&&null!=a.fuelLevels[0]&&(a.filesInfoElements[0][2].textContent=parseFloat(a.windVel[0][s]).toFixed(1)+"km/h",a.filesInfoElements[0][3].textContent=parseFloat(a.fuelLevels[0][s]).toFixed(2)+"L"),null!=i.getCurrentIndexAt()&&null!=a.fuelLevels[1]&&(a.filesInfoElements[1][2].textContent=parseFloat(a.windVel[1][s]).toFixed(1)+"km/h",a.filesInfoElements[1][3].textContent=parseFloat(a.fuelLevels[1][s]).toFixed(2)+"L")}}canvasOnMouseDown(t,e){var i=t.offsetX,a=e.getCurrentIndexAt(),n=0;if(!(i<0)){this.isMouseDown=!0;var s=this;window.onmousemove=function(t){s.isMouseDown&&(t.offsetX-e.getOffsetX()<0||(n=e.getCurrentIndexAt(),s.highlightsSelectedPart(a,n)))},window.onmouseup=function(){if(s.isMouseDown){if(a+n!=a&&Math.abs(a-n)>s.MAX_SELECTION){if(a>n){var t=a;a=n,n=t}for(var e=0;e<s.allCanvases.length;e++)s.allCanvases[e].setStartEndIndex(a,n)}s.isMouseDown=!1}}}}highlightsSelectedPart(t,e){for(var i=0,a=0;a<this.allCanvases.length;a++){var n=this.allCanvases[a].ctx;n.beginPath(),n.fillStyle="rgba(255, 255, 255, 0.2)",i=e-t,n.fillRect(this.allCanvases[a].getOffsetX()+(t-this.allCanvases[a].startMetersIndex)*this.allCanvases[a].stepsX,0,i*this.allCanvases[a].stepsX,this.allCanvases[a].getCanvas().height)}}},x={lap1:-1,lap2:-1};function R(){f[0]=new i("delta","Delta"),f[0].setIsTranslateCenter(!0),f[1]=new i("throttle","Throttle"),f[2]=new i("brake","Brake"),f[3]=new i("speed","Speed"),f[4]=new i("gear","Gear"),f[5]=new i("CFSRideHeight","CFSRideHeight"),f[6]=new i("LFRideHeight","Left front"),f[7]=new i("RFRideHeight","Right front"),f[8]=new i("LRRideHeight","Left rear"),f[9]=new i("RRRideHeight","Right rear"),m.clearAllCanvas();for(var t=0;t<f.length;t++)null!=f[t]&&(f[t].clear(),m.addCanvas(f[t]))}function v(t){for(var e=document.querySelectorAll(t),i=0;i<e.length;i++)e[i].className=""}function L(t){R();var e=parseInt(t.parentElement.getAttribute("data-file-index")),i=parseInt(t.getAttribute("data-lap"));0==e?(v(".ul-laps1 li"),x.lap1==i?x.lap1=-1:(x.lap1=i,t.className="selectedFile1")):(v(".ul-laps2 li"),x.lap2==i?x.lap2=-1:(x.lap2=i,t.className="selectedFile2")),-1!=x.lap1||-1!=x.lap2?(!function(){if(u[0].isValid()&&-1!=x.lap1&&-1==x.lap2){var t=u[0].getOneDataLap(x.lap1),e=new Float32Array(t.size);f[0].setLap(0,e),f[0].draw(),f[1].setLap(0,t.getThrottleArray()),f[1].draw(),f[2].setLap(0,t.getBrakeArray()),f[2].setSubscribeData(0,t.getAbsAcvtiveArray()),f[2].draw(),f[3].setLap(0,t.getSpeedKmhArray()),f[3].draw(),f[4].setLap(0,t.getGearArray()),f[4].setSubscribeData(0,t.getRpmArray()),f[4].setMinMaxData(0,t.maxGear,0,1),f[4].draw(),f[5].boxWidth=56,f[5].setLap(0,t.getCFSRrideHeightArray()),f[5].setMinMaxData(t.minCFSRideHeight,t.maxCFSRideHeight,0,1),f[5].draw(),f[6].boxWidth=56,f[6].setLap(0,t.getLFRideHeightArray()),f[6].setMinMaxData(t.minLFRideHeight,t.maxLFRideHeight,0,1),f[6].draw(),f[7].boxWidth=56,f[7].setLap(0,t.getRFRideHeightArray()),f[7].setMinMaxData(t.minRFRideHeight,t.maxRFRideHeight,0,1),f[7].draw(),f[8].boxWidth=56,f[8].setLap(0,t.getLRRideHeightArray()),f[8].setMinMaxData(t.minLRRideHeight,t.maxLRRideHeight,0,1),f[8].draw(),f[9].boxWidth=56,f[9].setLap(0,t.getRRRideHeightArray()),f[9].setMinMaxData(t.minRRRideHeight,t.maxRRRideHeight,0,1),f[9].draw(),m.setXData(0,t.getLapDistMetersIntArray()),m.getTrackCanvas().setTrackCoordinates(0,t.trackCoordinate),m.getTrackCanvas().setSteerAngles(0,t.getSteerArray()),m.getTrackCanvas().setWindDirs(0,t.getWindDirArray()),m.getTrackCanvas().setCarsYaw(0,t.getYawNorthArray()),m.getTrackCanvas().setTiresFrontTemp(0,t.tires.LFtempL,t.tires.LFtempM,t.tires.LFtempR,t.tires.RFtempL,t.tires.RFtempM,t.tires.RFtempR),m.getTrackCanvas().setTiresRearTemp(0,t.tires.LRtempL,t.tires.LRtempM,t.tires.LRtempR,t.tires.RRtempL,t.tires.RRtempM,t.tires.RRtempR),m.setWindVel(0,t.getWindVelArray()),m.setFuelLevel(0,t.getFuelLevelArray()),m.getTrackCanvas().draw(),y(0,t.airTemp,t.trackTemp,t.windVel[0],t.fuelLevel[0])}if(u[1].isValid()&&-1!=x.lap2&&-1==x.lap1){var i=u[1].getOneDataLap(x.lap2);e=new Float32Array(i.size);f[0].setLap(1,e),f[0].draw(),f[1].setLap(1,i.getThrottleArray()),f[1].draw(),f[2].setLap(1,i.getBrakeArray()),f[2].setSubscribeData(1,i.getAbsAcvtiveArray()),f[2].draw(),f[3].setLap(1,i.getSpeedKmhArray()),f[3].draw(),f[4].setLap(1,i.getGearArray()),f[4].setSubscribeData(1,i.getRpmArray()),f[4].setMinMaxData(0,i.maxGear,0,1),f[4].draw(),f[5].boxWidth=56,f[5].setLap(1,i.getCFSRrideHeightArray()),f[5].setMinMaxData(i.minCFSRideHeight,i.maxCFSRideHeight,0,1),f[5].draw(),f[6].boxWidth=56,f[6].setLap(1,i.getLFRideHeightArray()),f[6].setMinMaxData(i.minLFRideHeight,i.maxLFRideHeight,0,1),f[6].draw(),f[7].boxWidth=56,f[7].setLap(1,i.getRFRideHeightArray()),f[7].setMinMaxData(i.minRFRideHeight,i.maxRFRideHeight,0,1),f[7].draw(),f[8].boxWidth=56,f[8].setLap(1,i.getLRRideHeightArray()),f[8].setMinMaxData(i.minLRRideHeight,i.maxLRRideHeight,0,1),f[8].draw(),f[9].boxWidth=56,f[9].setLap(1,i.getRRRideHeightArray()),f[9].setMinMaxData(i.minRRRideHeight,i.maxRRRideHeight,0,1),f[9].draw(),m.setXData(0,i.getLapDistMetersIntArray()),m.getTrackCanvas().setTrackCoordinates(1,i.trackCoordinate),m.getTrackCanvas().setSteerAngles(1,i.getSteerArray()),m.getTrackCanvas().setWindDirs(1,i.getWindDirArray()),m.getTrackCanvas().setCarsYaw(1,i.getYawNorthArray()),m.getTrackCanvas().setTiresFrontTemp(1,i.tires.LFtempL,i.tires.LFtempM,i.tires.LFtempR,i.tires.RFtempL,i.tires.RFtempM,i.tires.RFtempR),m.getTrackCanvas().setTiresRearTemp(1,i.tires.LRtempL,i.tires.LRtempM,i.tires.LRtempR,i.tires.RRtempL,i.tires.RRtempM,i.tires.RRtempR),m.setWindVel(1,i.getWindVelArray()),m.setFuelLevel(1,i.getFuelLevelArray()),m.getTrackCanvas().draw(),y(1,i.airTemp,i.trackTemp,i.windVel[0],i.fuelLevel[0])}if(u[0].isValid()&&u[1].isValid()&&x.lap1>-1&&x.lap2>-1){t=u[0].getOneDataLap(x.lap1),i=u[1].getOneDataLap(x.lap2);t.setDataLapToCompare(i);var a=t.runSyncLaps();f[0].setLap(0,a[0].getLapCurrentTimeSecondsArray()),f[0].draw(),f[1].setLap(0,a[0].getThrottleArray()),f[1].setLap(1,a[1].getThrottleArray()),f[1].draw(),f[2].setLap(0,a[0].getBrakeArray()),f[2].setLap(1,a[1].getBrakeArray()),f[2].setSubscribeData(0,a[0].getAbsAcvtiveArray()),f[2].setSubscribeData(1,a[1].getAbsAcvtiveArray()),f[2].draw(),f[3].setLap(0,a[0].getSpeedKmhArray()),f[3].setLap(1,a[1].getSpeedKmhArray()),f[3].draw(),f[4].setLap(0,a[0].getGearArray()),f[4].setLap(1,a[1].getGearArray()),f[4].setSubscribeData(0,a[0].getRpmArray()),f[4].setSubscribeData(1,a[1].getRpmArray()),f[4].setMinMaxData(0,a[0].maxGear,0,1),f[4].setMinMaxData(0,a[1].maxGear,0,1),f[4].draw(),f[5].boxWidth=56,f[5].setLap(0,a[0].getCFSRrideHeightArray()),f[5].setLap(1,a[1].getCFSRrideHeightArray()),f[5].setMinMaxData(a[0].minCFSRideHeight,a[0].maxCFSRideHeight,0,1),f[5].setMinMaxData(a[1].minCFSRideHeight,a[1].maxCFSRideHeight,0,1),f[5].draw(),f[6].boxWidth=56,f[6].setLap(0,a[0].getLFRideHeightArray()),f[6].setLap(1,a[1].getLFRideHeightArray()),f[6].setMinMaxData(a[0].minLFRideHeight,a[0].maxLFRideHeight,0,1),f[6].setMinMaxData(a[1].minLFRideHeight,a[1].maxLFRideHeight,0,1),f[6].draw(),f[7].boxWidth=56,f[7].setLap(0,a[0].getRFRideHeightArray()),f[7].setLap(1,a[1].getRFRideHeightArray()),f[7].setMinMaxData(a[0].minRFRideHeight,a[0].maxRFRideHeight,0,1),f[7].setMinMaxData(a[1].minRFRideHeight,a[1].maxRFRideHeight,0,1),f[7].draw(),f[8].boxWidth=56,f[8].setLap(0,a[0].getLRRideHeightArray()),f[8].setLap(1,a[1].getLRRideHeightArray()),f[8].setMinMaxData(a[0].minLRRideHeight,a[0].maxLRRideHeight,0,1),f[8].setMinMaxData(a[1].minLRRideHeight,a[1].maxLRRideHeight,0,1),f[8].draw(),f[9].boxWidth=56,f[9].setLap(0,a[0].getRRRideHeightArray()),f[9].setLap(1,a[1].getRRRideHeightArray()),f[9].setMinMaxData(a[0].minRRRideHeight,a[0].maxRRRideHeight,0,1),f[9].setMinMaxData(a[1].minRRRideHeight,a[1].maxRRRideHeight,0,1),f[9].draw(),m.setXData(0,a[0].getLapDistMetersIntArray()),m.getTrackCanvas().setTrackCoordinates(0,a[0].trackCoordinate),m.getTrackCanvas().setTrackCoordinates(1,a[1].trackCoordinate),m.getTrackCanvas().setSteerAngles(0,a[0].getSteerArray()),m.getTrackCanvas().setSteerAngles(1,a[1].getSteerArray()),m.getTrackCanvas().setWindDirs(0,a[0].getWindDirArray()),m.getTrackCanvas().setWindDirs(1,a[1].getWindDirArray()),m.getTrackCanvas().setCarsYaw(0,a[0].getYawNorthArray()),m.getTrackCanvas().setCarsYaw(1,a[1].getYawNorthArray()),m.getTrackCanvas().setTiresFrontTemp(0,a[0].tires.LFtempL,a[0].tires.LFtempM,a[0].tires.LFtempR,a[0].tires.RFtempL,a[0].tires.RFtempM,a[0].tires.RFtempR),m.getTrackCanvas().setTiresRearTemp(0,a[0].tires.LRtempL,a[0].tires.LRtempM,a[0].tires.LRtempR,a[0].tires.RRtempL,a[0].tires.RRtempM,a[0].tires.RRtempR),m.getTrackCanvas().setTiresFrontTemp(1,a[1].tires.LFtempL,a[1].tires.LFtempM,a[1].tires.LFtempR,a[1].tires.RFtempL,a[1].tires.RFtempM,a[1].tires.RFtempR),m.getTrackCanvas().setTiresRearTemp(1,a[1].tires.LRtempL,a[1].tires.LRtempM,a[1].tires.LRtempR,a[1].tires.RRtempL,a[1].tires.RRtempM,a[1].tires.RRtempR),m.setWindVel(0,a[0].getWindVelArray()),m.setWindVel(1,a[1].getWindVelArray()),m.setFuelLevel(0,a[0].getFuelLevelArray()),m.setFuelLevel(1,a[1].getFuelLevelArray()),m.getTrackCanvas().draw(),y(0,t.airTemp,t.trackTemp,a[0].windVel[0],a[0].fuelLevel[0]),y(1,i.airTemp,i.trackTemp,a[1].windVel[0],a[1].fuelLevel[0])}}(),m.activeOnMouseMove()):console.log("Choose The Laps")}function y(t,e,i,a,n){var s=[document.querySelectorAll(".file1Info"),document.querySelectorAll(".file2Info")];if(null==u[t])return s[t][0].textContent="0c",s[t][1].textContent="0c",s[t][2].textContent="0km/h",void(s[t][3].textContent="0L");s[t][0].textContent=e+"c",s[t][1].textContent=i+"c",s[t][2].textContent=parseFloat(a).toFixed(1)+"km/h",s[t][3].textContent=parseFloat(n).toFixed(2)+"L"}function A(t){if(null==t)return null;for(var e=[],i=0;i<t.length;i++)e.push(t[i].getLapTimeStr());return e}h.file1.onchange=function(){p[0].textContent=null==h.file1.files[0]?"Choose the file":h.file1.files[0].name},h.file2.onchange=function(){p[1].textContent=null==h.file2.files[0]?"Choose the file":h.file2.files[0].name},h.addEventListener("submit",(async function(t){if(t.preventDefault(),function(){c.style.display="block"}(),(u=new Array(2))[0]=new r(h.file1.files[0]),u[1]=new r(h.file2.files[0]),!u[0].isValid()&&!u[1].isValid())return R(),function(){for(var t=document.querySelectorAll(".filename_laps"),e=0;e<2;e++)t[e].textContent="Driver name";var i=document.querySelector(".ul-laps1");i.innerHTML="";for(e=0;e<3;e++)i.innerHTML+="<li data-lap='"+e+"'>0:00:000 <span class='lap_number'>L 0</span></li>";var a=document.querySelector(".ul-laps2");a.innerHTML="";for(e=0;e<3;e++)a.innerHTML+="<li data-lap='"+e+"'>0:00:000 <span class='lap_number'>L 0</span></li>"}(),void setTimeout(d,500);x.lap1=-1,x.lap2=-1,driversLaps=[{},{}];for(var e=0;e<u.length;e++)if(u[e].isValid()){await u[e].read(),p[e].textContent=u[e].file.name;for(var i=u[e].sessionInfo.DriverInfo.DriverCarIdx,a=u[e].sessionInfo.DriverInfo.Drivers.length,n=0;n<a;n++)if(i==u[e].sessionInfo.DriverInfo.Drivers[n].CarIdx){g[e]=u[e].sessionInfo.DriverInfo.Drivers[n];break}}setTimeout((function(){R(),function(t,e){for(var i=document.querySelectorAll(".filename_laps"),a=0;a<g.length;a++)null!=g[a].UserName&&(i[a].textContent=g[a].UserName);var n=new Array(2);n[0]=A(t),n[1]=A(e),function(t){var e=document.querySelector(".ul-laps1");if(e.innerHTML="",null!=t[0])for(var i=0;i<t[0].length;i++)e.innerHTML+="<li data-lap='"+i+"'>"+t[0][i]+" <span class='lap_number'>L "+u[0].getOneDataLap(i).lapNumber+"</span></li>";var a=document.querySelector(".ul-laps2");if(a.innerHTML="",null!=t[1])for(i=0;i<t[1].length;i++)a.innerHTML+="<li data-lap='"+i+"'>"+t[1][i]+"  <span class='lap_number'>L "+u[1].getOneDataLap(i).lapNumber+"</span></li>";var n=document.querySelectorAll(".ul-laps1 li"),s=document.querySelectorAll(".ul-laps2 li");for(let t=0;t<n.length;t++)n[t].addEventListener("click",(function(){L(n[t])}));for(let t=0;t<s.length;t++)s[t].addEventListener("click",(function(){L(s[t])}));d()}(n)}(u[0].getDataLaps(),u[1].getDataLaps())}),100)})),document.getElementById("controller-zoom-out").onclick=function(){for(var t=0;t<m.allCanvases.length;t++)for(var e=0;e<m.allCanvases[t].data.length;e++)null!=m.allCanvases[t].data[e]&&m.allCanvases[t].setStartEndIndex(0,m.allCanvases[t].data[e].length);m.getTrackCanvas().resetTrackPositionOnCanvas()};var w=document.getElementById("controller-play-lap"),C=document.getElementById("play_pause_image"),b=document.getElementById("playback_speed"),F=!1,T=0,M=1e-4,k=0;function D(){for(var t=0;t<m.allCanvases.length;t++)m.canvasOnMouseMove(null,T,m.allCanvases[t],m);(T+=M)>=.98999?(cancelAnimationFrame(k),T=0,F=!1,C.src="images/play.png"):k=requestAnimationFrame(D)}b.oninput=function(){M=parseFloat(this.value),document.getElementById("playback_speed_text").textContent=(1e4*this.value).toFixed(0)},w.onclick=function(){if(-1!=x.lap1||-1!=x.lap2){if(F)return cancelAnimationFrame(k),C.src="images/play.png",F=!1,void(T=0);F=!0,C.src="images/pause.png",D()}};